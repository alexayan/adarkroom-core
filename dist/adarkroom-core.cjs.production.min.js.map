{"version":3,"file":"adarkroom-core.cjs.production.min.js","sources":["../src/type.ts","../node_modules/regenerator-runtime/runtime.js","../src/translate.ts","../src/config.ts","../src/state/reducers/marketing.ts","../src/state/reducers/config.ts","../src/state/reducers/features/location.ts","../src/state/reducers/features/index.ts","../src/state/reducers/common/numberValueModify.ts","../src/state/reducers/stores.ts","../src/state/reducers/game/fire.ts","../src/state/reducers/game/builder.ts","../src/state/reducers/game/temperature.ts","../src/state/reducers/game/thieves.ts","../src/state/reducers/game/stolen.ts","../src/state/reducers/game/buildings.ts","../src/state/reducers/game/population.ts","../src/state/reducers/game/workers.ts","../src/state/reducers/game/city.ts","../src/state/reducers/game/world.ts","../src/state/reducers/game/space_ship.ts","../src/state/reducers/game/outside.ts","../src/state/reducers/game/index.ts","../src/state/reducers/notifications.ts","../src/state/reducers/engine.ts","../src/state/reducers/income.ts","../src/state/reducers/character/perks.ts","../src/state/reducers/character/statistics.ts","../src/state/reducers/character/index.ts","../src/state/reducers/events.ts","../src/tools/uuid.ts","../src/state/reducers/previous.ts","../src/state/reducers/room.ts","../src/state/reducers/path/outfit.ts","../src/state/reducers/path/index.ts","../src/state/reducers/delay.ts","../src/state/reducers/operation.ts","../src/state/reducers/index.ts","../src/state/index.ts","../src/logger.ts","../src/events/global.ts","../src/events/room.ts","../src/events/outside.ts","../src/events/marketing.ts","../src/events/setpieces.ts","../src/events/encounters.ts","../src/module.ts","../src/operations/index.ts","../src/operations/combat.ts","../src/operations/events.ts","../src/events/index.ts","../src/operations/world.ts","../src/world.ts","../src/tools/room.ts","../src/operations/room.ts","../src/room.ts","../src/operations/path.ts","../src/path.ts","../src/operations/ship.ts","../src/ship.ts","../src/space.ts","../src/operations/outside.ts","../src/outside.ts","../src/prestige.ts","../src/operations/engine.ts","../src/engine.ts","../src/i18n.ts"],"sourcesContent":["import { GameState } from './state';\nimport Engine from './engine';\nimport translate from './translate';\nimport config from './config';\n\nexport enum StoreCategory {\n  wood = 'wood',\n  fur = 'fur',\n  meat = 'meat',\n  iron = 'iron',\n  coal = 'coal',\n  sulphur = 'sulphur',\n  steel = 'steel',\n  cured_meat = 'cured_meat',\n  scales = 'scales',\n  teeth = 'teeth',\n  leather = 'leather',\n  bait = 'bait',\n  torch = 'torch',\n  cloth = 'cloth',\n  bone_spear = 'bone_spear',\n  iron_sword = 'iron_sword',\n  steel_sword = 'steel_sword',\n  bayonet = 'bayonet',\n  rifle = 'rifle',\n  laser_rifle = 'laser_rifle',\n  bullets = 'bullets',\n  energy_cell = 'energy_cell',\n  grenade = 'grenade',\n  bolas = 'bolas',\n  medicine = 'medicine',\n  compass = 'compass',\n  charm = 'charm',\n  alien_alloy = 'alien_alloy',\n  waterskin = 'waterskin',\n  cask = 'cask',\n  water_tank = 'water_tank',\n  rucksack = 'rucksack',\n  wagon = 'wagon',\n  convoy = 'convoy',\n  l_armou = 'l_armou',\n  i_armour = 'i_armour',\n  s_armour = 's_armour',\n  trap = 'trap',\n  cart = 'cart',\n  hut = 'hut',\n  lodge = 'lodge',\n  trading_post = 'trading_post',\n  tannery = 'tannery',\n  smokehouse = 'smokehouse',\n  workshop = 'workshop',\n  steelworks = 'steelworks',\n  armoury = 'armoury',\n}\n\nexport type CombatLootItem = {\n  min: number;\n  max: number;\n  chance: number;\n};\n\nexport type SceneButton = {\n  text: string;\n  cooldown?: number;\n  nextScene?: { [key: string]: string } | string;\n  notification?: string;\n  cost?: {\n    [key in StoreCategory]?: number;\n  };\n  reward?: {\n    [key in StoreCategory]?: number;\n  };\n  onClick?: (engine: Engine) => void;\n  available?: (state: GameState, engine: Engine) => boolean;\n  onChoose?: (engine: Engine) => void;\n};\n\nexport type SceneReward = {\n  [key in StoreCategory]?: number;\n};\n\nexport type NormalScene = {\n  [key: string]: any;\n  text: string[];\n  buttons: {\n    [key: string]: SceneButton;\n  };\n  notification?: string;\n  blink?: boolean;\n  reward?: SceneReward;\n  onLoad?: (engine: Engine) => void;\n  audio?: any;\n};\n\nexport type CombatScene = {\n  [key: string]: any;\n  combat: boolean;\n  enemy: string;\n  chara: string;\n  damage: number;\n  hit: number;\n  attackDelay: number;\n  health: number;\n  loot: {\n    [key in StoreCategory]?: CombatLootItem;\n  };\n  notification: string;\n  plural?: boolean;\n  enemyName?: string;\n  deathMessage?: string;\n  ranged?: boolean;\n};\n\nexport type Scene = NormalScene | CombatScene;\n\nexport type Event = {\n  title: string;\n  isAvailable?: (state: GameState, engine: Engine) => boolean;\n  scenes: { [key: string]: Scene };\n  id?: string;\n};\n\nexport type Perk = {\n  name: string;\n  desc: string;\n  notify: string;\n};\n\nexport enum GameSpace {\n  Room = 'Room',\n  Path = 'Path',\n  Outside = 'Outside',\n  World = 'World',\n  Ship = 'Ship',\n  Space = 'Space',\n}\n\nexport enum PerkCategory {\n  boxer = 'boxer',\n  martial_artist = 'martial_artist',\n  unarmed_master = 'unarmed_master',\n  barbarian = 'barbarian',\n  slow_metabolism = 'slow_metabolism',\n  desert_rat = 'desert_rat',\n  evasive = 'evasive',\n  precise = 'precise',\n  scout = 'scout',\n  stealthy = 'stealthy',\n  gastronome = 'gastronome',\n}\n\nexport const Perks: { [key in PerkCategory]: Perk } = {\n  [PerkCategory.boxer]: {\n    name: translate('boxer'),\n    desc: translate('punches do more damage'),\n    notify: translate('learned to throw punches with purpose'),\n  },\n  [PerkCategory.martial_artist]: {\n    name: translate('martial artist'),\n    desc: translate('punches do even more damage.'),\n    notify: translate('learned to fight quite effectively without weapons'),\n  },\n  [PerkCategory.unarmed_master]: {\n    /// TRANSLATORS : master of unarmed combat\n    name: translate('unarmed master'),\n    desc: translate('punch twice as fast, and with even more force'),\n    notify: translate('learned to strike faster without weapons'),\n  },\n  [PerkCategory.barbarian]: {\n    name: translate('barbarian'),\n    desc: translate('melee weapons deal more damage'),\n    notify: translate('learned to swing weapons with force'),\n  },\n  [PerkCategory.slow_metabolism]: {\n    name: translate('slow metabolism'),\n    desc: translate('go twice as far without eating'),\n    notify: translate('learned how to ignore the hunger'),\n  },\n  [PerkCategory.desert_rat]: {\n    name: translate('desert rat'),\n    desc: translate('go twice as far without drinking'),\n    notify: translate('learned to love the dry air'),\n  },\n  [PerkCategory.evasive]: {\n    name: translate('evasive'),\n    desc: translate('dodge attacks more effectively'),\n    notify: translate(\"learned to be where they're not\"),\n  },\n  [PerkCategory.precise]: {\n    name: translate('precise'),\n    desc: translate('land blows more often'),\n    notify: translate('learned to predict their movement'),\n  },\n  [PerkCategory.scout]: {\n    name: translate('scout'),\n    desc: translate('see farther'),\n    notify: translate('learned to look ahead'),\n  },\n  [PerkCategory.stealthy]: {\n    name: translate('stealthy'),\n    desc: translate('better avoid conflict in the wild'),\n    notify: translate('learned how not to be seen'),\n  },\n  [PerkCategory.gastronome]: {\n    name: translate('gastronome'),\n    desc: translate('restore more health when eating'),\n    notify: translate('learned to make the most of food'),\n  },\n};\n\nexport enum Building {\n  trap = 'trap',\n  cart = 'cart',\n  hut = 'hut',\n  lodge = 'lodge',\n  trading_post = 'trading_post',\n  tannery = 'tannery',\n  smokehouse = 'smokehouse',\n  workshop = 'workshop',\n  steelworks = 'steelworks',\n  armoury = 'armoury',\n  sulphur_mine = 'sulphur_mine',\n  iron_mine = 'iron_mine',\n  coal_mine = 'coal_mine',\n}\n\nexport enum Craftable {\n  trap = 'trap',\n  cart = 'cart',\n  hut = 'hut',\n  lodge = 'lodge',\n  trading_post = 'trading_post',\n  tannery = 'tannery',\n  smokehouse = 'smokehouse',\n  workshop = 'workshop',\n  steelworks = 'steelworks',\n  armoury = 'armoury',\n  torch = 'torch',\n  waterskin = 'waterskin',\n  cask = 'cask',\n  water_tank = 'water_tank',\n  bone_spear = 'bone_spear',\n  rucksack = 'rucksack',\n  wagon = 'wagon',\n  convoy = 'convoy',\n  l_armou = 'l_armou',\n  i_armour = 'i_armour',\n  s_armour = 's_armour',\n  iron_sword = 'iron_sword',\n  steel_sword = 'steel_sword',\n  rifle = 'rifle',\n}\n\nenum NonCraftable {\n  medicine = 'medicine',\n  charm = 'charm',\n  bayonet = 'bayonet',\n  bolas = 'bolas',\n  grenade = 'grenade',\n  bullets = 'bullets',\n  cured_meat = 'cured_meat',\n  laser_rifle = 'laser_rifle',\n  energy_cell = 'energy_cell',\n}\n\nexport type Carryable = Craftable | NonCraftable;\n\nexport enum WorkerType {\n  sulphur_miner = 'sulphur_miner',\n  hunter = 'hunter',\n  trapper = 'trapper',\n  charcutier = 'charcutier',\n  iron_miner = 'iron_miner',\n  coal_miner = 'coal_miner',\n  armourer = 'armourer',\n  tanner = 'tanner',\n  steelworker = 'steelworker',\n}\n\nexport const incomes = {\n  gatherer: {\n    name: translate('gatherer'),\n    delay: 10,\n    stores: {\n      wood: 1,\n    },\n  },\n  hunter: {\n    name: translate('hunter'),\n    delay: 10,\n    stores: {\n      fur: 0.5,\n      meat: 0.5,\n    },\n  },\n  trapper: {\n    name: translate('trapper'),\n    delay: 10,\n    stores: {\n      meat: -1,\n      bait: 1,\n    },\n  },\n  tanner: {\n    name: translate('tanner'),\n    delay: 10,\n    stores: {\n      fur: -5,\n      leather: 1,\n    },\n  },\n  charcutier: {\n    name: translate('charcutier'),\n    delay: 10,\n    stores: {\n      meat: -5,\n      wood: -5,\n      cured_meat: 1,\n    },\n  },\n  iron_miner: {\n    name: translate('iron miner'),\n    delay: 10,\n    stores: {\n      cured_meat: -1,\n      iron: 1,\n    },\n  },\n  coal_miner: {\n    name: translate('coal miner'),\n    delay: 10,\n    stores: {\n      cured_meat: -1,\n      coal: 1,\n    },\n  },\n  sulphur_miner: {\n    name: translate('sulphur miner'),\n    delay: 10,\n    stores: {\n      cured_meat: -1,\n      sulphur: 1,\n    },\n  },\n  steelworker: {\n    name: translate('steelworker'),\n    delay: 10,\n    stores: {\n      iron: -1,\n      coal: -1,\n      steel: 1,\n    },\n  },\n  armourer: {\n    name: translate('armourer'),\n    delay: 10,\n    stores: {\n      steel: -1,\n      sulphur: -1,\n      bullets: 1,\n    },\n  },\n};\n\nexport type incomeType = keyof typeof incomes;\n\nexport type FireStatus = typeof config.Room.FireStatus[keyof typeof config.Room.FireStatus];\nexport type TemperatureStatus = typeof config.Room.TemperatureStatus[keyof typeof config.Room.TemperatureStatus];\n\nexport type Income = {\n  delay: number;\n  stores: {\n    [key in StoreCategory]: number;\n  };\n  timeLeft?: number;\n};\n\nexport type GameItem = {\n  name: string;\n  type?: string;\n  desc?: string;\n  craft?: {\n    maximum?: number;\n    availableMsg?: string;\n    buildMsg?: string;\n    maxMsg?: string;\n    type: string;\n    cost: (state: any) => { [key: string]: number };\n  };\n  trade?: {\n    type: string;\n    maximum?: number;\n    tradeMsg?: string;\n    cost: () => { [key: string]: number };\n  };\n  weapon?: {\n    verb: string;\n    type: string;\n    damage: number | string;\n    cooldown: number;\n    cost?: { [key: string]: number };\n  };\n};","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = GeneratorFunctionPrototype;\n  define(Gp, \"constructor\", GeneratorFunctionPrototype);\n  define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction);\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  });\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  define(Gp, iteratorSymbol, function() {\n    return this;\n  });\n\n  define(Gp, \"toString\", function() {\n    return \"[object Generator]\";\n  });\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, in modern engines\n  // we can explicitly access globalThis. In older engines we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","export default function translate(text: string) {\n    return text;\n}\n\n[\n    translate('saved.'),\n    translate('wood'),\n    translate('builder'),\n    translate('teeth'),\n    translate('meat'),\n    translate('fur'),\n    translate('alien alloy'),\n    translate('bullets'),\n    translate('charm'),\n    translate('leather'),\n    translate('iron'),\n    translate('steel'),\n    translate('coal'),\n    translate('sulphur'),\n    translate('energy cell'),\n    translate('torch'),\n    translate('medicine'),\n    translate('hunter'),\n    translate('trapper'),\n    translate('tanner'),\n    translate('grenade'),\n    translate('bolas'),\n    translate('bayonet'),\n    translate('charcutier'),\n    translate('iron miner'),\n    translate('iron mine'),\n    translate('coal miner'),\n    translate('coal mine'),\n    translate('sulphur miner'),\n    translate('sulphur mine'),\n    translate('armourer'),\n    translate('steelworker'),\n    translate('bait'),\n    translate('cured meat'),\n    translate('scales'),\n    translate('compass'),\n    translate('laser rifle'),\n    translate('gatherer'),\n    translate('cloth'),\n    translate('scales'),\n    translate('cured meat'),\n    translate('thieves'),\n    translate('baited trap'),\n    translate('east'),\n    translate('west'),\n    translate('north'),\n    translate('south'),\n    translate('northeast'),\n    translate('northwest'),\n    translate('southeast'),\n    translate('southwest'),\n    translate('forest'),\n    translate('village'),\n    translate('A Lonely Hut'),\n    translate('A Tiny Village'),\n    translate('A Modest Village'),\n    translate('A Large Village'),\n    translate('A Raucous Village'),\n    translate('miss'),\n    translate('stunned'),\n    translate('loot'),\n    translate('bag'),\n    translate('Buildings'),\n    translate('income')\n];","import translate from './translate';\nimport { StoreCategory, GameItem } from './type';\n\nconst MEDS_HEAL = 20;\nconst MEAT_HEAL = 8;\n\nconst items = {\n  trap: {\n    name: translate('trap'),\n    type: 'building',\n    craft: {\n      maximum: 10,\n      availableMsg: translate('builder says she can make traps to catch any creatures might still be alive out there'),\n      buildMsg: translate('more traps to catch more creatures'),\n      maxMsg: translate(\"more traps won't help now\"),\n      type: 'building',\n      cost: function(state: any) {\n        const n = state.game.buildings.trap || 0;\n        return {\n          wood: 10 + n * 10,\n        };\n      },\n    },\n  },\n  cart: {\n    name: translate('cart'),\n    type: 'building',\n    craft: {\n      maximum: 1,\n      availableMsg: translate('builder says she can make a cart for carrying wood'),\n      buildMsg: translate('the rickety cart will carry more wood from the forest'),\n      type: 'building',\n      cost: function() {\n        return {\n          wood: 30,\n        };\n      },\n    },\n  },\n  hut: {\n    name: translate('hut'),\n    type: 'building',\n    craft: {\n      maximum: 20,\n      availableMsg: translate(\"builder says there are more wanderers. says they'll work, too.\"),\n      buildMsg: translate('builder puts up a hut, out in the forest. says word will get around.'),\n      maxMsg: translate('no more room for huts.'),\n      type: 'building',\n      cost: function(state: any) {\n        const n = state.game.buildings.hut || 0;\n        return {\n          wood: 100 + n * 50,\n        };\n      },\n    },\n  },\n  lodge: {\n    name: translate('lodge'),\n    type: 'building',\n    craft: {\n      maximum: 1,\n      availableMsg: translate('villagers could help hunt, given the means'),\n      buildMsg: translate('the hunting lodge stands in the forest, a ways out of town'),\n      type: 'building',\n      cost: function() {\n        return {\n          wood: 200,\n          fur: 10,\n          meat: 5,\n        };\n      },\n    },\n  },\n  trading_post: {\n    name: translate('trading post'),\n    type: 'building',\n    craft: {\n      maximum: 1,\n      availableMsg: translate('a trading post would make commerce easier'),\n      buildMsg: translate('now the nomads have a place to set up shop, they might stick around a while'),\n      type: 'building',\n      cost: function() {\n        return {\n          wood: 400,\n          fur: 100,\n        };\n      },\n    },\n  },\n  tannery: {\n    name: translate('tannery'),\n    type: 'building',\n    craft: {\n      maximum: 1,\n      availableMsg: translate('builder says leather could be useful. says the villagers could make it.'),\n      buildMsg: translate('tannery goes up quick, on the edge of the village'),\n      type: 'building',\n      cost: function() {\n        return {\n          wood: 500,\n          fur: 50,\n        };\n      },\n    },\n  },\n  smokehouse: {\n    name: translate('smokehouse'),\n    type: 'building',\n    craft: {\n      maximum: 1,\n      availableMsg: translate(\"should cure the meat, or it'll spoil. builder says she can fix something up.\"),\n      buildMsg: translate('builder finishes the smokehouse. she looks hungry.'),\n      type: 'building',\n      cost: function() {\n        return {\n          wood: 600,\n          meat: 50,\n        };\n      },\n    },\n  },\n  workshop: {\n    name: translate('workshop'),\n    type: 'building',\n    craft: {\n      maximum: 1,\n      availableMsg: translate('builder says she could make finer things, if she had the tools'),\n      buildMsg: translate(\"workshop's finally ready. builder's excited to get to it\"),\n      type: 'building',\n      cost: function() {\n        return {\n          wood: 800,\n          leather: 100,\n          scales: 10,\n        };\n      },\n    },\n  },\n  steelworks: {\n    name: translate('steelworks'),\n    type: 'building',\n    craft: {\n      maximum: 1,\n      availableMsg: translate('builder says the villagers could make steel, given the tools'),\n      buildMsg: translate('a haze falls over the village as the steelworks fires up'),\n      type: 'building',\n      cost: function() {\n        return {\n          wood: 1500,\n          iron: 100,\n          coal: 100,\n        };\n      },\n    },\n  },\n  armoury: {\n    name: translate('armoury'),\n    type: 'building',\n    craft: {\n      maximum: 1,\n      availableMsg: translate(\"builder says it'd be useful to have a steady source of bullets\"),\n      buildMsg: translate(\"armoury's done, welcoming back the weapons of the past.\"),\n      type: 'building',\n      cost: function() {\n        return {\n          wood: 3000,\n          steel: 100,\n          sulphur: 50,\n        };\n      },\n    },\n  },\n  torch: {\n    name: translate('torch'),\n    type: 'tool',\n    craft: {\n      type: 'tool',\n      buildMsg: translate('a torch to keep the dark away'),\n      cost: function() {\n        return {\n          wood: 1,\n          cloth: 1,\n        };\n      },\n    },\n  },\n  waterskin: {\n    name: translate('waterskin'),\n    type: 'upgrade',\n    craft: {\n      type: 'upgrade',\n      maximum: 1,\n      buildMsg: translate(\"this waterskin'll hold a bit of water, at least\"),\n      cost: function() {\n        return {\n          leather: 50,\n        };\n      },\n    },\n  },\n  cask: {\n    name: translate('cask'),\n    type: 'upgrade',\n    craft: {\n      type: 'upgrade',\n      maximum: 1,\n      buildMsg: translate('the cask holds enough water for longer expeditions'),\n      cost: function() {\n        return {\n          leather: 100,\n          iron: 20,\n        };\n      },\n    },\n  },\n  water_tank: {\n    name: translate('water tank'),\n    type: 'upgrade',\n    craft: {\n      type: 'upgrade',\n      maximum: 1,\n      buildMsg: translate('never go thirsty again'),\n      cost: function() {\n        return {\n          iron: 100,\n          steel: 50,\n        };\n      },\n    },\n  },\n  bone_spear: {\n    name: translate('bone spear'),\n    type: 'weapon',\n    craft: {\n      type: 'weapon',\n      buildMsg: translate(\"this spear's not elegant, but it's pretty good at stabbing\"),\n      cost: function() {\n        return {\n          wood: 100,\n          teeth: 5,\n        };\n      },\n    },\n    weapon: {\n      verb: translate('stab'),\n      type: 'melee',\n      damage: 2,\n      cooldown: 2,\n    },\n  },\n  rucksack: {\n    name: translate('rucksack'),\n    type: 'upgrade',\n    craft: {\n      type: 'upgrade',\n      maximum: 1,\n      buildMsg: translate('carrying more means longer expeditions to the wilds'),\n      cost: function() {\n        return {\n          leather: 200,\n        };\n      },\n    },\n  },\n  wagon: {\n    name: translate('wagon'),\n    type: 'upgrade',\n    craft: {\n      type: 'upgrade',\n      maximum: 1,\n      buildMsg: translate('the wagon can carry a lot of supplies'),\n      cost: function() {\n        return {\n          wood: 500,\n          iron: 100,\n        };\n      },\n    },\n  },\n  convoy: {\n    name: translate('convoy'),\n    type: 'upgrade',\n    craft: {\n      type: 'upgrade',\n      maximum: 1,\n      buildMsg: translate('the convoy can haul mostly everything'),\n      cost: function() {\n        return {\n          wood: 1000,\n          iron: 200,\n          steel: 100,\n        };\n      },\n    },\n  },\n  l_armour: {\n    name: translate('l armour'),\n    type: 'upgrade',\n    craft: {\n      type: 'upgrade',\n      maximum: 1,\n      buildMsg: translate(\"leather's not strong. better than rags, though.\"),\n      cost: function() {\n        return {\n          leather: 200,\n          scales: 20,\n        };\n      },\n    },\n  },\n  i_armour: {\n    name: translate('i armour'),\n    type: 'upgrade',\n    craft: {\n      type: 'upgrade',\n      maximum: 1,\n      buildMsg: translate(\"iron's stronger than leather\"),\n      cost: function() {\n        return {\n          leather: 200,\n          iron: 100,\n        };\n      },\n    },\n  },\n  s_armour: {\n    name: translate('s armour'),\n    type: 'upgrade',\n    craft: {\n      type: 'upgrade',\n      maximum: 1,\n      buildMsg: translate(\"steel's stronger than iron\"),\n      cost: function() {\n        return {\n          leather: 200,\n          steel: 100,\n        };\n      },\n    },\n  },\n  iron_sword: {\n    name: translate('iron sword'),\n    type: 'weapon',\n    craft: {\n      type: 'weapon',\n      buildMsg: translate('sword is sharp. good protection out in the wilds.'),\n      cost: function() {\n        return {\n          wood: 200,\n          leather: 50,\n          iron: 20,\n        };\n      },\n    },\n    weapon: {\n      verb: translate('swing'),\n      type: 'melee',\n      damage: 4,\n      cooldown: 2,\n    },\n  },\n  steel_sword: {\n    name: translate('steel sword'),\n    type: 'weapon',\n    craft: {\n      type: 'weapon',\n      buildMsg: translate('the steel is strong, and the blade true.'),\n      cost: function() {\n        return {\n          wood: 500,\n          leather: 100,\n          steel: 20,\n        };\n      },\n    },\n    weapon: {\n      verb: translate('slash'),\n      type: 'melee',\n      damage: 6,\n      cooldown: 2,\n    },\n  },\n  rifle: {\n    name: translate('rifle'),\n    type: 'weapon',\n    craft: {\n      type: 'weapon',\n      buildMsg: translate('black powder and bullets, like the old days.'),\n      cost: function() {\n        return {\n          wood: 200,\n          steel: 50,\n          sulphur: 50,\n        };\n      },\n    },\n    weapon: {\n      verb: translate('shoot'),\n      type: 'ranged',\n      damage: 5,\n      cooldown: 1,\n      cost: { bullets: 1 },\n    },\n  },\n  cured_meat: {\n    name: translate('cured meat'),\n    type: 'tool',\n    desc:\n      translate('restores') +\n      ' ' +\n      MEAT_HEAL +\n      ' ' +\n      translate('hp'),\n  },\n  bullets: {\n    name: translate('bullets'),\n    type: 'tool',\n    desc: translate('use with rifle'),\n    trade: {\n      type: 'good',\n      cost: function() {\n        return {\n          scales: 10,\n        };\n      },\n    },\n  },\n  grenade: {\n    name: translate('grenade'),\n    type: 'weapon',\n    weapon: {\n      verb: translate('lob'),\n      type: 'ranged',\n      damage: 15,\n      cooldown: 5,\n      cost: { grenade: 1 },\n    },\n    trade: {\n      type: 'weapon',\n      cost: function() {\n        return {\n          scales: 100,\n          teeth: 50,\n        };\n      },\n    },\n  },\n  bolas: {\n    name: translate('bolas'),\n    type: 'weapon',\n    weapon: {\n      verb: translate('tangle'),\n      type: 'ranged',\n      damage: 'stun',\n      cooldown: 15,\n      cost: { bolas: 1 },\n    },\n    trade: {\n      type: 'weapon',\n      cost: function() {\n        return {\n          teeth: 10,\n        };\n      },\n    },\n  },\n  laser_rifle: {\n    name: translate('laser rifle'),\n    type: 'weapon',\n    weapon: {\n      verb: translate('blast'),\n      type: 'ranged',\n      damage: 8,\n      cooldown: 1,\n      cost: { energy_cell: 1 },\n    },\n  },\n  energy_cell: {\n    name: translate('energy cell'),\n    type: 'tool',\n    desc: translate('emits a soft red glow'),\n    trade: {\n      type: 'good',\n      cost: function() {\n        return {\n          scales: 10,\n          teeth: 10,\n        };\n      },\n    },\n  },\n  bayonet: {\n    name: translate('bayonet'),\n    type: 'weapon',\n    weapon: {\n      verb: translate('thrust'),\n      type: 'melee',\n      damage: 8,\n      cooldown: 2,\n    },\n    trade: {\n      type: 'weapon',\n      cost: function() {\n        return {\n          scales: 500,\n          teeth: 250,\n        };\n      },\n    },\n  },\n  charm: { name: translate('charm'), type: 'tool' },\n  medicine: {\n    name: translate('medicine'),\n    type: 'tool',\n    desc:\n      translate('restores') +\n      ' ' +\n      MEDS_HEAL +\n      ' ' +\n      translate('hp'),\n    trade: {\n      type: 'good',\n      cost: function() {\n        return {\n          scales: 50,\n          teeth: 30,\n        };\n      },\n    },\n  },\n  wood: {\n    name: translate('wood'),\n    type: 'resouce',\n  },\n  fur: {\n    name: translate('fur'),\n    type: 'resouce',\n  },\n  meat: {\n    name: translate('meat'),\n    type: 'resouce',\n  },\n  iron: {\n    name: translate('iron'),\n    type: 'resouce',\n    trade: {\n      type: 'good',\n      cost: function() {\n        return {\n          fur: 150,\n          scales: 50,\n        };\n      },\n    },\n  },\n  coal: {\n    name: translate('coal'),\n    type: 'resouce',\n    trade: {\n      type: 'good',\n      cost: function() {\n        return {\n          fur: 200,\n          teeth: 50,\n        };\n      },\n    },\n  },\n  sulphur: {\n    name: translate('sulphur'),\n    type: 'resouce',\n  },\n  steel: {\n    name: translate('steel'),\n    type: 'resouce',\n    trade: {\n      type: 'good',\n      cost: function() {\n        return {\n          fur: 300,\n          scales: 50,\n          teeth: 50,\n        };\n      },\n    },\n  },\n  scales: {\n    name: translate('scales'),\n    type: 'resouce',\n    trade: {\n      type: 'good',\n      cost: function() {\n        return { fur: 150 };\n      },\n    },\n  },\n  teeth: {\n    name: translate('teeth'),\n    type: 'resouce',\n    trade: {\n      type: 'good',\n      cost: function() {\n        return { fur: 300 };\n      },\n    },\n  },\n  leather: {\n    name: translate('leather'),\n    type: 'resouce',\n  },\n  bait: {\n    name: translate('bait'),\n    type: 'resouce',\n  },\n  cloth: {\n    name: translate('cloth'),\n    type: 'resouce',\n  },\n  alien_alloy: {\n    name: translate('alien alloy'),\n    type: 'resouce',\n    trade: {\n      type: 'good',\n      cost: function() {\n        return {\n          fur: 1500,\n          scales: 750,\n          teeth: 300,\n        };\n      },\n    },\n  },\n  compass: {\n    name: translate('compass'),\n    type: 'prop',\n    trade: {\n      type: 'special',\n      maximum: 1,\n      cost: function() {\n        return {\n          fur: 400,\n          scales: 20,\n          teeth: 10,\n        };\n      },\n    },\n  },\n  fists: {\n    name: translate('fists'),\n    type: 'weapon',\n    weapon: {\n      verb: translate('punch'),\n      type: 'unarmed',\n      damage: 1,\n      cooldown: 2\n    }\n  }\n} as { [key: string]: GameItem };\n\nexport enum CraftableCategory {\n  trap = 'trap',\n  cart = 'cart',\n  hut = 'hut',\n  lodge = 'lodge',\n  trading_post = 'trading_post',\n  tannery = 'tannery',\n  smokehouse = 'smokehouse',\n  workshop = 'workshop',\n  steelworks = 'steelworks',\n  armoury = 'armoury',\n  torch = 'torch',\n  waterskin = 'waterskin',\n  cask = 'cask',\n  water_tank = 'water_tank',\n  bone_spear = 'bone_spear',\n  rucksack = 'rucksack',\n  wagon = 'wagon',\n  convoy = 'convoy',\n  l_armour = 'l_armour',\n  i_armour = 'i_armour',\n  s_armour = 's_armour',\n  iron_sword = 'iron_sword',\n  steel_sword = 'steel_sword',\n  rifle = 'rifle',\n}\nexport enum TradeCategory {\n  scales = 'scales',\n  teeth = 'teeth',\n  iron = 'iron',\n  coal = 'coal',\n  steel = 'steel',\n  medicine = 'medicine',\n  bullets = 'bullets',\n  energy_cell = 'energy_cell',\n  bolas = 'bolas',\n  grenade = 'grenade',\n  bayonet = 'bayonet',\n  alien_alloy = 'alien_alloy',\n  compass = 'compass',\n}\nexport enum NonCraftableCategory {\n  cured_meat = 'cured_meat',\n  bullets = 'bullets',\n  grenade = 'grenade',\n  bolas = 'bolas',\n  laser_rifle = 'laser_rifle',\n  energy_cell = 'energy_cell',\n  bayonet = 'bayonet',\n  charm = 'charm',\n  medicine = 'medicine',\n}\nexport enum WeaponCategory {\n  fists = 'fists',\n  bone_spear = 'bone_spear',\n  iron_sword = 'iron_sword',\n  steel_sword = 'steel_sword',\n  bayonet = 'bayonet',\n  rifle = 'rifle',\n  laser_rifle = 'laser_rifle',\n  grenade = 'grenade',\n  bolas = 'bolas',\n}\n\nconst Outfits = Object.keys({ ...NonCraftableCategory, ...CraftableCategory }).filter((key) => {\n  const item = items[key];\n  return item.type === 'tool' || item.type === 'weapon';\n});\n\nconst World_RADIUS = 30;\n\n\nconst WorldTile = {\n  VILLAGE: 'A',\n  IRON_MINE: 'I',\n  COAL_MINE: 'C',\n  SULPHUR_MINE: 'S',\n  FOREST: ';',\n  FIELD: ',',\n  BARRENS: '.',\n  ROAD: '#',\n  HOUSE: 'H',\n  CAVE: 'V',\n  TOWN: 'O',\n  CITY: 'Y',\n  OUTPOST: 'P',\n  SHIP: 'W',\n  BOREHOLE: 'B',\n  BATTLEFIELD: 'F',\n  SWAMP: 'M',\n  CACHE: 'U',\n};\n\n\nexport default {\n  items,\n  Engine: {\n    VERSION: 1.3,\n    MAX_STORE: 99999999999999,\n    SAVE_DISPLAY: 30 * 1000,\n  },\n  World: {\n    name: 'World',\n    RADIUS: World_RADIUS,\n    VILLAGE_POS: [30, 30],\n    TILE: WorldTile,\n    TILE_PROBS: {\n      [WorldTile.FOREST]: 0.15,\n      [WorldTile.FIELD]: 0.35,\n      [WorldTile.BARRENS]: 0.5,\n    },\n    LANDMARKS: {\n      [WorldTile.OUTPOST]: {\n        num: 0,\n        minRadius: 0,\n        maxRadius: 0,\n        scene: 'outpost',\n        label: translate('An&nbsp;Outpost'),\n      },\n      [WorldTile.IRON_MINE]: {\n        num: 1,\n        minRadius: 5,\n        maxRadius: 5,\n        scene: 'ironmine',\n        label: translate('Iron&nbsp;Mine'),\n      },\n      [WorldTile.COAL_MINE]: {\n        num: 1,\n        minRadius: 10,\n        maxRadius: 10,\n        scene: 'coalmine',\n        label: translate('Coal&nbsp;Mine'),\n      },\n      [WorldTile.SULPHUR_MINE]: {\n        num: 1,\n        minRadius: 20,\n        maxRadius: 20,\n        scene: 'sulphurmine',\n        label: translate('Sulphur&nbsp;Mine'),\n      },\n      [WorldTile.HOUSE]: {\n        num: 10,\n        minRadius: 0,\n        maxRadius: World_RADIUS * 1.5,\n        scene: 'house',\n        label: translate('An&nbsp;Old&nbsp;House'),\n      },\n      [WorldTile.CAVE]: {\n        num: 5,\n        minRadius: 3,\n        maxRadius: 10,\n        scene: 'cave',\n        label: translate('A&nbsp;Damp&nbsp;Cave'),\n      },\n      [WorldTile.TOWN]: {\n        num: 10,\n        minRadius: 10,\n        maxRadius: 20,\n        scene: 'town',\n        label: translate('An&nbsp;Abandoned&nbsp;Town'),\n      },\n      [WorldTile.CITY]: {\n        num: 20,\n        minRadius: 20,\n        maxRadius: World_RADIUS * 1.5,\n        scene: 'city',\n        label: translate('A&nbsp;Ruined&nbsp;City'),\n      },\n      [WorldTile.SHIP]: {\n        num: 1,\n        minRadius: 28,\n        maxRadius: 28,\n        scene: 'ship',\n        label: translate('A&nbsp;Crashed&nbsp;Starship'),\n      },\n      [WorldTile.BOREHOLE]: {\n        num: 10,\n        minRadius: 15,\n        maxRadius: World_RADIUS * 1.5,\n        scene: 'borehole',\n        label: translate('A&nbsp;Borehole'),\n      },\n      [WorldTile.BATTLEFIELD]: {\n        num: 5,\n        minRadius: 18,\n        maxRadius: World_RADIUS * 1.5,\n        scene: 'battlefield',\n        label: translate('A&nbsp;Battlefield'),\n      },\n      [WorldTile.SWAMP]: {\n        num: 1,\n        minRadius: 15,\n        maxRadius: World_RADIUS * 1.5,\n        scene: 'swamp',\n        label: translate('A&nbsp;Murky&nbsp;Swamp'),\n      },\n    },\n    STICKINESS: 0.5, // 0 <= x <= 1\n    LIGHT_RADIUS: 2,\n    BASE_WATER: 10,\n    MOVES_PER_FOOD: 2,\n    MOVES_PER_WATER: 1,\n    DEATH_COOLDOWN: 120,\n    FIGHT_CHANCE: 0.2,\n    BASE_HEALTH: 10,\n    BASE_HIT_CHANCE: 0.8,\n    MEAT_HEAL: MEAT_HEAL,\n    MEDS_HEAL: MEDS_HEAL,\n    FIGHT_DELAY: 3, // At least three moves between fights\n    NORTH: [0, -1],\n    SOUTH: [0, 1],\n    WEST: [-1, 0],\n    EAST: [1, 0],\n  },\n  Room: {\n    name: \"Room\",\n    FIRE_COOL_DELAY: 5 * 60 * 1000, // time after a stoke before the fire cools\n    ROOM_WARM_DELAY: 30 * 1000, // time between room temperature updates\n    BUILDER_STATE_DELAY: 0.5 * 60 * 1000, // time between builder state updates\n    STOKE_COOLDOWN: 10, // cooldown to stoke the fire\n    NEED_WOOD_DELAY: 15 * 1000, // from when the stranger shows up, to when you need wood,\n    MiscItems: ['laser_rifle'],\n    FireStatus: {\n      Dead: {\n        status: 'Dead',\n        value: 0,\n        text: translate('dead'),\n      },\n      Smoldering: {\n        status: 'Smoldering',\n        value: 1,\n        text: translate('smoldering'),\n      },\n      Flickering: {\n        status: 'Flickering',\n        value: 2,\n        text: translate('flickering'),\n      },\n      Burning: {\n        status: 'Burning',\n        value: 3,\n        text: translate('burning'),\n      },\n      Roaring: {\n        status: 'Roaring',\n        value: 4,\n        text: translate('roaring'),\n      },\n    },\n    TemperatureStatus: {\n      Freezing: {\n        value: 0,\n        text: translate('freezing'),\n      },\n      Cold: {\n        value: 1,\n        text: translate('cold'),\n      },\n      Mild: {\n        value: 2,\n        text: translate('mild'),\n      },\n      Warm: {\n        value: 3,\n        text: translate('warm'),\n      },\n      Hot: {\n        value: 4,\n        text: translate('hot'),\n      },\n    },\n  },\n  Event: {\n    EVENT_TIME_RANGE: [3, 6], // range, in minutes\n    PANEL_FADE: 200,\n    FIGHT_SPEED: 100,\n    EAT_COOLDOWN: 5,\n    MEDS_COOLDOWN: 7,\n    LEAVE_COOLDOWN: 1,\n    STUN_DURATION: 4000,\n  },\n  Outside: {\n    name: translate('Outside'),\n    STORES_OFFSET: 0,\n    GATHER_DELAY: 60,\n    TRAPS_DELAY: 90,\n    POP_DELAY: [0.5, 3],\n    HUT_ROOM: 4,\n    INCOME: {\n      gatherer: {\n        name: translate('gatherer'),\n        delay: 10,\n        stores: {\n          [StoreCategory.wood]: 1,\n        },\n      },\n      hunter: {\n        name: translate('hunter'),\n        delay: 10,\n        stores: {\n          [StoreCategory.fur]: 0.5,\n          [StoreCategory.meat]: 0.5,\n        },\n      },\n      trapper: {\n        name: translate('trapper'),\n        delay: 10,\n        stores: {\n          [StoreCategory.meat]: -1,\n          [StoreCategory.bait]: 1,\n        },\n      },\n      tanner: {\n        name: translate('tanner'),\n        delay: 10,\n        stores: {\n          [StoreCategory.fur]: -5,\n          [StoreCategory.leather]: 1,\n        },\n      },\n      charcutier: {\n        name: translate('charcutier'),\n        delay: 10,\n        stores: {\n          [StoreCategory.meat]: -5,\n          [StoreCategory.wood]: -5,\n          [StoreCategory.cured_meat]: 1,\n        },\n      },\n      iron_miner: {\n        name: translate('iron miner'),\n        delay: 10,\n        stores: {\n          [StoreCategory.cured_meat]: -1,\n          [StoreCategory.iron]: 1,\n        },\n      },\n      coal_miner: {\n        name: translate('coal miner'),\n        delay: 10,\n        stores: {\n          [StoreCategory.cured_meat]: -1,\n          [StoreCategory.coal]: 1,\n        },\n      },\n      sulphur_miner: {\n        name: translate('sulphur miner'),\n        delay: 10,\n        stores: {\n          [StoreCategory.cured_meat]: -1,\n          [StoreCategory.sulphur]: 1,\n        },\n      },\n      steelworker: {\n        name: translate('steelworker'),\n        delay: 10,\n        stores: {\n          [StoreCategory.iron]: -1,\n          [StoreCategory.coal]: -1,\n          [StoreCategory.steel]: 1,\n        },\n      },\n      armourer: {\n        name: translate('armourer'),\n        delay: 10,\n        stores: {\n          [StoreCategory.steel]: -1,\n          [StoreCategory.sulphur]: -1,\n          [StoreCategory.bullets]: 1,\n        },\n      },\n    },\n    TrapDrops: [\n      {\n        rollUnder: 0.5,\n        name: 'fur',\n        message: translate('scraps of fur'),\n      },\n      {\n        rollUnder: 0.75,\n        name: 'meat',\n        message: translate('bits of meat'),\n      },\n      {\n        rollUnder: 0.85,\n        name: 'scales',\n        message: translate('strange scales'),\n      },\n      {\n        rollUnder: 0.93,\n        name: 'teeth',\n        message: translate('scattered teeth'),\n      },\n      {\n        rollUnder: 0.995,\n        name: 'cloth',\n        message: translate('tattered cloth'),\n      },\n      {\n        rollUnder: 1.0,\n        name: 'charm',\n        message: translate('a crudely made charm'),\n      },\n    ],\n  },\n  Path: {\n    DEFAULT_BAG_SPACE: 10,\n    STORES_OFFSET: 0,\n    // Everything not in this list weighs 1\n    Weight: {\n      bone_spear: 2,\n      iron_sword: 3,\n      steel_sword: 5,\n      rifle: 5,\n      bullets: 0.1,\n      energy_cell: 0.2,\n      laser_rifle: 5,\n      bolas: 0.5,\n    } as { [key in StoreCategory]?: number },\n    name: translate('A Dusty Path'),\n    Outfit: Outfits,\n  },\n  Ship: {\n    LIFTOFF_COOLDOWN: 120,\n    ALLOY_PER_HULL: 1,\n    ALLOY_PER_THRUSTER: 1,\n    BASE_HULL: 0,\n    BASE_THRUSTERS: 1,\n    name: translate('Ship'),\n  },\n  Space: {\n    SHIP_SPEED: 3,\n    BASE_ASTEROID_DELAY: 500,\n    BASE_ASTEROID_SPEED: 1500,\n    FTB_SPEED: 60000,\n    STAR_WIDTH: 3000,\n    STAR_HEIGHT: 3000,\n    NUM_STARS: 200,\n    STAR_SPEED: 60000,\n    FRAME_DELAY: 100,\n  },\n  Prestige: {\n    storesMap: [\n      { store: StoreCategory.wood, type: 'g' },\n      { store: StoreCategory.fur, type: 'g' },\n      { store: StoreCategory.meat, type: 'g' },\n      { store: StoreCategory.iron, type: 'g' },\n      { store: StoreCategory.coal, type: 'g' },\n      { store: StoreCategory.sulphur, type: 'g' },\n      { store: StoreCategory.steel, type: 'g' },\n      { store: StoreCategory.cured_meat, type: 'g' },\n      { store: StoreCategory.scales, type: 'g' },\n      { store: StoreCategory.teeth, type: 'g' },\n      { store: StoreCategory.leather, type: 'g' },\n      { store: StoreCategory.bait, type: 'g' },\n      { store: StoreCategory.torch, type: 'g' },\n      { store: StoreCategory.cloth, type: 'g' },\n      { store: StoreCategory.bone_spear, type: 'w' },\n      { store: StoreCategory.iron_sword, type: 'w' },\n      { store: StoreCategory.steel_sword, type: 'w' },\n      { store: StoreCategory.bayonet, type: 'w' },\n      { store: StoreCategory.rifle, type: 'w' },\n      { store: StoreCategory.laser_rifle, type: 'w' },\n      { store: StoreCategory.bullets, type: 'a' },\n      { store: StoreCategory.energy_cell, type: 'a' },\n      { store: StoreCategory.grenade, type: 'a' },\n      { store: StoreCategory.bolas, type: 'a' },\n    ],\n  },\n};\n","import { createSlice } from '@reduxjs/toolkit';\n\nconst slice = createSlice({\n  name: 'marketing',\n  initialState: {\n    penrose: false,\n  },\n  reducers: {\n    changePenrose(state, action) {\n      state.penrose = action.payload;\n    },\n  },\n});\n\nexport const actions = slice.actions;\n\nexport default slice.reducer;\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\n\nconst configSlice = createSlice({\n  name: 'config',\n  initialState: {\n    hyperMode: false,\n    soundOn: false,\n  },\n  reducers: {\n    changeHyperMode(state, action: PayloadAction<boolean>) {\n      state.hyperMode = action.payload;\n    },\n    changeSound(state, action: PayloadAction<boolean>) {\n      state.soundOn = action.payload;\n    },\n  },\n});\n\nexport const actions = configSlice.actions;\n\nexport default configSlice.reducer;\n","import { createSlice } from '@reduxjs/toolkit';\n\nconst locationSlice = createSlice({\n  name: 'location',\n  initialState: {\n    Outside: false,\n    Room: false,\n    Ship: false,\n    World: false,\n    Path: false,\n  },\n  reducers: {\n    enableOutside(state) {\n      state.Outside = true;\n    },\n    enableRoom(state) {\n      state.Room = true;\n    },\n    enableSpaceShip(state) {\n      state.Ship = true;\n    },\n    enableWorld(state) {\n      state.World = true;\n    },\n    enablePath(state) {\n      state.Path = true;\n    },\n  },\n});\n\nexport const actions = locationSlice.actions;\n\nexport default locationSlice.reducer;\n","import { combineReducers } from '@reduxjs/toolkit';\nimport location, { actions as locationActions } from './location';\n\nexport default combineReducers({\n  location,\n});\n\nexport const actions = {\n  location: locationActions,\n};\n","import { PayloadAction } from '@reduxjs/toolkit';\nimport _ from 'lodash';\nimport config from '../../../config';\n\nfunction getDefaultValue(v: any) {\n  let defaultValue: any = 0;\n  if (typeof v === 'boolean') {\n    defaultValue = false;\n  } else if (typeof v === 'string') {\n    defaultValue = '';\n  } else if (v === null) {\n    defaultValue = null;\n  }\n  return defaultValue;\n}\n\nfunction clean(obj: any, prop?: string) {\n  if (!prop) {\n    return Object.keys(obj).forEach(key => {\n      clean(obj, key);\n    });\n  }\n  const value = _.get(obj, prop);\n  if (_.isObject(value)) {\n    if (_.isEmpty(value)) {\n      delete obj[prop];\n    }\n    for (let i in value) {\n      clean((value as any)[i], i);\n    }\n  }\n}\n\nexport default {\n  clean(state: any, action: PayloadAction<string | undefined>) {\n    clean(state, action.payload);\n  },\n  removeM(state: any, action: PayloadAction<string[]>) {\n    action.payload.forEach(key => {\n      _.unset(state, key);\n    });\n  },\n  set(_: any, action: PayloadAction<any>) {\n    const defaultValue = getDefaultValue(action.payload);\n    return action.payload || defaultValue;\n  },\n  setM(state: any, action: PayloadAction<{ [key: string]: any }>) {\n    for (const key in action.payload) {\n      if (typeof action.payload[key] === 'undefined') {\n        _.set(state, key, undefined);\n      } else {\n        const defaultValue = getDefaultValue(action.payload[key]);\n        _.set(state, key, action.payload[key] || defaultValue);\n      }\n    }\n  },\n  addM(state: any, action: PayloadAction<{ [key: string]: any }>) {\n    for (const key in action.payload) {\n      _.set(\n        state,\n        key,\n        Math.min(Math.max(_.get(state, key, 0) +\n          (action.payload[key] || 0), 0), config.Engine.MAX_STORE)\n      );\n    }\n  },\n};\n","import { createSlice } from '@reduxjs/toolkit';\nimport { StoreCategory } from '../../type';\nimport numberValueModify from './common/numberValueModify';\n\nexport function getInitialState() {\n  const rtn = Object.values(StoreCategory).reduce((p, c: StoreCategory) => {\n    p[c] = undefined;\n    return p;\n  }, {} as { [key in StoreCategory]: number | undefined });\n  return rtn;\n}\n\nconst storesSlice = createSlice({\n  name: 'stores',\n  initialState: getInitialState(),\n  reducers: {\n    ...numberValueModify,\n  },\n});\n\nexport const actions = storesSlice.actions;\n\nexport default storesSlice.reducer;\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { FireStatus } from '../../../type';\nimport config from '../../../config';\n\nconst slice = createSlice({\n  name: 'fire',\n  initialState: {\n    status: config.Room.FireStatus.Dead,\n  },\n  reducers: {\n    changeFire(state, action: PayloadAction<FireStatus>) {\n      state.status = action.payload;\n    },\n  },\n});\n\nexport const actions = {\n  ...slice.actions,\n};\n\nexport default slice.reducer;\n","import { createSlice } from '@reduxjs/toolkit';\nimport numberValueModify from '../../../state/reducers/common/numberValueModify';\n\nconst slice = createSlice({\n  name: 'builder',\n  initialState: {\n    level: -1,\n  },\n  reducers: {\n    ...numberValueModify,\n  },\n});\n\nexport const actions = slice.actions;\n\nexport default slice.reducer;\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport numberValueModify from '../../../state/reducers/common/numberValueModify';\nimport { TemperatureStatus } from '../../../type';\nimport config from '../../../config';\n\nconst slice = createSlice({\n  name: 'temperature',\n  initialState: {\n    status: config.Room.TemperatureStatus.Freezing,\n  },\n  reducers: {\n    ...numberValueModify,\n    change(state, action: PayloadAction<TemperatureStatus>) {\n      state.status = action.payload;\n    },\n  },\n});\n\nexport const actions = slice.actions;\n\nexport default slice.reducer;\n","import { createSlice } from '@reduxjs/toolkit';\nimport numberValueModify from '../../../state/reducers/common/numberValueModify';\n\nconst slice = createSlice({\n  name: 'thieves',\n  initialState: 0,\n  reducers: {\n    ...numberValueModify,\n    change(_, action) {\n      return action.payload;\n    },\n  },\n});\n\nexport const actions = slice.actions;\n\nexport default slice.reducer;\n","import { createSlice } from '@reduxjs/toolkit';\nimport numberValueModify from '../common/numberValueModify';\nimport { getInitialState as getStoreInitialState } from '../stores';\n\nconst slice = createSlice({\n  name: 'stolen',\n  initialState: getStoreInitialState(),\n  reducers: {\n    ...numberValueModify,\n  },\n});\n\nexport const actions = slice.actions;\n\nexport default slice.reducer;\n","import { createSlice } from '@reduxjs/toolkit';\nimport { Building } from '../../../type';\nimport numberValueModify from '../../../state/reducers/common/numberValueModify';\n\nconst slice = createSlice({\n  name: 'stores',\n  initialState: {} as  { [key in Building]: number },\n  reducers: {\n    ...numberValueModify,\n  },\n});\n\nexport const actions = slice.actions;\n\nexport default slice.reducer;\n","import { createSlice } from '@reduxjs/toolkit';\nimport numberValueModify from '../../../state/reducers/common/numberValueModify';\n\nconst slice = createSlice({\n  name: 'population',\n  initialState: {\n    value: 0,\n  },\n  reducers: {\n    ...numberValueModify,\n  },\n});\n\nexport const actions = slice.actions;\n\nexport default slice.reducer;\n","import { createSlice } from '@reduxjs/toolkit';\nimport { WorkerType } from '../../../type';\nimport numberValueModify from '../../../state/reducers/common/numberValueModify';\n\nconst slice = createSlice({\n  name: 'workers',\n  initialState: {} as { [key in WorkerType]: number },\n  reducers: {\n    ...numberValueModify,\n  },\n});\n\nexport const actions = slice.actions;\n\nexport default slice.reducer;\n","import { createSlice } from '@reduxjs/toolkit';\nimport numberValueModify from '../../../state/reducers/common/numberValueModify';\n\nconst slice = createSlice({\n  name: 'city',\n  initialState: {\n    cleared: false,\n  },\n  reducers: {\n    ...numberValueModify,\n  },\n});\n\nexport const actions = slice.actions;\n\nexport default slice.reducer;\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport config from '../../../config';\nimport _ from 'lodash';\nimport numberValueModify from '../../../state/reducers/common/numberValueModify';\n\nconst slice = createSlice({\n  name: 'world',\n  initialState: {\n    seenAll: false,\n    mask: [] as boolean[][],\n    map: [] as any[][],\n    enableShip: false,\n    ship: [0, 0],\n    dir: '',\n    sulphurmine: false,\n    ironmine: false,\n    coalmine: false,\n    water: 0,\n    danger: false,\n    foodMove: 0,\n    waterMove: 0,\n    starvation: false,\n    thirst: false,\n    usedOutposts: {} as { [key: string]: boolean },\n    curPos: _.cloneDeep(config.World.VILLAGE_POS),\n    health: 0,\n    dead: false,\n    fightMove: 0,\n    outfit: {} as { [key: string]: number },\n    stunned: 0\n  },\n  reducers: {\n    ...numberValueModify,\n    seeAll(state, action: PayloadAction<boolean>) {\n      state.seenAll = action.payload;\n    },\n    visit(state, action: PayloadAction<{ x: number; y: number }>) {\n      const { x, y } = action.payload;\n      state.map[x][y] = state.map[x][y].replace('!') + '!';\n    },\n    useOutpost(state) {\n      state.usedOutposts[state.curPos[0] + ',' + state.curPos[1]] = true;\n    },\n    setMap(state, action: PayloadAction<{ pos: number[]; value: any }>) {\n      const { pos, value } = action.payload;\n      state.map[pos[0]][pos[1]] = value;\n    },\n  },\n});\n\nexport const actions = { ...slice.actions };\n\nexport default slice.reducer;\n","import { createSlice } from '@reduxjs/toolkit';\nimport numberValueModify from '../../../state/reducers/common/numberValueModify';\n\nconst slice = createSlice({\n  name: 'space_ship',\n  initialState: {\n    hull: 0,\n    thrusters: 1,\n    seenShip: false,\n    seenWarning: false,\n  },\n  reducers: {\n    ...numberValueModify,\n  },\n});\n\nexport const actions = slice.actions;\n\nexport default slice.reducer;\n","import { createSlice } from '@reduxjs/toolkit';\nimport numberValueModify from '../../../state/reducers/common/numberValueModify';\n\nconst slice = createSlice({\n  name: 'outside',\n  initialState: {\n    seenForest: false,\n  },\n  reducers: {\n    ...numberValueModify,\n  },\n});\n\nexport const actions = slice.actions;\n\nexport default slice.reducer;\n","import { combineReducers } from '@reduxjs/toolkit';\nimport fire, { actions as fireActions } from './fire';\nimport builder, { actions as builderActions } from './builder';\nimport temperature, { actions as tempActions } from './temperature';\nimport thieves, { actions as thievesActions } from './thieves';\nimport stolen, { actions as stolenActions } from './stolen';\nimport buildings, { actions as buildingsActions } from './buildings';\nimport population, { actions as populationActions } from './population';\nimport workers, { actions as workersActioins } from './workers';\nimport city, { actions as cityActioins } from './city';\nimport world, { actions as worldActions } from './world';\nimport spaceShip, { actions as spaceShipActions } from './space_ship';\nimport outside, { actions as outsideActions } from './outside';\n\nexport default combineReducers({\n  fire,\n  builder,\n  temperature,\n  thieves,\n  stolen,\n  buildings,\n  population,\n  workers,\n  city,\n  world,\n  spaceShip,\n  outside,\n});\n\nexport const actions = {\n  fire: fireActions,\n  builder: builderActions,\n  temperature: tempActions,\n  thieves: thievesActions,\n  stolen: stolenActions,\n  buildings: buildingsActions,\n  population: populationActions,\n  workers: workersActioins,\n  city: cityActioins,\n  world: worldActions,\n  spaceShip: spaceShipActions,\n  outside: outsideActions,\n};\n","import { GameSpace } from '../../type';\nimport { createSlice, PayloadAction, createAsyncThunk } from '@reduxjs/toolkit';\nimport { GameState } from '../index';\n\nexport type Notification = {\n  text: string;\n  module?: string;\n  _module?: string;\n};\n\nconst notify = createAsyncThunk(\n  'notifications/notify',\n  async (data: { message: Notification; noQueue?: boolean }, { getState }) => {\n    const appState = getState() as GameState;\n    let { text, module } = data.message;\n    if (text.slice(-1) != '.') {\n      text += '.';\n    }\n    if (module && appState.engine.activeSpace != module) {\n      if (!data.noQueue) {\n        return data.message;\n      }\n    } else {\n      return {\n        ...data.message,\n        _module: data.message.module,\n        module: 'global',\n      };\n    }\n    return null;\n  }\n);\n\nconst storesSlice = createSlice({\n  name: 'notifications',\n  initialState: {\n    notifyQueue: {\n      global: []\n    } as { [key: string]: Notification[] },\n  },\n  reducers: {\n    spaceNotify(state, action: PayloadAction<GameSpace>) {\n      const queue = state.notifyQueue[action.payload] || [];\n      state.notifyQueue[action.payload] = [];\n      queue.forEach(message => {\n        message._module = message.module;\n        message.module = 'global';\n      });\n      state.notifyQueue['global'] = [...state.notifyQueue['global'], ...queue];\n    },\n  },\n  extraReducers: builder => {\n    builder.addCase(\n      notify.fulfilled,\n      (state, action: PayloadAction<Notification | null>) => {\n        const message = action.payload;\n        if (message) {\n          let module = message.module || 'global';\n          if (!state.notifyQueue[module]) {\n            state.notifyQueue[module] = [];\n          }\n          state.notifyQueue[module].push(message);\n        }\n      }\n    );\n  },\n});\n\nexport const actions = { ...storesSlice.actions, notify };\n\nexport default storesSlice.reducer;\n","import { GameSpace } from '../../type';\nimport { createSlice, createAsyncThunk, PayloadAction } from '@reduxjs/toolkit';\nimport { GameState } from '../index';\nimport { actions as notificationActions } from '../../state/reducers/notifications';\n\nconst changeSpace = createAsyncThunk(\n  'engine/changeSapce',\n  async (space: GameSpace, { getState, dispatch }) => {\n    const appState = getState() as GameState;\n    let prevSpace = appState.engine.activeSpace;\n    if (prevSpace !== space) {\n      dispatch(notificationActions.spaceNotify(space));\n    }\n    return space;\n  }\n);\n\nconst configSlice = createSlice({\n  name: 'engine',\n  initialState: {\n    activeSubSpace: ''\n  } as { activeSpace?: GameSpace, activeSubSpace: string },\n  reducers: {\n    changeSubSpace(state, action) {\n      state.activeSubSpace = action.payload;\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(\n      changeSpace.fulfilled,\n      (state, action: PayloadAction<GameSpace>) => {\n        state.activeSpace = action.payload;\n      }\n    );\n  },\n});\n\nexport const actions = { ...configSlice.actions, changeSpace };\n\nexport default configSlice.reducer;\n","import { Income } from '../../type';\nimport { createSlice } from '@reduxjs/toolkit';\nimport numberValueModify from './common/numberValueModify';\n\nconst slice = createSlice({\n  name: 'income',\n  initialState: {} as {\n    thieves?: Income;\n    builder?: Income;\n    gatherer?: Income;\n    hunter?: Income;\n    trapper?: Income;\n    tanner?: Income;\n    charcutier?: Income;\n    iron_miner?: Income;\n    coal_miner?: Income;\n    sulphur_miner?: Income;\n    steelworker?: Income;\n    armourer?: Income;\n  },\n  reducers: {\n    ...numberValueModify,\n  },\n});\n\nexport const actions = slice.actions;\n\nexport default slice.reducer;\n","import { createAsyncThunk, createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { Perks, PerkCategory } from '../../../type';\nimport { actions as notificationsActions } from '../notifications';\n\nexport function getInitialState() {\n  return Object.keys(Perks).reduce((accumulator, current) => {\n    accumulator[current as PerkCategory] = false;\n    return accumulator;\n  }, {} as { [key in PerkCategory]: boolean });\n}\n\nconst addPerk = createAsyncThunk(\n  'character/perks/add',\n  async (category: PerkCategory, { dispatch }) => {\n    const perk = Perks[category];\n    dispatch(\n      notificationsActions.notify({\n        message: {\n          text: perk.notify,\n        },\n      })\n    );\n    return category;\n  }\n);\n\nconst slice = createSlice({\n  name: 'perks',\n  initialState: getInitialState(),\n  reducers: {},\n  extraReducers: builder => {\n    builder.addCase(\n      addPerk.fulfilled,\n      (state, action: PayloadAction<PerkCategory>) => {\n        state[action.payload] = true;\n      }\n    );\n  },\n});\n\nexport const actions = {\n  ...slice.actions,\n  addPerk,\n};\n\nexport default slice.reducer;\n","import { createSlice } from '@reduxjs/toolkit';\nimport numberValueModify from '../../../state/reducers/common/numberValueModify';\n\nconst slice = createSlice({\n  name: 'statistics',\n  initialState: {\n    punches: 0,\n    starved: 0,\n    dehydrated: 0,\n    cityCleared: false,\n  },\n  reducers: {\n    ...numberValueModify,\n  },\n});\n\nexport const actions = {\n  ...slice.actions,\n};\n\nexport default slice.reducer;\n","import { combineReducers } from '@reduxjs/toolkit';\nimport perks, { actions as perksActions } from './perks';\nimport statistics, { actions as statisticsActions } from './statistics';\n\nexport default combineReducers({\n  perks,\n  statistics,\n});\n\nexport const actions = {\n  perks: perksActions,\n  statistics: statisticsActions,\n};\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { Scene } from '../../type';\nimport numberValueModify from './common/numberValueModify';\nimport uuid from '../../tools/uuid';\n\nconst storesSlice = createSlice({\n  name: 'events',\n  initialState: {\n    eventStack: [],\n    activeScene: '',\n    delay: {},\n    loot: {},\n    enemys: [],\n    won: false,\n    fightEvents: []\n  } as {\n    [key: string]: any;\n    eventStack: string[];\n    activeScene: string;\n    delay: { [key: string]: number };\n    loot: { [key: string]: number };\n    enemys: {\n      chara: string,\n      health: number,\n      maxHealth: number,\n      stunned: number\n    }[],\n    won: boolean,\n    fightEvents: {time: number, target: string, type: string, meta?: any, id?: string}[]\n  },\n  reducers: {\n    ...numberValueModify,\n    end(state, _) {\n      state.eventStack.shift();\n      state.activeScene = '';\n      state.enemys = [];\n      state.won = false;\n      state.fightEvents = []\n    },\n    cleanEnemys(state) {\n      state.enemys = [];\n      state.won = false;\n      state.fightEvents = []\n    },\n    logFight(state, action: PayloadAction<{time: number, target: string, type: string, meta?: any, id?: string}>) {\n      if (!state.fightEvents) {\n        state.fightEvents = [];\n      }\n      state.fightEvents.push({\n        ...action.payload,\n        id: uuid()\n      });\n    },\n    push(state, action) {\n      state.eventStack.unshift(action.payload);\n    },\n    setSceneEnemy(state, action: PayloadAction<Scene>) {\n      const scene = action.payload;\n      state.enemys = [{\n        chara: scene.chara,\n        health: scene.health,\n        maxHealth: scene.health,\n        stunned: 0\n      }]\n      state.fightEvents = []\n      state.won = false;\n    },\n    winFight(state) {\n      state.won = true;\n    }\n  }\n});\n\nexport const actions = { ...storesSlice.actions };\n\nexport default storesSlice.reducer;\n","export default function uuidv4() {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n        var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n        return v.toString(16);\n    });\n}","import { createSlice } from '@reduxjs/toolkit';\nimport numberValueModify from './common/numberValueModify';\n\nconst storesSlice = createSlice({\n  name: 'previous',\n  initialState: {\n    stores: [],\n    score: 0,\n  },\n  reducers: {\n    ...numberValueModify,\n  },\n});\n\nexport const actions = { ...storesSlice.actions };\n\nexport default storesSlice.reducer;\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\n\nconst slice = createSlice({\n  name: 'room',\n  initialState: {\n    changed: true,\n    crafts: {} as { [key: string]: boolean },\n    buys: {} as { [key: string]: boolean },\n  },\n  reducers: {\n    setChanged(state, action: PayloadAction<boolean>) {\n      state.changed = action.payload;\n    },\n    addCraft(state, action: PayloadAction<{ name: string}>) {\n      const { name } = action.payload;\n      state.crafts[name] = true;\n    },\n    addBuy(state, action: PayloadAction<{ name: string }>) {\n      const { name } = action.payload;\n      state.buys[name] = true;\n    },\n  },\n});\n\nexport const actions = slice.actions;\n\nexport default slice.reducer;\n","import { createSlice } from '@reduxjs/toolkit';\nimport { StoreCategory } from '../../../type';\nimport numberValueModify from '../../../state/reducers/common/numberValueModify';\n\nconst slice = createSlice({\n  name: 'outfit',\n  initialState: {} as { [key in StoreCategory]?: number },\n  reducers: {\n    ...numberValueModify,\n    empty() {\n      return {};\n    },\n  },\n});\n\nexport const actions = slice.actions;\n\nexport default slice.reducer;\n","import { combineReducers } from '@reduxjs/toolkit';\nimport outfit, { actions as outfitActions } from './outfit';\n\nexport default combineReducers({\n  outfit,\n});\n\nexport const actions = {\n  outfit: outfitActions,\n};\n","import { createSlice } from '@reduxjs/toolkit';\nimport numberValueModify from './common/numberValueModify';\n\nconst slice = createSlice({\n  name: 'delay',\n  initialState: {} as { [key: string]: any },\n  reducers: {\n    ...numberValueModify,\n  },\n});\n\nexport const actions = { ...slice.actions };\n\nexport default slice.reducer;\n","import { createSlice, PayloadAction, createAsyncThunk } from '@reduxjs/toolkit';\nimport { GameState } from '../index';\nimport { Operation, OptHistory } from '../../operations';\nimport Engine from '../../engine';\n\n\nconst record = createAsyncThunk<OptHistory, Operation, {\n    state: GameState, extra: {\n        engine: Engine\n    }\n}>(\n    'operation/record',\n    async (opt: Operation, { extra }) => {\n        const now = Date.now();\n        const cooldown = opt.cooldown ? opt.cooldown(extra.engine, opt) : 0;\n        return {\n            lastExecTime: now,\n            id: opt.id,\n            cooldown,\n            cooldownAt: now + cooldown * 1000\n        }\n    }\n);\n\nconst slice = createSlice({\n    name: 'operation',\n    initialState: {} as { [operationId: string]: OptHistory },\n    reducers: {\n        clearCooldown(state, action: PayloadAction<string>) {\n            const id = action.payload;\n            const history = state[id];\n            if (history) {\n                state[id].cooldownAt = 0;\n            }\n        }\n    },\n    extraReducers: builder => {\n        builder.addCase(\n            record.fulfilled,\n            (state, action: PayloadAction<OptHistory>) => {\n                const history = action.payload;\n                state[history.id] = history\n            }\n        );\n    },\n});\n\nexport const actions = {...slice.actions, record};\n\nexport default slice.reducer;\n","import { combineReducers } from '@reduxjs/toolkit';\nimport marketing, { actions as marketingActions } from './marketing';\nimport config, { actions as configActions } from './config';\nimport features, { actions as featuresActions } from './features';\nimport stores, { actions as StoreActions } from './stores';\nimport game, { actions as gameActions } from './game';\nimport engine, { actions as engineActions } from './engine';\nimport income, { actions as incomeActions } from './income';\nimport character, { actions as characterActions } from './character';\nimport events, { actions as eventActions } from './events';\nimport notifications, { actions as notificationActions } from './notifications';\nimport previous, { actions as previousActions } from './previous';\nimport room, { actions as roomActions } from './room';\nimport path, { actions as pathActions } from './path';\nimport delay, { actions as delayActions } from './delay';\nimport operation, {actions as operationActions} from './operation';\n\nexport const reducer = combineReducers({\n  room,\n  marketing,\n  config,\n  features,\n  stores,\n  game,\n  engine,\n  income,\n  character,\n  events,\n  notifications,\n  previous,\n  path,\n  delay,\n  operation\n});\n\nexport const actions = {\n  config: configActions,\n  stores: StoreActions,\n  game: gameActions,\n  engine: engineActions,\n  income: incomeActions,\n  character: characterActions,\n  marketing: marketingActions,\n  events: eventActions,\n  notifications: notificationActions,\n  previous: previousActions,\n  features: featuresActions,\n  room: roomActions,\n  path: pathActions,\n  delay: delayActions,\n  operation: operationActions\n};\n","import { reducer } from './reducers';\nimport { configureStore, Middleware } from '@reduxjs/toolkit';\nimport logger from 'redux-logger';\nimport Engine from '../engine';\n\nconst moddles: Middleware[] = [];\n\nif (process.env.NODE_ENV === 'development') {\n  moddles.push(logger);\n}\n\nfunction createState(engine: Engine, state?: GameState) {\n  const store = configureStore({\n    reducer,\n    preloadedState: state,\n    middleware: getDefaultMiddleware =>\n      getDefaultMiddleware({\n        thunk: {\n          extraArgument: {\n            engine,\n          },\n        },\n      }).concat(moddles),\n  });\n\n  return store;\n}\n\nexport type Store = ReturnType<typeof createState>;\nexport type GameState = ReturnType<typeof reducer>;\nexport { actions } from './reducers';\n\nexport default createState;\n","let enable = false;\n\nexport function config(options: {enable?: boolean}) {\n  enable = options.enable || false;\n}\n\nexport default function log(...args: any[]) {\n  if (!enable) {\n    return;\n  }\n  console.log(...args);\n}\n","import translate from '../translate';\nimport { Event, GameSpace, PerkCategory } from '../type';\n\nconst events: Event[] = [\n  {\n    title: translate('The Thief'),\n    isAvailable: function(state) {\n      return (\n        (state.engine.activeSpace === GameSpace.Room ||\n          state.engine.activeSpace === GameSpace.Outside) &&\n        state.game.thieves === 1\n      );\n    },\n    scenes: {\n      start: {\n        text: [\n          translate('the villagers haul a filthy man out of the store room.'),\n          translate('say his folk have been skimming the supplies.'),\n          translate('say he should be strung up as an example.'),\n        ],\n        notification: translate('a thief is caught'),\n        blink: true,\n        buttons: {\n          kill: {\n            text: translate('hang him'),\n            nextScene: { 1: 'hang' },\n          },\n          spare: {\n            text: translate('spare him'),\n            nextScene: { 1: 'spare' },\n          },\n        },\n      },\n      hang: {\n        text: [\n          translate('the villagers hang the thief high in front of the store room.'),\n          translate('the point is made. in the next few days, the missing supplies are returned.'),\n        ],\n        onLoad: function(engine) {\n          engine.store?.dispatch(engine.actions.game.thieves.set(2));\n          engine.store?.dispatch(\n            engine.actions.income.setM({\n              thieves: 0,\n            })\n          );\n          engine.store?.dispatch(\n            engine.actions.stores.addM(engine.store?.getState().game.stolen)\n          );\n        },\n        buttons: {\n          leave: {\n            text: translate('leave'),\n            nextScene: 'end',\n          },\n        },\n      },\n      spare: {\n        text: [\n          translate(\"the man says he's grateful. says he won't come around any more.\"),\n          translate('shares what he knows about sneaking before he goes.'),\n        ],\n        onLoad: function(engine) {\n          engine.store?.dispatch(engine.actions.game.thieves.set(2));\n          engine.store?.dispatch(\n            engine.actions.income.setM({\n              thieves: 0,\n            })\n          );\n          engine.store?.dispatch(\n            engine.actions.character.perks.addPerk(PerkCategory.stealthy)\n          );\n        },\n        buttons: {\n          leave: {\n            text: translate('leave'),\n            nextScene: 'end',\n          },\n        },\n      },\n    },\n  },\n];\n\nexport default events;\n","import Engine from '../engine';\nimport translate from '../translate';\nimport { Event, GameSpace, PerkCategory, StoreCategory } from '../type';\n\nconst events: Event[] = [\n  {\n    /* The Nomad  --  Merchant */\n    title: translate('The Nomad'),\n    isAvailable: function(state) {\n      return state.engine.activeSpace === GameSpace.Room && !!state.stores.fur;\n    },\n    scenes: {\n      start: {\n        text: [\n          translate('a nomad shuffles into view, laden with makeshift bags bound with rough twine.'),\n          translate(\"won't say from where he came, but it's clear that he's not staying.\"),\n        ],\n        notification: translate('a nomad arrives, looking to trade'),\n        blink: true,\n        buttons: {\n          buyScales: {\n            text: translate('buy scales'),\n            cost: { fur: 100 },\n            reward: { scales: 1 },\n          },\n          buyTeeth: {\n            text: translate('buy teeth'),\n            cost: { fur: 200 },\n            reward: { teeth: 1 },\n          },\n          buyBait: {\n            text: translate('buy bait'),\n            cost: { fur: 5 },\n            reward: { bait: 1 },\n            notification: translate('traps are more effective with bait.'),\n          },\n          buyCompass: {\n            available: function(state) {\n              return !!state.stores.compass;\n            },\n            text: translate('buy compass'),\n            cost: { fur: 300, scales: 15, teeth: 5 },\n            reward: { compass: 1 },\n            notification: translate('the old compass is dented and dusty, but it looks to work.'),\n          },\n          goodbye: {\n            text: translate('say goodbye'),\n            nextScene: 'end',\n          },\n        },\n      },\n    },\n  },\n  {\n    /* Noises Outside  --  gain wood/fur */\n    title: translate('Noises'),\n    isAvailable: function(state) {\n      return state.engine.activeSpace === GameSpace.Room && !!state.stores.wood;\n    },\n    scenes: {\n      start: {\n        text: [\n          translate('through the walls, shuffling noises can be heard.'),\n          translate(\"can't tell what they're up to.\"),\n        ],\n        notification: translate('strange noises can be heard through the walls'),\n        blink: true,\n        buttons: {\n          investigate: {\n            text: translate('investigate'),\n            nextScene: { 0.3: 'stuff', 1: 'nothing' },\n          },\n          ignore: {\n            text: translate('ignore them'),\n            nextScene: 'end',\n          },\n        },\n      },\n      nothing: {\n        text: [\n          translate('vague shapes move, just out of sight.'),\n          translate('the sounds stop.'),\n        ],\n        buttons: {\n          backinside: {\n            text: translate('go back inside'),\n            nextScene: 'end',\n          },\n        },\n      },\n      stuff: {\n        reward: { wood: 100, fur: 10 },\n        text: [\n          translate('a bundle of sticks lies just beyond the threshold, wrapped in coarse furs.'),\n          translate('the night is silent.'),\n        ],\n        buttons: {\n          backinside: {\n            text: translate('go back inside'),\n            nextScene: 'end',\n          },\n        },\n      },\n    },\n  },\n  {\n    /* Noises Inside  --  trade wood for better good */\n    title: translate('Noises'),\n    isAvailable: function(state) {\n      return state.engine.activeSpace === GameSpace.Room && !!state.stores.wood;\n    },\n    scenes: {\n      start: {\n        text: [\n          translate('scratching noises can be heard from the store room.'),\n          translate(\"something's in there.\"),\n        ],\n        notification: translate(\"something's in the store room\"),\n        blink: true,\n        buttons: {\n          investigate: {\n            text: translate('investigate'),\n            nextScene: { 0.5: 'scales', 0.8: 'teeth', 1: 'cloth' },\n          },\n          ignore: {\n            text: translate('ignore them'),\n            nextScene: 'end',\n          },\n        },\n      },\n      scales: {\n        text: [\n          translate('some wood is missing.'),\n          translate('the ground is littered with small scales'),\n        ],\n        onLoad: function(engine) {\n          const state = engine.store?.getState();\n          let numWood = state?.stores.wood || 0;\n          numWood = Math.floor(numWood * 0.1);\n          if (numWood === 0) numWood = 1;\n          let numScales = Math.floor(numWood / 5);\n          if (numScales === 0) numScales = 1;\n          engine.store?.dispatch(\n            engine.actions.stores.addM({\n              wood: -numWood,\n              scales: numScales,\n            })\n          );\n        },\n        buttons: {\n          leave: {\n            text: translate('leave'),\n            nextScene: 'end',\n          },\n        },\n      },\n      teeth: {\n        text: [\n          translate('some wood is missing.'),\n          translate('the ground is littered with small teeth'),\n        ],\n        onLoad: function(engine) {\n          const state = engine.store?.getState();\n          let numWood = state?.stores.wood || 0;\n          numWood = Math.floor(numWood * 0.1);\n          if (numWood === 0) numWood = 1;\n          let numTeeth = Math.floor(numWood / 5);\n          if (numTeeth === 0) numTeeth = 1;\n          engine.store?.dispatch(\n            engine.actions.stores.addM({\n              wood: -numWood,\n              teeth: numTeeth,\n            })\n          );\n        },\n        buttons: {\n          leave: {\n            text: translate('leave'),\n            nextScene: 'end',\n          },\n        },\n      },\n      cloth: {\n        text: [\n          translate('some wood is missing.'),\n          translate('the ground is littered with scraps of cloth'),\n        ],\n        onLoad: function(engine) {\n          const state = engine.store?.getState();\n          var numWood = state?.stores.wood || 0;\n          numWood = Math.floor(numWood * 0.1);\n          if (numWood === 0) numWood = 1;\n          let numCloth = Math.floor(numWood / 5);\n          if (numCloth === 0) numCloth = 1;\n          engine.store?.dispatch(\n            engine.actions.stores.addM({\n              wood: -numWood,\n              cloth: numCloth,\n            })\n          );\n        },\n        buttons: {\n          leave: {\n            text: translate('leave'),\n            nextScene: 'end',\n          },\n        },\n      },\n    },\n  },\n  {\n    /* The Beggar  --  trade fur for better good */\n    title: translate('The Beggar'),\n    isAvailable: function(state) {\n      return state.engine.activeSpace === GameSpace.Room && !!state.stores.fur;\n    },\n    scenes: {\n      start: {\n        text: [\n          translate('a beggar arrives.'),\n          translate('asks for any spare furs to keep him warm at night.'),\n        ],\n        notification: translate('a beggar arrives'),\n        blink: true,\n        buttons: {\n          '50furs': {\n            text: translate('give 50'),\n            cost: { fur: 50 },\n            nextScene: { 0.5: 'scales', 0.8: 'teeth', 1: 'cloth' },\n          },\n          '100furs': {\n            text: translate('give 100'),\n            cost: { fur: 100 },\n            nextScene: { 0.5: 'teeth', 0.8: 'scales', 1: 'cloth' },\n          },\n          deny: {\n            text: translate('turn him away'),\n            nextScene: 'end',\n          },\n        },\n      },\n      scales: {\n        reward: { scales: 20 },\n        text: [\n          translate('the beggar expresses his thanks.'),\n          translate('leaves a pile of small scales behind.'),\n        ],\n        buttons: {\n          leave: {\n            text: translate('say goodbye'),\n            nextScene: 'end',\n          },\n        },\n      },\n      teeth: {\n        reward: { teeth: 20 },\n        text: [\n          translate('the beggar expresses his thanks.'),\n          translate('leaves a pile of small teeth behind.'),\n        ],\n        buttons: {\n          leave: {\n            text: translate('say goodbye'),\n            nextScene: 'end',\n          },\n        },\n      },\n      cloth: {\n        reward: { cloth: 20 },\n        text: [\n          translate('the beggar expresses his thanks.'),\n          translate('leaves some scraps of cloth behind.'),\n        ],\n        buttons: {\n          leave: {\n            text: translate('say goodbye'),\n            nextScene: 'end',\n          },\n        },\n      },\n    },\n  },\n  {\n    /* The Shady Builder */\n    title: translate('The Shady Builder'),\n    isAvailable: function(state) {\n      return (\n        state.engine.activeSpace === GameSpace.Room &&\n        state.game.buildings.hut >= 5 &&\n        state.game.buildings.hut < 20\n      );\n    },\n    scenes: {\n      start: {\n        text: [\n          translate('a shady builder passes through'),\n          translate('says he can build you a hut for less wood'),\n        ],\n        notification: translate('a shady builder passes through'),\n        buttons: {\n          build: {\n            text: translate('300 wood'),\n            cost: { wood: 300 },\n            nextScene: { 0.6: 'steal', 1: 'build' },\n          },\n          deny: {\n            text: translate('say goodbye'),\n            nextScene: 'end',\n          },\n        },\n      },\n      steal: {\n        text: [translate('the shady builder has made off with your wood')],\n        notification: translate('the shady builder has made off with your wood'),\n        buttons: {\n          end: {\n            text: translate('go home'),\n            nextScene: 'end',\n          },\n        },\n      },\n      build: {\n        text: [translate('the shady builder builds a hut')],\n        notification: translate('the shady builder builds a hut'),\n        onLoad: function(engine) {\n          const state = engine.store?.getState();\n          var n = state!.game.buildings.hut;\n          if (n < 20) {\n            engine.store?.dispatch(\n              engine.actions.game.buildings.setM({\n                hut: n + 1,\n              })\n            );\n          }\n        },\n        buttons: {\n          end: {\n            text: translate('go home'),\n            nextScene: 'end',\n          },\n        },\n      },\n    },\n  },\n\n  {\n    /* Mysterious Wanderer  --  wood gambling */\n    title: translate('The Mysterious Wanderer'),\n    isAvailable: function(state) {\n      return state.engine.activeSpace === GameSpace.Room && !!state.stores.wood;\n    },\n    scenes: {\n      start: {\n        text: [\n          translate(\"a wanderer arrives with an empty cart. says if he leaves with wood, he'll be back with more.\"),\n          translate(\"builder's not sure he's to be trusted.\"),\n        ],\n        notification: translate('a mysterious wanderer arrives'),\n        blink: true,\n        buttons: {\n          wood100: {\n            text: translate('give 100'),\n            cost: { wood: 100 },\n            nextScene: { 1: 'wood100' },\n          },\n          wood500: {\n            text: translate('give 500'),\n            cost: { wood: 500 },\n            nextScene: { 1: 'wood500' },\n          },\n          deny: {\n            text: translate('turn him away'),\n            nextScene: 'end',\n          },\n        },\n      },\n      wood100: {\n        text: [translate('the wanderer leaves, cart loaded with wood')],\n        action: function(inputDelay: number, engine: Engine) {\n          engine.events.saveDelay(\n            function(engine: Engine) {\n              engine.store?.dispatch(\n                engine.actions.stores.addM({\n                  wood: 300,\n                })\n              );\n              engine.notify(\n                translate('the mysterious wanderer returns, cart piled high with wood.'),\n                GameSpace.Room\n              );\n            },\n            `${GameSpace.Room}[4].scenes.wood100.action`,\n            inputDelay\n          );\n        },\n        onLoad: function(engine) {\n          if (Math.random() < 0.5) {\n            this.action(60, engine);\n          }\n        },\n        buttons: {\n          leave: {\n            text: translate('say goodbye'),\n            nextScene: 'end',\n          },\n        },\n      },\n      wood500: {\n        text: [translate('the wanderer leaves, cart loaded with wood')],\n        action: function(inputDelay: number, engine: Engine) {\n          engine.events.saveDelay(\n            function(engine: Engine) {\n              engine.store?.dispatch(\n                engine.actions.stores.addM({\n                  wood: 1500,\n                })\n              );\n              engine.notify(\n                translate('the mysterious wanderer returns, cart piled high with wood.'),\n                GameSpace.Room\n              );\n            },\n            `${GameSpace.Room}[4].scenes.wood500.action`,\n            inputDelay\n          );\n        },\n        onLoad: function(engine) {\n          if (Math.random() < 0.3) {\n            this.action(60, engine);\n          }\n        },\n        buttons: {\n          leave: {\n            text: translate('say goodbye'),\n            nextScene: 'end',\n          },\n        },\n      },\n    },\n  },\n\n  {\n    /* Mysterious Wanderer  --  fur gambling */\n    title: translate('The Mysterious Wanderer'),\n    isAvailable: function(state) {\n      return state.engine.activeSpace === GameSpace.Room && !!state.stores.fur;\n    },\n    scenes: {\n      start: {\n        text: [\n          translate(\"a wanderer arrives with an empty cart. says if she leaves with furs, she'll be back with more.\"),\n          translate(\"builder's not sure she's to be trusted.\"),\n        ],\n        notification: translate('a mysterious wanderer arrives'),\n        blink: true,\n        buttons: {\n          fur100: {\n            text: translate('give 100'),\n            cost: { fur: 100 },\n            nextScene: { 1: 'fur100' },\n          },\n          fur500: {\n            text: translate('give 500'),\n            cost: { fur: 500 },\n            nextScene: { 1: 'fur500' },\n          },\n          deny: {\n            text: translate('turn her away'),\n            nextScene: 'end',\n          },\n        },\n      },\n      fur100: {\n        text: [translate('the wanderer leaves, cart loaded with furs')],\n        action: function(inputDelay: number, engine: Engine) {\n          engine.events.saveDelay(\n            function(engine: Engine) {\n              engine.store?.dispatch(\n                engine.actions.stores.addM({\n                  fur: 300,\n                })\n              );\n              engine.notify(\n                translate('the mysterious wanderer returns, cart piled high with furs.'),\n                GameSpace.Room\n              );\n            },\n            `${GameSpace.Room}[5].scenes.fur100.action`,\n            inputDelay\n          );\n        },\n        onLoad: function(engine) {\n          if (Math.random() < 0.5) {\n            this.action(60, engine);\n          }\n        },\n        buttons: {\n          leave: {\n            text: translate('say goodbye'),\n            nextScene: 'end',\n          },\n        },\n      },\n      fur500: {\n        text: [translate('the wanderer leaves, cart loaded with furs')],\n        action: function(inputDelay: number, engine: Engine) {\n          engine.events.saveDelay(\n            function(engine: Engine) {\n              engine.store?.dispatch(\n                engine.actions.stores.addM({\n                  fur: 1500,\n                })\n              );\n              engine.notify(\n                translate('the mysterious wanderer returns, cart piled high with furs.'),\n                GameSpace.Room\n              );\n            },\n            `${GameSpace.Room}[5].scenes.fur500.action`,\n            inputDelay\n          );\n        },\n        onLoad: function(engine) {\n          if (Math.random() < 0.3) {\n            this.action(60, engine);\n          }\n        },\n        buttons: {\n          leave: {\n            text: translate('say goodbye'),\n            nextScene: 'end',\n          },\n        },\n      },\n    },\n  },\n\n  {\n    /* The Scout  --  Map Merchant */\n    title: translate('The Scout'),\n    isAvailable: function(state) {\n      return (\n        state.engine.activeSpace === GameSpace.Room &&\n        state.features.location.World\n      );\n    },\n    scenes: {\n      start: {\n        text: [\n          translate(\"the scout says she's been all over.\"),\n          translate('willing to talk about it, for a price.'),\n        ],\n        notification: translate('a scout stops for the night'),\n        blink: true,\n        buttons: {\n          buyMap: {\n            text: translate('buy map'),\n            cost: { fur: 200, scales: 10 },\n            available: function(state) {\n              return !state.game.world.seenAll;\n            },\n            notification: translate('the map uncovers a bit of the world'),\n            onChoose: engine => {\n              engine.spaces[GameSpace.World].applyMap();\n            },\n          },\n          learn: {\n            text: translate('learn scouting'),\n            cost: { fur: 1000, scales: 50, teeth: 20 },\n            available: function(state) {\n              return !state.character.perks.scout;\n            },\n            onChoose: function(engine) {\n              engine.store?.dispatch(\n                engine.actions.character.perks.addPerk(PerkCategory.scout)\n              );\n            },\n          },\n          leave: {\n            text: translate('say goodbye'),\n            nextScene: 'end',\n          },\n        },\n      },\n    },\n  },\n\n  {\n    /* The Wandering Master */\n    title: translate('The Master'),\n    isAvailable: function(state) {\n      return (\n        state.engine.activeSpace === GameSpace.Room &&\n        state.features.location.World\n      );\n    },\n    scenes: {\n      start: {\n        text: [\n          translate('an old wanderer arrives.'),\n          translate('he smiles warmly and asks for lodgings for the night.'),\n        ],\n        notification: translate('an old wanderer arrives'),\n        blink: true,\n        buttons: {\n          agree: {\n            text: translate('agree'),\n            cost: {\n              cured_meat: 100,\n              fur: 100,\n              torch: 1,\n            },\n            nextScene: { 1: 'agree' },\n          },\n          deny: {\n            text: translate('turn him away'),\n            nextScene: 'end',\n          },\n        },\n      },\n      agree: {\n        text: [translate('in exchange, the wanderer offers his wisdom.')],\n        buttons: {\n          evasion: {\n            text: translate('evasion'),\n            available: function(state) {\n              return !state.character.perks.evasive;\n            },\n            onChoose: function(engine) {\n              engine.store?.dispatch(\n                engine.actions.character.perks.addPerk(PerkCategory.evasive)\n              );\n            },\n            nextScene: 'end',\n          },\n          precision: {\n            text: translate('precision'),\n            available: function(state) {\n              return !state.character.perks.precise;\n            },\n            onChoose: function(engine) {\n              engine.store?.dispatch(\n                engine.actions.character.perks.addPerk(PerkCategory.precise)\n              );\n            },\n            nextScene: 'end',\n          },\n          force: {\n            text: translate('force'),\n            available: function(state) {\n              return !state.character.perks.barbarian;\n            },\n            onChoose: function(engine) {\n              engine.store?.dispatch(\n                engine.actions.character.perks.addPerk(PerkCategory.barbarian)\n              );\n            },\n            nextScene: 'end',\n          },\n          nothing: {\n            text: translate('nothing'),\n            nextScene: 'end',\n          },\n        },\n      },\n    },\n  },\n\n  {\n    /* The Sick Man */\n    title: translate('The Sick Man'),\n    isAvailable: function(state) {\n      return (\n        state.engine.activeSpace === GameSpace.Room && !!state.stores.medicine\n      );\n    },\n    scenes: {\n      start: {\n        text: [\n          translate('a man hobbles up, coughing.'),\n          translate('he begs for medicine.'),\n        ],\n        notification: translate('a sick man hobbles up'),\n        blink: true,\n        buttons: {\n          help: {\n            text: translate('give 1 medicine'),\n            cost: { medicine: 1 },\n            notification: translate('the man swallows the medicine eagerly'),\n            nextScene: {\n              0.1: 'alloy',\n              0.3: 'cells',\n              0.5: 'scales',\n              1.0: 'nothing',\n            },\n          },\n          ignore: {\n            text: translate('tell him to leave'),\n            nextScene: 'end',\n          },\n        },\n      },\n      alloy: {\n        text: [\n          translate('the man is thankful.'),\n          translate('he leaves a reward.'),\n          translate('some weird metal he picked up on his travels.'),\n        ],\n        onLoad: function(engine) {\n          engine.store?.dispatch(\n            engine.actions.stores.addM({\n              [StoreCategory.alien_alloy]: 1,\n            })\n          );\n        },\n        buttons: {\n          bye: {\n            text: translate('say goodbye'),\n            nextScene: 'end',\n          },\n        },\n      },\n      cells: {\n        text: [\n          translate('the man is thankful.'),\n          translate('he leaves a reward.'),\n          translate('some weird glowing boxes he picked up on his travels.'),\n        ],\n        onLoad: function(engine) {\n          engine.store?.dispatch(\n            engine.actions.stores.addM({\n              [StoreCategory.energy_cell]: 3,\n            })\n          );\n        },\n        buttons: {\n          bye: {\n            text: translate('say goodbye'),\n            nextScene: 'end',\n          },\n        },\n      },\n      scales: {\n        text: [\n          translate('the man is thankful.'),\n          translate('he leaves a reward.'),\n          translate('all he has are some scales.'),\n        ],\n        onLoad: function(engine) {\n          engine.store?.dispatch(\n            engine.actions.stores.addM({\n              [StoreCategory.scales]: 5,\n            })\n          );\n        },\n        buttons: {\n          bye: {\n            text: translate('say goodbye'),\n            nextScene: 'end',\n          },\n        },\n      },\n      nothing: {\n        text: [translate('the man expresses his thanks and hobbles off.')],\n        buttons: {\n          bye: {\n            text: translate('say goodbye'),\n            nextScene: 'end',\n          },\n        },\n      },\n    },\n  },\n];\n\nexport default events;\n","import translate from '../translate';\nimport { Event, GameSpace, StoreCategory } from '../type';\n\nconst events: Event[] = [\n  {\n    title: translate('A Ruined Trap'),\n    isAvailable: function(state) {\n      return (\n        state.engine.activeSpace === GameSpace.Outside &&\n        state.game.buildings.trap > 0\n      );\n    },\n    scenes: {\n      start: {\n        text: [\n          translate('some of the traps have been torn apart.'),\n          translate('large prints lead away, into the forest.'),\n        ],\n        onLoad: function(engine) {\n          const state = engine.store?.getState();\n          const numWrecked =\n            Math.floor(Math.random() * state!.game.buildings.trap) + 1;\n          engine.store?.dispatch(\n            engine.actions.game.buildings.addM({\n              trap: -numWrecked,\n            })\n          );\n        },\n        notification: translate('some traps have been destroyed'),\n        blink: true,\n        buttons: {\n          track: {\n            text: translate('track them'),\n            nextScene: { 0.5: 'nothing', 1: 'catch' },\n          },\n          ignore: {\n            text: translate('ignore them'),\n            nextScene: 'end',\n          },\n        },\n      },\n      nothing: {\n        text: [\n          translate('the tracks disappear after just a few minutes.'),\n          translate('the forest is silent.'),\n        ],\n        notification: translate('nothing was found'),\n        buttons: {\n          end: {\n            text: translate('go home'),\n            nextScene: 'end',\n          },\n        },\n      },\n      catch: {\n        text: [\n          translate('not far from the village lies a large beast, its fur matted with blood.'),\n          translate('it puts up little resistance before the knife.'),\n        ],\n        notification: translate(\"there was a beast. it's dead now\"),\n        reward: {\n          fur: 100,\n          meat: 100,\n          teeth: 10,\n        },\n        buttons: {\n          end: {\n            text: translate('go home'),\n            nextScene: 'end',\n          },\n        },\n      },\n    },\n  },\n  {\n    title: translate('Fire'),\n    isAvailable: function(state) {\n      return (\n        state.engine.activeSpace == GameSpace.Outside &&\n        state.game.buildings.hut > 0 &&\n        state.game.population.value > 50\n      );\n    },\n    scenes: {\n      start: {\n        text: [\n          translate('a fire rampages through one of the huts, destroying it.'),\n          translate('all residents in the hut perished in the fire.'),\n        ],\n        notification: translate('a fire has started'),\n        blink: true,\n        onLoad: function(engine) {\n          engine.spaces.Outside.destroyHuts(1);\n        },\n        buttons: {\n          mourn: {\n            text: translate('mourn'),\n            notification: translate('some villagers have died'),\n            nextScene: 'end',\n          },\n        },\n      },\n    },\n  },\n  {\n    title: translate('Sickness'),\n    isAvailable: function(state) {\n      return (\n        state.engine.activeSpace == GameSpace.Outside &&\n        state.game.population.value > 10 &&\n        state.game.population.value < 50 &&\n        !!state.stores.medicine\n      );\n    },\n    scenes: {\n      start: {\n        text: [\n          translate('a sickness is spreading through the village.'),\n          translate('medicine is needed immediately.'),\n        ],\n        notification: translate('some villagers are ill'),\n        blink: true,\n        buttons: {\n          heal: {\n            text: translate('1 medicine'),\n            cost: { medicine: 1 },\n            nextScene: { 1: 'healed' },\n          },\n          ignore: {\n            text: translate('ignore it'),\n            nextScene: { 1: 'death' },\n          },\n        },\n      },\n      healed: {\n        text: [translate('the sickness is cured in time.')],\n        notification: translate('sufferers are healed'),\n        buttons: {\n          end: {\n            text: translate('go home'),\n            nextScene: 'end',\n          },\n        },\n      },\n      death: {\n        text: [\n          translate('the sickness spreads through the village.'),\n          translate('the days are spent with burials.'),\n          translate('the nights are rent with screams.'),\n        ],\n        notification: translate('sufferers are left to die'),\n        onLoad: function(engine) {\n          const state = engine.store?.getState();\n          const numKilled =\n            Math.floor(\n              Math.random() * Math.floor(state!.game.population.value / 2)\n            ) + 1;\n          engine.spaces.Outside.killVillagers(numKilled);\n        },\n        buttons: {\n          end: {\n            text: translate('go home'),\n            nextScene: 'end',\n          },\n        },\n      },\n    },\n  },\n\n  {\n    title: translate('Plague'),\n    isAvailable: function(state) {\n      return (\n        state.engine.activeSpace == GameSpace.Outside &&\n        state.game.population.value > 50 &&\n        !!state.stores.medicine\n      );\n    },\n    scenes: {\n      start: {\n        text: [\n          translate('a terrible plague is fast spreading through the village.'),\n          translate('medicine is needed immediately.'),\n        ],\n        notification: translate('a plague afflicts the village'),\n        blink: true,\n        buttons: {\n          buyMedicine: {\n            text: translate('buy medicine'),\n            cost: { scales: 70, teeth: 50 },\n            reward: { medicine: 1 },\n          },\n          heal: {\n            text: translate('5 medicine'),\n            cost: { medicine: 5 },\n            nextScene: { 1: 'healed' },\n          },\n          ignore: {\n            text: translate('do nothing'),\n            nextScene: { 1: 'death' },\n          },\n        },\n      },\n      healed: {\n        text: [\n          translate('the plague is kept from spreading.'),\n          translate('only a few die.'),\n          translate('the rest bury them.'),\n        ],\n        notification: translate('epidemic is eradicated eventually'),\n        onLoad: function(engine) {\n          const numKilled = Math.floor(Math.random() * 5) + 2;\n          engine.spaces.Outside.killVillagers(numKilled);\n        },\n        buttons: {\n          end: {\n            text: translate('go home'),\n            nextScene: 'end',\n          },\n        },\n      },\n      death: {\n        text: [\n          translate('the plague rips through the village.'),\n          translate('the nights are rent with screams.'),\n          translate('the only hope is a quick death.'),\n        ],\n        notification: translate('population is almost exterminated'),\n        onLoad: function(engine) {\n          const numKilled = Math.floor(Math.random() * 80) + 10;\n          engine.spaces.Outside.killVillagers(numKilled);\n        },\n        buttons: {\n          end: {\n            text: translate('go home'),\n            nextScene: 'end',\n          },\n        },\n      },\n    },\n  },\n\n  {\n    title: translate('A Beast Attack'),\n    isAvailable: function(state) {\n      return (\n        state.engine.activeSpace == GameSpace.Outside &&\n        state.game.population.value > 0\n      );\n    },\n    scenes: {\n      start: {\n        text: [\n          translate('a pack of snarling beasts pours out of the trees.'),\n          translate('the fight is short and bloody, but the beasts are repelled.'),\n          translate('the villagers retreat to mourn the dead.'),\n        ],\n        notification: translate('wild beasts attack the villagers'),\n        onLoad: function(engine) {\n          const numKilled = Math.floor(Math.random() * 10) + 1;\n          engine.spaces.Outside.killVillagers(numKilled);\n        },\n        reward: {\n          fur: 100,\n          meat: 100,\n          teeth: 10,\n        },\n        blink: true,\n        buttons: {\n          end: {\n            text: translate('go home'),\n            notification: translate('predators become prey. price is unfair'),\n            nextScene: 'end',\n          },\n        },\n      },\n    },\n  },\n\n  {\n    title: translate('A Military Raid'),\n    isAvailable: function(state) {\n      return (\n        state.engine.activeSpace == GameSpace.Outside &&\n        state.game.population.value > 0 &&\n        state.game.city.cleared\n      );\n    },\n    scenes: {\n      start: {\n        text: [\n          translate('a gunshot rings through the trees.'),\n          translate('well armed men charge out of the forest, firing into the crowd.'),\n          translate('after a skirmish they are driven away, but not without losses.'),\n        ],\n        notification: translate('troops storm the village'),\n        onLoad: function(engine) {\n          const numKilled = Math.floor(Math.random() * 40) + 1;\n          engine.spaces.Outside.killVillagers(numKilled);\n        },\n        reward: {\n          [StoreCategory.bullets]: 10,\n          [StoreCategory.cured_meat]: 50,\n        },\n\n        blink: true,\n        buttons: {\n          end: {\n            text: translate('go home'),\n            notification: translate('warfare is bloodthirsty'),\n            nextScene: 'end',\n          },\n        },\n      },\n    },\n  },\n];\n\nexport default events;\n","import { Event } from '../type';\n\nconst events: Event[] = [\n  // {\n  //   title: translate('Penrose'),\n  //   isAvailable: state => {\n  //     return !state.marketing.penrose;\n  //   },\n  //   scenes: {\n  //     start: {\n  //       text: [\n  //         translate(\n  //           'a strange thrumming, pounding and crashing. visions of people and places, of a huge machine and twisting curves.'\n  //         ),\n  //         translate('inviting. it would be so easy to give in, completely.'),\n  //       ],\n  //       notification: translate('a strange thrumming, pounding and crashing. and then gone.'),\n  //       blink: true,\n  //       buttons: {\n  //         'give in': {\n  //           text: translate('give in'),\n  //           onClick: engine => {\n  //             engine.store?.dispatch(\n  //               engine.actions.marketing.changePenrose(true)\n  //             );\n  //           },\n  //           nextScene: 'end',\n  //         },\n  //         ignore: {\n  //           text: translate('ignore it'),\n  //           nextScene: 'end',\n  //         },\n  //       },\n  //     },\n  //   },\n  // },\n];\n\nexport default events;\n","import translate from '../translate';\nimport { Event, PerkCategory } from '../type';\nimport config from '../config';\n\nconst events: { [key: string]: Event } = {\n  outpost: {\n    /* Friendly Outpost */\n    title: translate('An Outpost'),\n    id: 'outpost',\n    scenes: {\n      start: {\n        text: [translate('a safe place in the wilds.')],\n        notification: translate('a safe place in the wilds.'),\n        loot: {\n          cured_meat: {\n            min: 5,\n            max: 10,\n            chance: 1,\n          },\n        },\n        onLoad: function(engine) {\n          engine.spaces.World.useOutpost();\n        },\n        buttons: {\n          leave: {\n            text: translate('leave'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n    },\n  },\n  swamp: {\n    /* Swamp */\n    title: translate('A Murky Swamp'),\n    id: 'swamp',\n    scenes: {\n      start: {\n        text: [\n          translate('rotting reeds rise out of the swampy earth.'),\n          translate('a lone frog sits in the muck, silently.'),\n        ],\n        notification: translate('a swamp festers in the stagnant air.'),\n        buttons: {\n          enter: {\n            text: translate('enter'),\n            nextScene: { 1: 'cabin' },\n          },\n          leave: {\n            text: translate('leave'),\n            nextScene: 'end',\n          },\n        },\n      },\n      cabin: {\n        text: [\n          translate('deep in the swamp is a moss-covered cabin.'),\n          translate('an old wanderer sits inside, in a seeming trance.'),\n        ],\n        buttons: {\n          talk: {\n            cost: { charm: 1 },\n            text: translate('talk'),\n            nextScene: { 1: 'talk' },\n          },\n          leave: {\n            text: translate('leave'),\n            nextScene: 'end',\n          },\n        },\n      },\n      talk: {\n        text: [\n          translate('the wanderer takes the charm and nods slowly.'),\n          translate('he speaks of once leading the great fleets to fresh worlds.'),\n          translate('unfathomable destruction to fuel wanderer hungers.'),\n          translate('his time here, now, is his penance.'),\n        ],\n        onLoad: function(engine) {\n          const state = engine.store!.getState();\n          engine.dispatch(\n            engine.actions.character.perks.addPerk(PerkCategory.gastronome)\n          );\n          engine.spaces.World.markVisited(\n            state?.game.world.curPos[0],\n            state?.game.world.curPos[1]\n          );\n        },\n        buttons: {\n          leave: {\n            text: translate('leave'),\n            nextScene: 'end',\n          },\n        },\n      },\n    },\n  },\n  cave: {\n    /* Cave */\n    title: translate('A Damp Cave'),\n    id: 'cave',\n    scenes: {\n      start: {\n        text: [\n          translate('the mouth of the cave is wide and dark.'),\n          translate(\"can't see what's inside.\"),\n        ],\n        notification: translate('the earth here is split, as if bearing an ancient wound'),\n        buttons: {\n          enter: {\n            text: translate('go inside'),\n            cost: { torch: 1 },\n            nextScene: { 0.3: 'a1', 0.6: 'a2', 1: 'a3' },\n          },\n          leave: {\n            text: translate('leave'),\n            nextScene: 'end',\n          },\n        },\n      },\n\n      a1: {\n        combat: true,\n        enemy: 'beast',\n        chara: 'R',\n        damage: 1,\n        hit: 0.8,\n        attackDelay: 1,\n        health: 5,\n        notification: translate('a startled beast defends its home'),\n        loot: {\n          fur: {\n            min: 1,\n            max: 10,\n            chance: 1,\n          },\n          teeth: {\n            min: 1,\n            max: 5,\n            chance: 0.8,\n          },\n        },\n        buttons: {\n          continue: {\n            text: translate('continue'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: { 0.5: 'b1', 1: 'b2' },\n          },\n          leave: {\n            text: translate('leave cave'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n      a2: {\n        text: [\n          translate('the cave narrows a few feet in.'),\n          translate('the walls are moist and moss-covered'),\n        ],\n        buttons: {\n          continue: {\n            text: translate('squeeze'),\n            nextScene: { 0.5: 'b2', 1: 'b3' },\n          },\n          leave: {\n            text: translate('leave cave'),\n            nextScene: 'end',\n          },\n        },\n      },\n      a3: {\n        text: [\n          translate('the remains of an old camp sits just inside the cave.'),\n          translate('bedrolls, torn and blackened, lay beneath a thin layer of dust.'),\n        ],\n        loot: {\n          cured_meat: {\n            min: 1,\n            max: 5,\n            chance: 1,\n          },\n          torch: {\n            min: 1,\n            max: 5,\n            chance: 0.5,\n          },\n          leather: {\n            min: 1,\n            max: 5,\n            chance: 0.3,\n          },\n        },\n        buttons: {\n          continue: {\n            text: translate('continue'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: { 0.5: 'b3', 1: 'b4' },\n          },\n          leave: {\n            text: translate('leave cave'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n      b1: {\n        text: [\n          translate('the body of a wanderer lies in a small cavern.'),\n          translate(\"rot's been to work on it, and some of the pieces are missing.\"),\n          /// TRANSLATORS : 'it' is a rotting wanderer's body\n          translate(\"can't tell what left it here.\"),\n        ],\n        loot: {\n          iron_sword: {\n            min: 1,\n            max: 1,\n            chance: 1,\n          },\n          cured_meat: {\n            min: 1,\n            max: 5,\n            chance: 0.8,\n          },\n          torch: {\n            min: 1,\n            max: 3,\n            chance: 0.5,\n          },\n          medicine: {\n            min: 1,\n            max: 2,\n            chance: 0.1,\n          },\n        },\n        buttons: {\n          continue: {\n            text: translate('continue'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: { 1: 'c1' },\n          },\n          leave: {\n            text: translate('leave cave'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n      b2: {\n        text: [\n          translate('the torch sputters and dies in the damp air'),\n          translate('the darkness is absolute'),\n        ],\n        notification: translate('the torch goes out'),\n        buttons: {\n          continue: {\n            text: translate('continue'),\n            cost: { torch: 1 },\n            nextScene: { 1: 'c1' },\n          },\n          leave: {\n            text: translate('leave cave'),\n            nextScene: 'end',\n          },\n        },\n      },\n      b3: {\n        combat: true,\n        enemy: 'beast',\n        chara: 'R',\n        damage: 1,\n        hit: 0.8,\n        attackDelay: 1,\n        health: 5,\n        notification: translate('a startled beast defends its home'),\n        loot: {\n          fur: {\n            min: 1,\n            max: 3,\n            chance: 1,\n          },\n          teeth: {\n            min: 1,\n            max: 2,\n            chance: 0.8,\n          },\n        },\n        buttons: {\n          continue: {\n            text: translate('continue'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: { 1: 'c2' },\n          },\n          leave: {\n            text: translate('leave cave'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n      b4: {\n        combat: true,\n        enemy: 'cave lizard',\n        chara: 'R',\n        damage: 3,\n        hit: 0.8,\n        attackDelay: 2,\n        health: 6,\n        notification: translate('a cave lizard attacks'),\n        loot: {\n          scales: {\n            min: 1,\n            max: 3,\n            chance: 1,\n          },\n          teeth: {\n            min: 1,\n            max: 2,\n            chance: 0.8,\n          },\n        },\n        buttons: {\n          continue: {\n            text: translate('continue'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: { 1: 'c2' },\n          },\n          leave: {\n            text: translate('leave cave'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n      c1: {\n        combat: true,\n        enemy: 'beast',\n        chara: 'R',\n        damage: 3,\n        hit: 0.8,\n        attackDelay: 2,\n        health: 10,\n        notification: translate('a large beast charges out of the dark'),\n        loot: {\n          fur: {\n            min: 1,\n            max: 3,\n            chance: 1,\n          },\n          teeth: {\n            min: 1,\n            max: 3,\n            chance: 1,\n          },\n        },\n        buttons: {\n          continue: {\n            text: translate('continue'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: { 0.5: 'end1', 1: 'end2' },\n          },\n          leave: {\n            text: translate('leave cave'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n      c2: {\n        combat: true,\n        enemy: 'lizard',\n        chara: 'T',\n        damage: 4,\n        hit: 0.8,\n        attackDelay: 2,\n        health: 10,\n        notification: translate('a giant lizard shambles forward'),\n        loot: {\n          scales: {\n            min: 1,\n            max: 3,\n            chance: 1,\n          },\n          teeth: {\n            min: 1,\n            max: 3,\n            chance: 1,\n          },\n        },\n        buttons: {\n          continue: {\n            text: translate('continue'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: { 0.7: 'end2', 1: 'end3' },\n          },\n          leave: {\n            text: translate('leave cave'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n      end1: {\n        text: [\n          translate('the nest of a large animal lies at the back of the cave.'),\n        ],\n        onLoad: function(engine) {\n          engine.spaces.World.clearDungeon();\n        },\n        loot: {\n          meat: {\n            min: 5,\n            max: 10,\n            chance: 1,\n          },\n          fur: {\n            min: 5,\n            max: 10,\n            chance: 1,\n          },\n          scales: {\n            min: 5,\n            max: 10,\n            chance: 1,\n          },\n          teeth: {\n            min: 5,\n            max: 10,\n            chance: 1,\n          },\n          cloth: {\n            min: 5,\n            max: 10,\n            chance: 0.5,\n          },\n        },\n        buttons: {\n          leave: {\n            text: translate('leave cave'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n      end2: {\n        text: [\n          translate('a small supply cache is hidden at the back of the cave.'),\n        ],\n        loot: {\n          cloth: {\n            min: 5,\n            max: 10,\n            chance: 1,\n          },\n          leather: {\n            min: 5,\n            max: 10,\n            chance: 1,\n          },\n          iron: {\n            min: 5,\n            max: 10,\n            chance: 1,\n          },\n          cured_meat: {\n            min: 5,\n            max: 10,\n            chance: 1,\n          },\n          steel: {\n            min: 5,\n            max: 10,\n            chance: 0.5,\n          },\n          bolas: {\n            min: 1,\n            max: 3,\n            chance: 0.3,\n          },\n          medicine: {\n            min: 1,\n            max: 4,\n            chance: 0.15,\n          },\n        },\n        onLoad: function(engine) {\n          engine.spaces.World.clearDungeon();\n        },\n        buttons: {\n          leave: {\n            text: translate('leave cave'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n      end3: {\n        text: [\n          translate('an old case is wedged behind a rock, covered in a thick layer of dust.'),\n        ],\n        loot: {\n          steel_sword: {\n            min: 1,\n            max: 1,\n            chance: 1,\n          },\n          bolas: {\n            min: 1,\n            max: 3,\n            chance: 0.5,\n          },\n          medicine: {\n            min: 1,\n            max: 3,\n            chance: 0.3,\n          },\n        },\n        onLoad: function(engine) {\n          engine.spaces.World.clearDungeon();\n        },\n        buttons: {\n          leave: {\n            text: translate('leave cave'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n    },\n  },\n  town: {\n    /* Town */\n    title: translate('A Deserted Town'),\n    id: 'town',\n    scenes: {\n      start: {\n        text: [\n          translate('a small suburb lays ahead, empty houses scorched and peeling.'),\n          translate(\"broken streetlights stand, rusting. light hasn't graced this place in a long time.\"),\n        ],\n        notification: translate('the town lies abandoned, its citizens long dead'),\n        buttons: {\n          enter: {\n            text: translate('explore'),\n            nextScene: { 0.3: 'a1', 0.7: 'a3', 1: 'a2' },\n          },\n          leave: {\n            text: translate('leave'),\n            nextScene: 'end',\n          },\n        },\n      },\n\n      a1: {\n        text: [\n          translate(\"where the windows of the schoolhouse aren't shattered, they're blackened with soot.\"),\n          translate('the double doors creak endlessly in the wind.'),\n        ],\n        buttons: {\n          enter: {\n            text: translate('enter'),\n            nextScene: { 0.5: 'b1', 1: 'b2' },\n            cost: { torch: 1 },\n          },\n          leave: {\n            text: translate('leave town'),\n            nextScene: 'end',\n          },\n        },\n      },\n\n      a2: {\n        combat: true,\n        enemy: 'thug',\n        chara: 'E',\n        damage: 4,\n        hit: 0.8,\n        attackDelay: 2,\n        health: 30,\n        loot: {\n          cloth: {\n            min: 5,\n            max: 10,\n            chance: 0.8,\n          },\n          leather: {\n            min: 5,\n            max: 10,\n            chance: 0.8,\n          },\n          cured_meat: {\n            min: 1,\n            max: 5,\n            chance: 0.5,\n          },\n        },\n        notification: translate('ambushed on the street.'),\n        buttons: {\n          continue: {\n            text: translate('continue'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: { 0.5: 'b3', 1: 'b4' },\n          },\n          leave: {\n            text: translate('leave town'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n      a3: {\n        text: [\n          translate('a squat building up ahead.'),\n          translate('a green cross barely visible behind grimy windows.'),\n        ],\n        buttons: {\n          enter: {\n            text: translate('enter'),\n            nextScene: { 0.5: 'b5', 1: 'end5' },\n            cost: { torch: 1 },\n          },\n          leave: {\n            text: translate('leave town'),\n            nextScene: 'end',\n          },\n        },\n      },\n      b1: {\n        text: [\n          translate('a small cache of supplies is tucked inside a rusting locker.'),\n        ],\n        loot: {\n          cured_meat: {\n            min: 1,\n            max: 5,\n            chance: 1,\n          },\n          torch: {\n            min: 1,\n            max: 3,\n            chance: 0.8,\n          },\n          bullets: {\n            min: 1,\n            max: 5,\n            chance: 0.3,\n          },\n          medicine: {\n            min: 1,\n            max: 3,\n            chance: 0.05,\n          },\n        },\n        buttons: {\n          continue: {\n            text: translate('continue'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: { 0.5: 'c1', 1: 'c2' },\n          },\n          leave: {\n            text: translate('leave town'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n      b2: {\n        combat: true,\n        enemy: 'scavenger',\n        chara: 'E',\n        damage: 4,\n        hit: 0.8,\n        attackDelay: 2,\n        health: 30,\n        loot: {\n          cloth: {\n            min: 5,\n            max: 10,\n            chance: 0.8,\n          },\n          leather: {\n            min: 5,\n            max: 10,\n            chance: 0.8,\n          },\n          cured_meat: {\n            min: 1,\n            max: 5,\n            chance: 0.5,\n          },\n        },\n        notification: translate('a scavenger waits just inside the door.'),\n        buttons: {\n          continue: {\n            text: translate('continue'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: { 0.5: 'c2', 1: 'c3' },\n          },\n          leave: {\n            text: translate('leave town'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n      b3: {\n        combat: true,\n        enemy: 'beast',\n        chara: 'R',\n        damage: 3,\n        hit: 0.8,\n        attackDelay: 1,\n        health: 25,\n        loot: {\n          teeth: {\n            min: 1,\n            max: 5,\n            chance: 1,\n          },\n          fur: {\n            min: 5,\n            max: 10,\n            chance: 1,\n          },\n        },\n        notification: translate('a beast stands alone in an overgrown park.'),\n        buttons: {\n          continue: {\n            text: translate('continue'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: { 0.5: 'c4', 1: 'c5' },\n          },\n          leave: {\n            text: translate('leave town'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n      b4: {\n        text: [\n          translate('an overturned caravan is spread across the pockmarked street.'),\n          translate(\"it's been picked over by scavengers, but there's still some things worth taking.\"),\n        ],\n        loot: {\n          cured_meat: {\n            min: 1,\n            max: 5,\n            chance: 0.8,\n          },\n          torch: {\n            min: 1,\n            max: 3,\n            chance: 0.5,\n          },\n          bullets: {\n            min: 1,\n            max: 5,\n            chance: 0.3,\n          },\n          medicine: {\n            min: 1,\n            max: 3,\n            chance: 0.1,\n          },\n        },\n        buttons: {\n          continue: {\n            text: translate('continue'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: { 0.5: 'c5', 1: 'c6' },\n          },\n          leave: {\n            text: translate('leave town'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n      b5: {\n        combat: true,\n        enemy: 'madman',\n        chara: 'E',\n        damage: 6,\n        hit: 0.3,\n        attackDelay: 1,\n        health: 10,\n        loot: {\n          cloth: {\n            min: 2,\n            max: 4,\n            chance: 0.3,\n          },\n          cured_meat: {\n            min: 1,\n            max: 5,\n            chance: 0.9,\n          },\n          medicine: {\n            min: 1,\n            max: 2,\n            chance: 0.4,\n          },\n        },\n        notification: translate('a madman attacks, screeching.'),\n        buttons: {\n          continue: {\n            text: translate('continue'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: { 0.3: 'end5', 1: 'end6' },\n          },\n          leave: {\n            text: translate('leave town'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n      c1: {\n        combat: true,\n        enemy: 'thug',\n        chara: 'E',\n        damage: 4,\n        hit: 0.8,\n        attackDelay: 2,\n        health: 30,\n        loot: {\n          cloth: {\n            min: 5,\n            max: 10,\n            chance: 0.8,\n          },\n          leather: {\n            min: 5,\n            max: 10,\n            chance: 0.8,\n          },\n          cured_meat: {\n            min: 1,\n            max: 5,\n            chance: 0.5,\n          },\n        },\n        notification: translate('a thug moves out of the shadows.'),\n        buttons: {\n          continue: {\n            text: translate('continue'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: { 1: 'd1' },\n          },\n          leave: {\n            text: translate('leave town'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n      c2: {\n        combat: true,\n        enemy: 'beast',\n        chara: 'R',\n        damage: 3,\n        hit: 0.8,\n        attackDelay: 1,\n        health: 25,\n        loot: {\n          teeth: {\n            min: 1,\n            max: 5,\n            chance: 1,\n          },\n          fur: {\n            min: 5,\n            max: 10,\n            chance: 1,\n          },\n        },\n        notification: translate('a beast charges out of a ransacked classroom.'),\n        buttons: {\n          continue: {\n            text: translate('continue'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: { 1: 'd1' },\n          },\n          leave: {\n            text: translate('leave town'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n      c3: {\n        text: [\n          translate('through the large gymnasium doors, footsteps can be heard.'),\n          translate('the torchlight casts a flickering glow down the hallway.'),\n          translate('the footsteps stop.'),\n        ],\n        buttons: {\n          continue: {\n            text: translate('enter'),\n            nextScene: { 1: 'd1' },\n          },\n          leave: {\n            text: translate('leave town'),\n            nextScene: 'end',\n          },\n        },\n      },\n      c4: {\n        combat: true,\n        enemy: 'beast',\n        chara: 'R',\n        damage: 4,\n        hit: 0.8,\n        attackDelay: 1,\n        health: 25,\n        loot: {\n          teeth: {\n            min: 1,\n            max: 5,\n            chance: 1,\n          },\n          fur: {\n            min: 5,\n            max: 10,\n            chance: 1,\n          },\n        },\n        notification: translate('another beast, draw by the noise, leaps out of a copse of trees.'),\n        buttons: {\n          continue: {\n            text: translate('continue'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: { 1: 'd2' },\n          },\n          leave: {\n            text: translate('leave town'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n      c5: {\n        text: [\n          translate(\"something's causing a commotion a ways down the road.\"),\n          translate('a fight, maybe.'),\n        ],\n        buttons: {\n          continue: {\n            text: translate('continue'),\n            nextScene: { 1: 'd2' },\n          },\n          leave: {\n            text: translate('leave town'),\n            nextScene: 'end',\n          },\n        },\n      },\n      c6: {\n        text: [\n          translate('a small basket of food is hidden under a park bench, with a note attached.'),\n          translate(\"can't read the words.\"),\n        ],\n        loot: {\n          cured_meat: {\n            min: 1,\n            max: 5,\n            chance: 1,\n          },\n        },\n        buttons: {\n          continue: {\n            text: translate('continue'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: { 1: 'd2' },\n          },\n          leave: {\n            text: translate('leave town'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n      d1: {\n        combat: true,\n        enemy: 'scavenger',\n        chara: 'E',\n        damage: 5,\n        hit: 0.8,\n        attackDelay: 2,\n        health: 30,\n        loot: {\n          cured_meat: {\n            min: 1,\n            max: 5,\n            chance: 1,\n          },\n          leather: {\n            min: 5,\n            max: 10,\n            chance: 0.8,\n          },\n          steel_sword: {\n            min: 1,\n            max: 1,\n            chance: 0.5,\n          },\n        },\n        notification: translate('a panicked scavenger bursts through the door, screaming.'),\n        buttons: {\n          continue: {\n            text: translate('continue'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: { 0.5: 'end1', 1: 'end2' },\n          },\n          leave: {\n            text: translate('leave town'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n      d2: {\n        combat: true,\n        enemy: 'vigilante',\n        chara: 'D',\n        damage: 6,\n        hit: 0.8,\n        attackDelay: 2,\n        health: 30,\n        loot: {\n          cured_meat: {\n            min: 1,\n            max: 5,\n            chance: 1,\n          },\n          leather: {\n            min: 5,\n            max: 10,\n            chance: 0.8,\n          },\n          steel_sword: {\n            min: 1,\n            max: 1,\n            chance: 0.5,\n          },\n        },\n        notification: translate(\"a man stands over a dead wanderer. notices he's not alone.\"),\n        buttons: {\n          continue: {\n            text: translate('continue'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: { 0.5: 'end3', 1: 'end4' },\n          },\n          leave: {\n            text: translate('leave town'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n      end1: {\n        text: [\n          translate('scavenger had a small camp in the school.'),\n          translate('collected scraps spread across the floor like they fell from heaven.'),\n        ],\n        onLoad: function(engine) {\n          engine.spaces.World.clearDungeon();\n        },\n        loot: {\n          steel_sword: {\n            min: 1,\n            max: 1,\n            chance: 1,\n          },\n          steel: {\n            min: 5,\n            max: 10,\n            chance: 1,\n          },\n          cured_meat: {\n            min: 5,\n            max: 10,\n            chance: 1,\n          },\n          bolas: {\n            min: 1,\n            max: 5,\n            chance: 0.5,\n          },\n          medicine: {\n            min: 1,\n            max: 2,\n            chance: 0.3,\n          },\n        },\n        buttons: {\n          leave: {\n            text: translate('leave town'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n      end2: {\n        text: [\n          translate(\"scavenger'd been looking for supplies in here, it seems.\"),\n          translate(\"a shame to let what he'd found go to waste.\"),\n        ],\n        onLoad: function(engine) {\n          engine.spaces.World.clearDungeon();\n        },\n        loot: {\n          coal: {\n            min: 5,\n            max: 10,\n            chance: 1,\n          },\n          cured_meat: {\n            min: 5,\n            max: 10,\n            chance: 1,\n          },\n          leather: {\n            min: 5,\n            max: 10,\n            chance: 1,\n          },\n        },\n        buttons: {\n          leave: {\n            text: translate('leave town'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n      end3: {\n        text: [\n          translate(\"beneath the wanderer's rags, clutched in one of its many hands, a glint of steel.\"),\n          translate('worth killing for, it seems.'),\n        ],\n        onLoad: function(engine) {\n          engine.spaces.World.clearDungeon();\n        },\n        loot: {\n          rifle: {\n            min: 1,\n            max: 1,\n            chance: 1,\n          },\n          bullets: {\n            min: 1,\n            max: 5,\n            chance: 1,\n          },\n        },\n        buttons: {\n          leave: {\n            text: translate('leave town'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n      end4: {\n        text: [\n          translate('eye for an eye seems fair.'),\n          translate('always worked before, at least.'),\n          translate('picking the bones finds some useful trinkets.'),\n        ],\n        onLoad: function(engine) {\n          engine.spaces.World.clearDungeon();\n        },\n        loot: {\n          cured_meat: {\n            min: 5,\n            max: 10,\n            chance: 1,\n          },\n          iron: {\n            min: 5,\n            max: 10,\n            chance: 1,\n          },\n          torch: {\n            min: 1,\n            max: 5,\n            chance: 1,\n          },\n          bolas: {\n            min: 1,\n            max: 5,\n            chance: 0.5,\n          },\n          medicine: {\n            min: 1,\n            max: 2,\n            chance: 0.1,\n          },\n        },\n        buttons: {\n          leave: {\n            text: translate('leave town'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n      end5: {\n        text: [translate('some medicine abandoned in the drawers.')],\n        onLoad: function(engine) {\n          engine.spaces.World.clearDungeon();\n        },\n        loot: {\n          medicine: {\n            min: 2,\n            max: 5,\n            chance: 1,\n          },\n        },\n        buttons: {\n          leave: {\n            text: translate('leave town'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n      end6: {\n        text: [\n          translate('the clinic has been ransacked.'),\n          translate('only dust and stains remain.'),\n        ],\n        onLoad: function(engine) {\n          engine.spaces.World.clearDungeon();\n        },\n        buttons: {\n          leave: {\n            text: translate('leave town'),\n\n            nextScene: 'end',\n          },\n        },\n      },\n    },\n  },\n  city: {\n    /* City */\n    title: translate('A Ruined City'),\n    id: 'city',\n    scenes: {\n      start: {\n        text: [\n          translate('a battered highway sign stands guard at the entrance to this once-great city.'),\n          translate(\"the towers that haven't crumbled jut from the landscape like the ribcage of some ancient beast.\"),\n          translate('might be things worth having still inside.'),\n        ],\n        notification: translate('the towers of a decaying city dominate the skyline'),\n        buttons: {\n          enter: {\n            text: translate('explore'),\n            nextScene: { 0.2: 'a1', 0.5: 'a2', 0.8: 'a3', 1: 'a4' },\n          },\n          leave: {\n            text: translate('leave'),\n            nextScene: 'end',\n          },\n        },\n      },\n      a1: {\n        text: [\n          translate('the streets are empty.'),\n          translate('the air is filled with dust, driven relentlessly by the hard winds.'),\n        ],\n        buttons: {\n          continue: {\n            text: translate('continue'),\n            nextScene: { 0.5: 'b1', 1: 'b2' },\n          },\n          leave: {\n            text: translate('leave city'),\n            nextScene: 'end',\n          },\n        },\n      },\n      a2: {\n        text: [\n          translate('orange traffic cones are set across the street, faded and cracked.'),\n          translate('lights flash through the alleys between buildings.'),\n        ],\n        buttons: {\n          continue: {\n            text: translate('continue'),\n            nextScene: { 0.5: 'b3', 1: 'b4' },\n          },\n          leave: {\n            text: translate('leave city'),\n            nextScene: 'end',\n          },\n        },\n      },\n      a3: {\n        text: [\n          translate('a large shanty town sprawls across the streets.'),\n          translate('faces, darkened by soot and blood, stare out from crooked huts.'),\n        ],\n        buttons: {\n          continue: {\n            text: translate('continue'),\n            nextScene: { 0.5: 'b5', 1: 'b6' },\n          },\n          leave: {\n            text: translate('leave city'),\n            nextScene: 'end',\n          },\n        },\n      },\n      a4: {\n        text: [translate('the shell of an abandoned hospital looms ahead.')],\n        buttons: {\n          enter: {\n            text: translate('enter'),\n            cost: { torch: 1 },\n            nextScene: { 0.5: 'b7', 1: 'b8' },\n          },\n          leave: {\n            text: translate('leave city'),\n            nextScene: 'end',\n          },\n        },\n      },\n      b1: {\n        text: [\n          translate('the old tower seems mostly intact.'),\n          translate('the shell of a burned out car blocks the entrance.'),\n          translate('most of the windows at ground level are busted anyway.'),\n        ],\n        buttons: {\n          enter: {\n            text: translate('enter'),\n            nextScene: { 0.5: 'c1', 1: 'c2' },\n          },\n          leave: {\n            text: translate('leave city'),\n            nextScene: 'end',\n          },\n        },\n      },\n      b2: {\n        combat: true,\n        notification: translate('a huge lizard scrambles up out of the darkness of an old metro station.'),\n        enemy: 'lizard',\n        chara: 'R',\n        damage: 5,\n        hit: 0.8,\n        attackDelay: 2,\n        health: 20,\n        loot: {\n          scales: {\n            min: 5,\n            max: 10,\n            chance: 0.8,\n          },\n          teeth: {\n            min: 5,\n            max: 10,\n            chance: 0.5,\n          },\n          meat: {\n            min: 5,\n            max: 10,\n            chance: 0.8,\n          },\n        },\n        buttons: {\n          descend: {\n            text: translate('descend'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: { 0.5: 'c2', 1: 'c3' },\n          },\n          leave: {\n            text: translate('leave city'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n      b3: {\n        notification: translate('the shot echoes in the empty street.'),\n        combat: true,\n        enemy: 'sniper',\n        chara: 'D',\n        damage: 15,\n        hit: 0.8,\n        attackDelay: 4,\n        health: 30,\n        ranged: true,\n        loot: {\n          cured_meat: {\n            min: 1,\n            max: 5,\n            chance: 0.8,\n          },\n          bullets: {\n            min: 1,\n            max: 5,\n            chance: 0.5,\n          },\n          rifle: {\n            min: 1,\n            max: 1,\n            chance: 0.2,\n          },\n        },\n        buttons: {\n          continue: {\n            text: translate('continue'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: { 0.5: 'c4', 1: 'c5' },\n          },\n          leave: {\n            text: translate('leave city'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n      b4: {\n        notification: translate('the soldier steps out from between the buildings, rifle raised.'),\n        combat: true,\n        enemy: 'soldier',\n        ranged: true,\n        chara: 'D',\n        damage: 8,\n        hit: 0.8,\n        attackDelay: 2,\n        health: 50,\n        loot: {\n          cured_meat: {\n            min: 1,\n            max: 5,\n            chance: 0.8,\n          },\n          bullets: {\n            min: 1,\n            max: 5,\n            chance: 0.5,\n          },\n          rifle: {\n            min: 1,\n            max: 1,\n            chance: 0.2,\n          },\n        },\n        buttons: {\n          continue: {\n            text: translate('continue'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: { 0.5: 'c5', 1: 'c6' },\n          },\n          leave: {\n            text: translate('leave city'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n      b5: {\n        notification: translate('a frail man stands defiantly, blocking the path.'),\n        combat: true,\n        enemy: 'frail man',\n        chara: 'E',\n        damage: 1,\n        hit: 0.8,\n        attackDelay: 2,\n        health: 10,\n        loot: {\n          cured_meat: {\n            min: 1,\n            max: 5,\n            chance: 0.8,\n          },\n          cloth: {\n            min: 1,\n            max: 5,\n            chance: 0.5,\n          },\n          leather: {\n            min: 1,\n            max: 1,\n            chance: 0.2,\n          },\n          medicine: {\n            min: 1,\n            max: 3,\n            chance: 0.05,\n          },\n        },\n        buttons: {\n          continue: {\n            text: translate('continue'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: { 0.5: 'c7', 1: 'c8' },\n          },\n          leave: {\n            text: translate('leave city'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n      b6: {\n        text: [\n          translate('nothing but downcast eyes.'),\n          translate('the people here were broken a long time ago.'),\n        ],\n        buttons: {\n          continue: {\n            text: translate('continue'),\n            nextScene: { 0.5: 'c8', 1: 'c9' },\n          },\n          leave: {\n            text: translate('leave city'),\n            nextScene: 'end',\n          },\n        },\n      },\n      b7: {\n        text: [\n          translate('empty corridors.'),\n          translate('the place has been swept clean by scavengers.'),\n        ],\n        buttons: {\n          continue: {\n            text: translate('continue'),\n            nextScene: { 0.3: 'c12', 0.7: 'c10', 1: 'c11' },\n          },\n          leave: {\n            text: translate('leave city'),\n            nextScene: 'end',\n          },\n        },\n      },\n      b8: {\n        notification: translate('an old man bursts through a door, wielding a scalpel.'),\n        combat: true,\n        enemy: 'old man',\n        chara: 'E',\n        damage: 3,\n        hit: 0.5,\n        attackDelay: 2,\n        health: 10,\n        loot: {\n          cured_meat: {\n            min: 1,\n            max: 3,\n            chance: 0.5,\n          },\n          cloth: {\n            min: 1,\n            max: 5,\n            chance: 0.8,\n          },\n          medicine: {\n            min: 1,\n            max: 2,\n            chance: 0.5,\n          },\n        },\n        buttons: {\n          continue: {\n            text: translate('continue'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: { 0.3: 'c13', 0.7: 'c11', 1: 'end15' },\n          },\n          leave: {\n            text: translate('leave city'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n      c1: {\n        notification: translate('a thug is waiting on the other side of the wall.'),\n        combat: true,\n        enemy: 'thug',\n        chara: 'E',\n        damage: 3,\n        hit: 0.8,\n        attackDelay: 2,\n        health: 30,\n        loot: {\n          steel_sword: {\n            min: 1,\n            max: 1,\n            chance: 0.5,\n          },\n          cured_meat: {\n            min: 1,\n            max: 3,\n            chance: 0.5,\n          },\n          cloth: {\n            min: 1,\n            max: 5,\n            chance: 0.8,\n          },\n        },\n        buttons: {\n          continue: {\n            text: translate('continue'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: { 0.5: 'd1', 1: 'd2' },\n          },\n          leave: {\n            text: translate('leave city'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n\n      c2: {\n        notification: translate('a snarling beast jumps out from behind a car.'),\n        combat: true,\n        enemy: 'beast',\n        chara: 'R',\n        damage: 2,\n        hit: 0.8,\n        attackDelay: 1,\n        health: 30,\n        loot: {\n          meat: {\n            min: 1,\n            max: 5,\n            chance: 0.8,\n          },\n          fur: {\n            min: 1,\n            max: 5,\n            chance: 0.8,\n          },\n          teeth: {\n            min: 1,\n            max: 5,\n            chance: 0.5,\n          },\n        },\n        buttons: {\n          continue: {\n            text: translate('continue'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: { 1: 'd2' },\n          },\n          leave: {\n            text: translate('leave city'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n\n      c3: {\n        text: [\n          translate('street above the subway platform is blown away.'),\n          translate('lets some light down into the dusty haze.'),\n          translate('a sound comes from the tunnel, just ahead.'),\n        ],\n        buttons: {\n          enter: {\n            text: translate('investigate'),\n            cost: { torch: 1 },\n            nextScene: { 0.5: 'd2', 1: 'd3' },\n          },\n          leave: {\n            text: translate('leave city'),\n            nextScene: 'end',\n          },\n        },\n      },\n\n      c4: {\n        text: [\n          translate('looks like a camp of sorts up ahead.'),\n          /// TRANSLATORS : chainlink is a type of metal fence.\n          translate('rusted chainlink is pulled across an alleyway.'),\n          translate('fires burn in the courtyard beyond.'),\n        ],\n        buttons: {\n          enter: {\n            text: translate('continue'),\n            nextScene: { 0.5: 'd4', 1: 'd5' },\n          },\n          leave: {\n            text: translate('leave city'),\n            nextScene: 'end',\n          },\n        },\n      },\n\n      c5: {\n        text: [\n          translate('more voices can be heard ahead.'),\n          translate('they must be here for a reason.'),\n        ],\n        buttons: {\n          enter: {\n            text: translate('continue'),\n            nextScene: { 1: 'd5' },\n          },\n          leave: {\n            text: translate('leave city'),\n            nextScene: 'end',\n          },\n        },\n      },\n\n      c6: {\n        text: [\n          translate('the sound of gunfire carries on the wind.'),\n          translate('the street ahead glows with firelight.'),\n        ],\n        buttons: {\n          enter: {\n            text: translate('continue'),\n            nextScene: { 0.5: 'd5', 1: 'd6' },\n          },\n          leave: {\n            text: translate('leave city'),\n            nextScene: 'end',\n          },\n        },\n      },\n\n      c7: {\n        text: [\n          /// TRANSLATORS : squatters occupy abandoned dwellings they don't own.\n          translate('more squatters are crowding around now.'),\n          translate('someone throws a stone.'),\n        ],\n        buttons: {\n          enter: {\n            text: translate('continue'),\n            nextScene: { 0.5: 'd7', 1: 'd8' },\n          },\n          leave: {\n            text: translate('leave city'),\n            nextScene: 'end',\n          },\n        },\n      },\n\n      c8: {\n        text: [\n          translate('an improvised shop is set up on the sidewalk.'),\n          translate('the owner stands by, stoic.'),\n        ],\n        loot: {\n          steel_sword: {\n            min: 1,\n            max: 1,\n            chance: 0.8,\n          },\n          rifle: {\n            min: 1,\n            max: 1,\n            chance: 0.5,\n          },\n          bullets: {\n            min: 1,\n            max: 8,\n            chance: 0.25,\n          },\n          alien_alloy: {\n            min: 1,\n            max: 1,\n            chance: 0.01,\n          },\n          medicine: {\n            min: 1,\n            max: 4,\n            chance: 0.5,\n          },\n        },\n        buttons: {\n          enter: {\n            text: translate('continue'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: { 1: 'd8' },\n          },\n          leave: {\n            text: translate('leave city'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n\n      c9: {\n        text: [\n          translate('strips of meat hang drying by the side of the street.'),\n          translate('the people back away, avoiding eye contact.'),\n        ],\n        loot: {\n          cured_meat: {\n            min: 5,\n            max: 10,\n            chance: 1,\n          },\n        },\n        buttons: {\n          enter: {\n            text: translate('continue'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: { 0.5: 'd8', 1: 'd9' },\n          },\n          leave: {\n            text: translate('leave city'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n\n      c10: {\n        text: [\n          translate('someone has locked and barricaded the door to this operating theatre.'),\n        ],\n        buttons: {\n          enter: {\n            text: translate('continue'),\n            nextScene: { 0.2: 'end12', 0.6: 'd10', 1: 'd11' },\n          },\n          leave: {\n            text: translate('leave city'),\n            nextScene: 'end',\n          },\n        },\n      },\n\n      c11: {\n        notification: translate('a tribe of elderly squatters is camped out in this ward.'),\n        combat: true,\n        enemy: 'squatters',\n        plural: true,\n        chara: 'EEE',\n        damage: 2,\n        hit: 0.7,\n        attackDelay: 0.5,\n        health: 40,\n        loot: {\n          cured_meat: {\n            min: 1,\n            max: 3,\n            chance: 0.5,\n          },\n          cloth: {\n            min: 3,\n            max: 8,\n            chance: 0.8,\n          },\n          medicine: {\n            min: 1,\n            max: 3,\n            chance: 0.3,\n          },\n        },\n        buttons: {\n          continue: {\n            text: translate('continue'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: { 1: 'end10' },\n          },\n          leave: {\n            text: translate('leave city'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n\n      c12: {\n        notification: translate('a pack of lizards rounds the corner.'),\n        combat: true,\n        enemy: 'lizards',\n        plural: true,\n        chara: 'RRR',\n        damage: 4,\n        hit: 0.7,\n        attackDelay: 0.7,\n        health: 30,\n        loot: {\n          meat: {\n            min: 3,\n            max: 8,\n            chance: 1,\n          },\n          teeth: {\n            min: 2,\n            max: 4,\n            chance: 1,\n          },\n          scales: {\n            min: 3,\n            max: 5,\n            chance: 1,\n          },\n        },\n        buttons: {\n          continue: {\n            text: translate('continue'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: { 1: 'end10' },\n          },\n          leave: {\n            text: translate('leave city'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n\n      c13: {\n        text: [translate('strips of meat are hung up to dry in this ward.')],\n        loot: {\n          cured_meat: {\n            min: 3,\n            max: 10,\n            chance: 1,\n          },\n        },\n        buttons: {\n          continue: {\n            text: translate('continue'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: { 0.5: 'end10', 1: 'end11' },\n          },\n          leave: {\n            text: translate('leave city'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n\n      d1: {\n        notification: translate('a large bird nests at the top of the stairs.'),\n        combat: true,\n        enemy: 'bird',\n        chara: 'R',\n        damage: 5,\n        hit: 0.7,\n        attackDelay: 1,\n        health: 45,\n        loot: {\n          meat: {\n            min: 5,\n            max: 10,\n            chance: 0.8,\n          },\n        },\n        buttons: {\n          continue: {\n            text: translate('continue'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: { 0.5: 'end1', 1: 'end2' },\n          },\n          leave: {\n            text: translate('leave city'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n\n      d2: {\n        text: [\n          translate('the debris is denser here.'),\n          translate('maybe some useful stuff in the rubble.'),\n        ],\n        loot: {\n          bullets: {\n            min: 1,\n            max: 5,\n            chance: 0.5,\n          },\n          steel: {\n            min: 1,\n            max: 10,\n            chance: 0.8,\n          },\n          alien_alloy: {\n            min: 1,\n            max: 1,\n            chance: 0.01,\n          },\n          cloth: {\n            min: 1,\n            max: 10,\n            chance: 1,\n          },\n        },\n        buttons: {\n          continue: {\n            text: translate('continue'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: { 1: 'end2' },\n          },\n          leave: {\n            text: translate('leave city'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n\n      d3: {\n        notification: translate('a swarm of rats rushes up the tunnel.'),\n        combat: true,\n        enemy: 'rats',\n        plural: true,\n        chara: 'RRR',\n        damage: 1,\n        hit: 0.8,\n        attackDelay: 0.25,\n        health: 60,\n        loot: {\n          fur: {\n            min: 5,\n            max: 10,\n            chance: 0.8,\n          },\n          teeth: {\n            min: 5,\n            max: 10,\n            chance: 0.5,\n          },\n        },\n        buttons: {\n          continue: {\n            text: translate('continue'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: { 0.5: 'end2', 1: 'end3' },\n          },\n          leave: {\n            text: translate('leave city'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n\n      d4: {\n        notification: translate('a large man attacks, waving a bayonet.'),\n        combat: true,\n        enemy: 'veteran',\n        chara: 'D',\n        damage: 6,\n        hit: 0.8,\n        attackDelay: 2,\n        health: 45,\n        loot: {\n          bayonet: {\n            min: 1,\n            max: 1,\n            chance: 0.5,\n          },\n          cured_meat: {\n            min: 1,\n            max: 5,\n            chance: 0.8,\n          },\n        },\n        buttons: {\n          continue: {\n            text: translate('continue'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: { 0.5: 'end4', 1: 'end5' },\n          },\n          leave: {\n            text: translate('leave city'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n\n      d5: {\n        notification: translate('a second soldier opens fire.'),\n        combat: true,\n        enemy: 'soldier',\n        ranged: true,\n        chara: 'D',\n        damage: 8,\n        hit: 0.8,\n        attackDelay: 2,\n        health: 50,\n        loot: {\n          cured_meat: {\n            min: 1,\n            max: 5,\n            chance: 0.8,\n          },\n          bullets: {\n            min: 1,\n            max: 5,\n            chance: 0.5,\n          },\n          rifle: {\n            min: 1,\n            max: 1,\n            chance: 0.2,\n          },\n        },\n        buttons: {\n          continue: {\n            text: translate('continue'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: { 1: 'end5' },\n          },\n          leave: {\n            text: translate('leave city'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n\n      d6: {\n        notification: translate('a masked soldier rounds the corner, gun drawn'),\n        combat: true,\n        enemy: 'commando',\n        chara: 'D',\n        ranged: true,\n        damage: 3,\n        hit: 0.9,\n        attackDelay: 2,\n        health: 55,\n        loot: {\n          rifle: {\n            min: 1,\n            max: 1,\n            chance: 0.5,\n          },\n          bullets: {\n            min: 1,\n            max: 5,\n            chance: 0.8,\n          },\n          cured_meat: {\n            min: 1,\n            max: 5,\n            chance: 0.8,\n          },\n        },\n        buttons: {\n          continue: {\n            text: translate('continue'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: { 0.5: 'end5', 1: 'end6' },\n          },\n          leave: {\n            text: translate('leave city'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n\n      d7: {\n        notification: translate('the crowd surges forward.'),\n        combat: true,\n        enemy: 'squatters',\n        plural: true,\n        chara: 'EEE',\n        damage: 2,\n        hit: 0.7,\n        attackDelay: 0.5,\n        health: 40,\n        loot: {\n          cloth: {\n            min: 1,\n            max: 5,\n            chance: 0.8,\n          },\n          teeth: {\n            min: 1,\n            max: 5,\n            chance: 0.5,\n          },\n        },\n        buttons: {\n          continue: {\n            text: translate('continue'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: { 0.5: 'end7', 1: 'end8' },\n          },\n          leave: {\n            text: translate('leave city'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n\n      d8: {\n        notification: translate('a youth lashes out with a tree branch.'),\n        combat: true,\n        enemy: 'youth',\n        chara: 'E',\n        damage: 2,\n        hit: 0.7,\n        attackDelay: 1,\n        health: 45,\n        loot: {\n          cloth: {\n            min: 1,\n            max: 5,\n            chance: 0.8,\n          },\n          teeth: {\n            min: 1,\n            max: 5,\n            chance: 0.5,\n          },\n        },\n        buttons: {\n          continue: {\n            text: translate('continue'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: { 1: 'end8' },\n          },\n          leave: {\n            text: translate('leave city'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n\n      d9: {\n        notification: translate('a squatter stands firmly in the doorway of a small hut.'),\n        combat: true,\n        enemy: 'squatter',\n        chara: 'E',\n        damage: 3,\n        hit: 0.8,\n        attackDelay: 2,\n        health: 20,\n        loot: {\n          cloth: {\n            min: 1,\n            max: 5,\n            chance: 0.8,\n          },\n          teeth: {\n            min: 1,\n            max: 5,\n            chance: 0.5,\n          },\n        },\n        buttons: {\n          continue: {\n            text: translate('continue'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: { 0.5: 'end8', 1: 'end9' },\n          },\n          leave: {\n            text: translate('leave city'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n\n      d10: {\n        notification: translate('behind the door, a deformed figure awakes and attacks.'),\n        combat: true,\n        enemy: 'deformed',\n        chara: 'T',\n        damage: 8,\n        hit: 0.6,\n        attackDelay: 2,\n        health: 40,\n        loot: {\n          cloth: {\n            min: 1,\n            max: 5,\n            chance: 0.8,\n          },\n          teeth: {\n            min: 2,\n            max: 2,\n            chance: 1,\n          },\n          steel: {\n            min: 1,\n            max: 3,\n            chance: 0.6,\n          },\n          scales: {\n            min: 2,\n            max: 3,\n            chance: 0.1,\n          },\n        },\n        buttons: {\n          continue: {\n            text: translate('continue'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: { 1: 'end14' },\n          },\n        },\n      },\n\n      d11: {\n        notification: translate('as soon as the door is open a little bit, hundreds of tentacles erupt.'),\n        combat: true,\n        enemy: 'tentacles',\n        plural: true,\n        chara: 'TTT',\n        damage: 2,\n        hit: 0.6,\n        attackDelay: 0.5,\n        health: 60,\n        loot: {\n          meat: {\n            min: 10,\n            max: 20,\n            chance: 1,\n          },\n        },\n        buttons: {\n          continue: {\n            text: translate('continue'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: { 1: 'end13' },\n          },\n        },\n      },\n\n      end1: {\n        text: [\n          translate('bird must have liked shiney things.'),\n          translate('some good stuff woven into its nest.'),\n        ],\n        onLoad: function(engine) {\n          engine.spaces.World.clearDungeon();\n          engine.dispatch(\n            engine.actions.game.city.setM({\n              cleared: true,\n            })\n          );\n        },\n        loot: {\n          bullets: {\n            min: 5,\n            max: 10,\n            chance: 0.8,\n          },\n          bolas: {\n            min: 1,\n            max: 5,\n            chance: 0.5,\n          },\n          alien_alloy: {\n            min: 1,\n            max: 1,\n            chance: 0.5,\n          },\n        },\n        buttons: {\n          leave: {\n            text: translate('leave city'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n\n      end2: {\n        text: [\n          translate('not much here.'),\n          translate('scavengers must have gotten to this place already.'),\n        ],\n        onLoad: function(engine) {\n          engine.spaces.World.clearDungeon();\n          engine.dispatch(\n            engine.actions.game.city.setM({\n              cleared: true,\n            })\n          );\n        },\n        loot: {\n          torch: {\n            min: 1,\n            max: 5,\n            chance: 0.8,\n          },\n          cured_meat: {\n            min: 1,\n            max: 5,\n            chance: 0.5,\n          },\n        },\n        buttons: {\n          leave: {\n            text: translate('leave city'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n\n      end3: {\n        text: [\n          /// TRANSLATORS : a platform in the subway\n          translate('the tunnel opens up at another platform.'),\n          translate('the walls are scorched from an old battle.'),\n          translate('bodies and supplies from both sides litter the ground.'),\n        ],\n        onLoad: function(engine) {\n          engine.spaces.World.clearDungeon();\n          engine.dispatch(\n            engine.actions.game.city.setM({\n              cleared: true,\n            })\n          );\n        },\n        loot: {\n          rifle: {\n            min: 1,\n            max: 1,\n            chance: 0.8,\n          },\n          bullets: {\n            min: 1,\n            max: 5,\n            chance: 0.8,\n          },\n          laser_rifle: {\n            min: 1,\n            max: 1,\n            chance: 0.3,\n          },\n          energy_cell: {\n            min: 1,\n            max: 5,\n            chance: 0.3,\n          },\n          alien_alloy: {\n            min: 1,\n            max: 1,\n            chance: 0.3,\n          },\n        },\n        buttons: {\n          leave: {\n            text: translate('leave city'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n\n      end4: {\n        text: [\n          translate('the small military outpost is well supplied.'),\n          translate('arms and munitions, relics from the war, are neatly arranged on the store-room floor.'),\n          translate('just as deadly now as they were then.'),\n        ],\n        onLoad: function(engine) {\n          engine.spaces.World.clearDungeon();\n          engine.dispatch(\n            engine.actions.game.city.setM({\n              cleared: true,\n            })\n          );\n        },\n        loot: {\n          rifle: {\n            min: 1,\n            max: 1,\n            chance: 1,\n          },\n          bullets: {\n            min: 1,\n            max: 10,\n            chance: 1,\n          },\n          grenade: {\n            min: 1,\n            max: 5,\n            chance: 0.8,\n          },\n        },\n        buttons: {\n          leave: {\n            text: translate('leave city'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n\n      end5: {\n        text: [\n          translate('searching the bodies yields a few supplies.'),\n          translate('more soldiers will be on their way.'),\n          translate('time to move on.'),\n        ],\n        onLoad: function(engine) {\n          engine.spaces.World.clearDungeon();\n          engine.dispatch(\n            engine.actions.game.city.setM({\n              cleared: true,\n            })\n          );\n        },\n        loot: {\n          rifle: {\n            min: 1,\n            max: 1,\n            chance: 1,\n          },\n          bullets: {\n            min: 1,\n            max: 10,\n            chance: 1,\n          },\n          cured_meat: {\n            min: 1,\n            max: 5,\n            chance: 0.8,\n          },\n          medicine: {\n            min: 1,\n            max: 4,\n            chance: 0.1,\n          },\n        },\n        buttons: {\n          leave: {\n            text: translate('leave city'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n\n      end6: {\n        text: [\n          translate('the small settlement has clearly been burning a while.'),\n          translate('the bodies of the wanderers that lived here are still visible in the flames.'),\n          translate('still time to rescue a few supplies.'),\n        ],\n        onLoad: function(engine) {\n          engine.spaces.World.clearDungeon();\n          engine.dispatch(\n            engine.actions.game.city.setM({\n              cleared: true,\n            })\n          );\n        },\n        loot: {\n          laser_rifle: {\n            min: 1,\n            max: 1,\n            chance: 0.5,\n          },\n          energy_cell: {\n            min: 1,\n            max: 5,\n            chance: 0.5,\n          },\n          cured_meat: {\n            min: 1,\n            max: 10,\n            chance: 1,\n          },\n        },\n        buttons: {\n          leave: {\n            text: translate('leave city'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n\n      end7: {\n        text: [\n          translate('the remaining settlers flee from the violence, their belongings forgotten.'),\n          translate(\"there's not much, but some useful things can still be found.\"),\n        ],\n        onLoad: function(engine) {\n          engine.spaces.World.clearDungeon();\n          engine.dispatch(\n            engine.actions.game.city.setM({\n              cleared: true,\n            })\n          );\n        },\n        loot: {\n          steel_sword: {\n            min: 1,\n            max: 1,\n            chance: 0.8,\n          },\n          energy_cell: {\n            min: 1,\n            max: 5,\n            chance: 0.5,\n          },\n          cured_meat: {\n            min: 1,\n            max: 10,\n            chance: 1,\n          },\n        },\n        buttons: {\n          leave: {\n            text: translate('leave city'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n\n      end8: {\n        text: [\n          translate('the young settler was carrying a canvas sack.'),\n          translate('it contains travelling gear, and a few trinkets.'),\n          translate(\"there's nothing else here.\"),\n        ],\n        onLoad: function(engine) {\n          engine.spaces.World.clearDungeon();\n          engine.dispatch(\n            engine.actions.game.city.setM({\n              cleared: true,\n            })\n          );\n        },\n        loot: {\n          steel_sword: {\n            min: 1,\n            max: 1,\n            chance: 0.8,\n          },\n          bolas: {\n            min: 1,\n            max: 5,\n            chance: 0.5,\n          },\n          cured_meat: {\n            min: 1,\n            max: 10,\n            chance: 1,\n          },\n        },\n        buttons: {\n          leave: {\n            text: translate('leave city'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n\n      end9: {\n        text: [\n          translate('inside the hut, a child cries.'),\n          translate('a few belongings rest against the walls.'),\n          translate(\"there's nothing else here.\"),\n        ],\n        onLoad: function(engine) {\n          engine.spaces.World.clearDungeon();\n          engine.dispatch(\n            engine.actions.game.city.setM({\n              cleared: true,\n            })\n          );\n        },\n        loot: {\n          rifle: {\n            min: 1,\n            max: 1,\n            chance: 0.8,\n          },\n          bullets: {\n            min: 1,\n            max: 5,\n            chance: 0.8,\n          },\n          bolas: {\n            min: 1,\n            max: 5,\n            chance: 0.5,\n          },\n          alien_alloy: {\n            min: 1,\n            max: 1,\n            chance: 0.2,\n          },\n        },\n        buttons: {\n          leave: {\n            text: translate('leave city'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n\n      end10: {\n        text: [\n          translate('the stench of rot and death fills the operating theatres.'),\n          translate('a few items are scattered on the ground.'),\n          translate('there is nothing else here.'),\n        ],\n        onLoad: function(engine) {\n          engine.spaces.World.clearDungeon();\n          engine.dispatch(\n            engine.actions.game.city.setM({\n              cleared: true,\n            })\n          );\n        },\n        loot: {\n          energy_cell: {\n            min: 1,\n            max: 1,\n            chance: 0.3,\n          },\n          medicine: {\n            min: 1,\n            max: 5,\n            chance: 0.3,\n          },\n          teeth: {\n            min: 3,\n            max: 8,\n            chance: 1,\n          },\n          scales: {\n            min: 4,\n            max: 7,\n            chance: 0.9,\n          },\n        },\n        buttons: {\n          leave: {\n            text: translate('leave city'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n\n      end11: {\n        text: [\n          translate('a pristine medicine cabinet at the end of a hallway.'),\n          translate('the rest of the hospital is empty.'),\n        ],\n        onLoad: function(engine) {\n          engine.spaces.World.clearDungeon();\n          engine.dispatch(\n            engine.actions.game.city.setM({\n              cleared: true,\n            })\n          );\n        },\n        loot: {\n          energy_cell: {\n            min: 1,\n            max: 1,\n            chance: 0.2,\n          },\n          medicine: {\n            min: 3,\n            max: 10,\n            chance: 1,\n          },\n          teeth: {\n            min: 1,\n            max: 2,\n            chance: 0.2,\n          },\n        },\n        buttons: {\n          leave: {\n            text: translate('leave city'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n\n      end12: {\n        text: [translate('someone had been stockpiling loot here.')],\n        onLoad: function(engine) {\n          engine.spaces.World.clearDungeon();\n          engine.dispatch(\n            engine.actions.game.city.setM({\n              cleared: true,\n            })\n          );\n        },\n        loot: {\n          energy_cell: {\n            min: 1,\n            max: 3,\n            chance: 0.2,\n          },\n          medicine: {\n            min: 3,\n            max: 10,\n            chance: 0.5,\n          },\n          bullets: {\n            min: 2,\n            max: 8,\n            chance: 1,\n          },\n          torch: {\n            min: 1,\n            max: 3,\n            chance: 0.5,\n          },\n          grenade: {\n            min: 1,\n            max: 1,\n            chance: 0.5,\n          },\n          alien_alloy: {\n            min: 1,\n            max: 2,\n            chance: 0.8,\n          },\n        },\n        buttons: {\n          leave: {\n            text: translate('leave city'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n\n      end13: {\n        text: [\n          translate('the tentacular horror is defeated.'),\n          translate('inside, the remains of its victims are everywhere.'),\n        ],\n        onLoad: function(engine) {\n          engine.spaces.World.clearDungeon();\n          engine.dispatch(\n            engine.actions.game.city.setM({\n              cleared: true,\n            })\n          );\n        },\n        loot: {\n          steel_sword: {\n            min: 1,\n            max: 3,\n            chance: 0.5,\n          },\n          rifle: {\n            min: 1,\n            max: 2,\n            chance: 0.3,\n          },\n          teeth: {\n            min: 2,\n            max: 8,\n            chance: 1,\n          },\n          cloth: {\n            min: 3,\n            max: 6,\n            chance: 0.5,\n          },\n          alien_alloy: {\n            min: 1,\n            max: 1,\n            chance: 0.1,\n          },\n        },\n        buttons: {\n          leave: {\n            text: translate('leave city'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n\n      end14: {\n        text: [\n          /// TRANSLATORS : warped means extremely disfigured.\n          translate('the warped man lies dead.'),\n          translate('the operating theatre has a lot of curious equipment.'),\n        ],\n        onLoad: function(engine) {\n          engine.spaces.World.clearDungeon();\n          engine.dispatch(\n            engine.actions.game.city.setM({\n              cleared: true,\n            })\n          );\n        },\n        loot: {\n          energy_cell: {\n            min: 2,\n            max: 5,\n            chance: 0.8,\n          },\n          medicine: {\n            min: 3,\n            max: 12,\n            chance: 1,\n          },\n          cloth: {\n            min: 1,\n            max: 3,\n            chance: 0.5,\n          },\n          steel: {\n            min: 2,\n            max: 3,\n            chance: 0.3,\n          },\n          alien_alloy: {\n            min: 1,\n            max: 1,\n            chance: 0.3,\n          },\n        },\n        buttons: {\n          leave: {\n            text: translate('leave city'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n\n      end15: {\n        text: [translate('the old man had a small cache of interesting items.')],\n        onLoad: function(engine) {\n          engine.spaces.World.clearDungeon();\n          engine.dispatch(\n            engine.actions.game.city.setM({\n              cleared: true,\n            })\n          );\n        },\n        loot: {\n          alien_alloy: {\n            min: 1,\n            max: 1,\n            chance: 0.8,\n          },\n          medicine: {\n            min: 1,\n            max: 4,\n            chance: 1,\n          },\n          cured_meat: {\n            min: 3,\n            max: 7,\n            chance: 1,\n          },\n          bolas: {\n            min: 1,\n            max: 3,\n            chance: 0.5,\n          },\n          fur: {\n            min: 1,\n            max: 5,\n            chance: 0.8,\n          },\n        },\n        buttons: {\n          leave: {\n            text: translate('leave city'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n    },\n  },\n  house: {\n    /* Abandoned House */\n    title: translate('An Old House'),\n    id: 'house',\n    scenes: {\n      start: {\n        text: [\n          translate('an old house remains here, once white siding yellowed and peeling.'),\n          translate('the door hangs open.'),\n        ],\n        notification: translate('the remains of an old house stand as a monument to simpler times'),\n        buttons: {\n          enter: {\n            text: translate('go inside'),\n            nextScene: { 0.25: 'medicine', 0.5: 'supplies', 1: 'occupied' },\n          },\n          leave: {\n            text: translate('leave'),\n            nextScene: 'end',\n          },\n        },\n      },\n      supplies: {\n        text: [\n          translate('the house is abandoned, but not yet picked over.'),\n          translate('still a few drops of water in the old well.'),\n        ],\n        onLoad: function(engine) {\n          const state = engine.getState();\n          const curPos = state.game.world.curPos;\n          engine.spaces.World.markVisited(curPos[0], curPos[1]);\n          engine.spaces.World.setWater(engine.spaces.World.getMaxWater());\n          engine.notify(translate('water replenished'));\n        },\n        loot: {\n          cured_meat: {\n            min: 1,\n            max: 10,\n            chance: 0.8,\n          },\n          leather: {\n            min: 1,\n            max: 10,\n            chance: 0.2,\n          },\n          cloth: {\n            min: 1,\n            max: 10,\n            chance: 0.5,\n          },\n        },\n        buttons: {\n          leave: {\n            text: translate('leave'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n      medicine: {\n        text: [\n          translate('the house has been ransacked.'),\n          translate('but there is a cache of medicine under the floorboards.'),\n        ],\n        onLoad: function(engine) {\n          const state = engine.getState();\n          const curPos = state.game.world.curPos;\n          engine.spaces.World.markVisited(curPos[0], curPos[1]);\n        },\n        loot: {\n          medicine: {\n            min: 2,\n            max: 5,\n            chance: 1,\n          },\n        },\n        buttons: {\n          leave: {\n            text: translate('leave'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n      occupied: {\n        combat: true,\n        enemy: 'squatter',\n        chara: 'E',\n        damage: 3,\n        hit: 0.8,\n        attackDelay: 2,\n        health: 10,\n        notification: translate('a man charges down the hall, a rusty blade in his hand'),\n        onLoad: function(engine) {\n          const state = engine.getState();\n          const curPos = state.game.world.curPos;\n          engine.spaces.World.markVisited(curPos[0], curPos[1]);\n        },\n        loot: {\n          cured_meat: {\n            min: 1,\n            max: 10,\n            chance: 0.8,\n          },\n          leather: {\n            min: 1,\n            max: 10,\n            chance: 0.2,\n          },\n          cloth: {\n            min: 1,\n            max: 10,\n            chance: 0.5,\n          },\n        },\n        buttons: {\n          leave: {\n            text: translate('leave'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n    },\n  },\n  battlefield: {\n    /* Discovering an old battlefield */\n    title: translate('A Forgotten Battlefield'),\n    id: 'battlefield',\n    scenes: {\n      start: {\n        text: [\n          translate('a battle was fought here, long ago.'),\n          translate('battered technology from both sides lays dormant on the blasted landscape.'),\n        ],\n        onLoad: function(engine) {\n          const state = engine.getState();\n          const curPos = state.game.world.curPos;\n          engine.spaces.World.markVisited(curPos[0], curPos[1]);\n        },\n        loot: {\n          rifle: {\n            min: 1,\n            max: 3,\n            chance: 0.5,\n          },\n          bullets: {\n            min: 5,\n            max: 20,\n            chance: 0.8,\n          },\n          laser_rifle: {\n            min: 1,\n            max: 3,\n            chance: 0.3,\n          },\n          energy_cell: {\n            min: 5,\n            max: 10,\n            chance: 0.5,\n          },\n          grenade: {\n            min: 1,\n            max: 5,\n            chance: 0.5,\n          },\n          alien_alloy: {\n            min: 1,\n            max: 1,\n            chance: 0.3,\n          },\n        },\n        buttons: {\n          leave: {\n            text: translate('leave'),\n\n            nextScene: 'end',\n          },\n        },\n      },\n    },\n  },\n  borehole: {\n    /* Admiring a huge borehole */\n    title: translate('A Huge Borehole'),\n    id: 'borehole',\n    scenes: {\n      start: {\n        text: [\n          translate('a huge hole is cut deep into the earth, evidence of the past harvest.'),\n          translate('they took what they came for, and left.'),\n          translate('castoff from the mammoth drills can still be found by the edges of the precipice.'),\n        ],\n        onLoad: function(engine) {\n          const state = engine.getState();\n          const curPos = state.game.world.curPos;\n          engine.spaces.World.markVisited(curPos[0], curPos[1]);\n        },\n        loot: {\n          alien_alloy: {\n            min: 1,\n            max: 3,\n            chance: 1,\n          },\n        },\n        buttons: {\n          leave: {\n            text: translate('leave'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n    },\n  },\n  ship: {\n    /* Finding a way off this rock */\n    title: translate('A Crashed Ship'),\n    id: 'ship',\n    scenes: {\n      start: {\n        onLoad: async function(engine) {\n          const state = engine.getState();\n          const curPos = state.game.world.curPos;\n          await engine.spaces.World.markVisited(curPos[0], curPos[1]);\n          await engine.spaces.World.drawRoad();\n          await engine.dispatch(\n            engine.actions.features.location.enableSpaceShip()\n          );\n        },\n        text: [\n          translate('the familiar curves of a wanderer vessel rise up out of the dust and ash. '),\n          translate(\"lucky that the natives can't work the mechanisms.\"),\n          translate('with a little effort, it might fly again.'),\n        ],\n        buttons: {\n          leavel: {\n            text: translate('salvage'),\n            nextScene: 'end',\n          },\n        },\n      },\n    },\n  },\n  sulphurmine: {\n    /* Clearing the Sulphur Mine */\n    title: translate('The Sulphur Mine'),\n    id: 'sulphurmine',\n    scenes: {\n      start: {\n        text: [\n          translate(\"the military is already set up at the mine's entrance.\"),\n          translate('soldiers patrol the perimeter, rifles slung over their shoulders.'),\n        ],\n        notification: translate('a military perimeter is set up around the mine.'),\n        buttons: {\n          attack: {\n            text: translate('attack'),\n            nextScene: { 1: 'a1' },\n          },\n          leave: {\n            text: translate('leave'),\n            nextScene: 'end',\n          },\n        },\n      },\n      a1: {\n        combat: true,\n        enemy: 'soldier',\n        ranged: true,\n        chara: 'D',\n        damage: 8,\n        hit: 0.8,\n        attackDelay: 2,\n        health: 50,\n        loot: {\n          cured_meat: {\n            min: 1,\n            max: 5,\n            chance: 0.8,\n          },\n          bullets: {\n            min: 1,\n            max: 5,\n            chance: 0.5,\n          },\n          rifle: {\n            min: 1,\n            max: 1,\n            chance: 0.2,\n          },\n        },\n        notification: translate('a soldier, alerted, opens fire.'),\n        buttons: {\n          continue: {\n            text: translate('continue'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: { 1: 'a2' },\n          },\n          run: {\n            text: translate('run'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n      a2: {\n        combat: true,\n        enemy: 'soldier',\n        ranged: true,\n        chara: 'D',\n        damage: 8,\n        hit: 0.8,\n        attackDelay: 2,\n        health: 50,\n        loot: {\n          cured_meat: {\n            min: 1,\n            max: 5,\n            chance: 0.8,\n          },\n          bullets: {\n            min: 1,\n            max: 5,\n            chance: 0.5,\n          },\n          rifle: {\n            min: 1,\n            max: 1,\n            chance: 0.2,\n          },\n        },\n        notification: translate('a second soldier joins the fight.'),\n        buttons: {\n          continue: {\n            text: translate('continue'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: { 1: 'a3' },\n          },\n          run: {\n            text: translate('run'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n      a3: {\n        combat: true,\n        enemy: 'veteran',\n        chara: 'D',\n        damage: 10,\n        hit: 0.8,\n        attackDelay: 2,\n        health: 65,\n        loot: {\n          bayonet: {\n            min: 1,\n            max: 1,\n            chance: 0.5,\n          },\n          cured_meat: {\n            min: 1,\n            max: 5,\n            chance: 0.8,\n          },\n        },\n        notification: translate('a grizzled soldier attacks, waving a bayonet.'),\n        buttons: {\n          continue: {\n            text: translate('continue'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: { 1: 'cleared' },\n          },\n        },\n      },\n      cleared: {\n        text: [\n          translate('the military presence has been cleared.'),\n          translate('the mine is now safe for workers.'),\n        ],\n        notification: translate('the sulphur mine is clear of dangers'),\n        onLoad: async function(engine) {\n          const state = engine.getState();\n          const curPos = state.game.world.curPos;\n\n          await engine.spaces.World.drawRoad();\n          await engine.dispatch(\n            engine.actions.game.world.setM({\n              sulphurmine: true,\n            })\n          );\n          await engine.spaces.World.markVisited(curPos[0], curPos[1]);\n        },\n        buttons: {\n          leave: {\n            text: translate('leave'),\n            nextScene: 'end',\n          },\n        },\n      },\n    },\n  },\n  coalmine: {\n    /* Clearing the Coal Mine */\n    title: translate('The Coal Mine'),\n    id: 'coalmine',\n    scenes: {\n      start: {\n        text: [\n          translate('camp fires burn by the entrance to the mine.'),\n          translate('men mill about, weapons at the ready.'),\n        ],\n        notification: translate('this old mine is not abandoned'),\n        buttons: {\n          attack: {\n            text: translate('attack'),\n            nextScene: { 1: 'a1' },\n          },\n          leave: {\n            text: translate('leave'),\n            nextScene: 'end',\n          },\n        },\n      },\n      a1: {\n        combat: true,\n        enemy: 'man',\n        chara: 'E',\n        damage: 3,\n        hit: 0.8,\n        attackDelay: 2,\n        health: 10,\n        loot: {\n          cured_meat: {\n            min: 1,\n            max: 5,\n            chance: 0.8,\n          },\n          cloth: {\n            min: 1,\n            max: 5,\n            chance: 0.8,\n          },\n        },\n        notification: translate('a man joins the fight'),\n        buttons: {\n          continue: {\n            text: translate('continue'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: { 1: 'a2' },\n          },\n          run: {\n            text: translate('run'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n      a2: {\n        combat: true,\n        enemy: 'man',\n        chara: 'E',\n        damage: 3,\n        hit: 0.8,\n        attackDelay: 2,\n        health: 10,\n        loot: {\n          cured_meat: {\n            min: 1,\n            max: 5,\n            chance: 0.8,\n          },\n          cloth: {\n            min: 1,\n            max: 5,\n            chance: 0.8,\n          },\n        },\n        notification: translate('a man joins the fight'),\n        buttons: {\n          continue: {\n            text: translate('continue'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: { 1: 'a3' },\n          },\n          run: {\n            text: translate('run'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: 'end',\n          },\n        },\n      },\n      a3: {\n        combat: true,\n        enemy: 'chief',\n        chara: 'D',\n        damage: 5,\n        hit: 0.8,\n        attackDelay: 2,\n        health: 20,\n        loot: {\n          cured_meat: {\n            min: 5,\n            max: 10,\n            chance: 1,\n          },\n          cloth: {\n            min: 5,\n            max: 10,\n            chance: 0.8,\n          },\n          iron: {\n            min: 1,\n            max: 5,\n            chance: 0.8,\n          },\n        },\n        notification: translate('only the chief remains.'),\n        buttons: {\n          continue: {\n            text: translate('continue'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: { 1: 'cleared' },\n          },\n        },\n      },\n      cleared: {\n        text: [\n          translate('the camp is still, save for the crackling of the fires.'),\n          translate('the mine is now safe for workers.'),\n        ],\n        notification: translate('the coal mine is clear of dangers'),\n        onLoad: async function(engine) {\n          const state = engine.getState();\n          const curPos = state.game.world.curPos;\n\n          await engine.spaces.World.drawRoad();\n          await engine.dispatch(\n            engine.actions.game.world.setM({\n              coalmine: true,\n            })\n          );\n          await engine.spaces.World.markVisited(curPos[0], curPos[1]);\n        },\n        buttons: {\n          leave: {\n            text: translate('leave'),\n            nextScene: 'end',\n          },\n        },\n      },\n    },\n  },\n  ironmine: {\n    /* Clearing the Iron Mine */\n    title: translate('The Iron Mine'),\n    id: 'ironmine',\n    scenes: {\n      start: {\n        text: [\n          translate('an old iron mine sits here, tools abandoned and left to rust.'),\n          translate('bleached bones are strewn about the entrance. many, deeply scored with jagged grooves.'),\n          translate('feral howls echo out of the darkness.'),\n        ],\n        notification: translate('the path leads to an abandoned mine'),\n        buttons: {\n          enter: {\n            text: translate('go inside'),\n            nextScene: { 1: 'enter' },\n            cost: { torch: 1 },\n          },\n          leave: {\n            text: translate('leave'),\n            nextScene: 'end',\n          },\n        },\n      },\n      enter: {\n        combat: true,\n        enemy: 'beastly matriarch',\n        chara: 'T',\n        damage: 4,\n        hit: 0.8,\n        attackDelay: 2,\n        health: 10,\n        loot: {\n          teeth: {\n            min: 5,\n            max: 10,\n            chance: 1,\n          },\n          scales: {\n            min: 5,\n            max: 10,\n            chance: 0.8,\n          },\n          cloth: {\n            min: 5,\n            max: 10,\n            chance: 0.5,\n          },\n        },\n        notification: translate('a large creature lunges, muscles rippling in the torchlight'),\n        buttons: {\n          leave: {\n            text: translate('leave'),\n            cooldown: config.Event.LEAVE_COOLDOWN,\n            nextScene: { 1: 'cleared' },\n          },\n        },\n      },\n      cleared: {\n        text: [\n          translate('the beast is dead.'),\n          translate('the mine is now safe for workers.'),\n        ],\n        notification: translate('the iron mine is clear of dangers'),\n        onLoad: async function(engine) {\n          const state = engine.getState();\n          const curPos = state.game.world.curPos;\n\n          await engine.spaces.World.drawRoad();\n          await engine.dispatch(\n            engine.actions.game.world.setM({\n              ironmine: true,\n            })\n          );\n          await engine.spaces.World.markVisited(curPos[0], curPos[1]);\n        },\n        buttons: {\n          leave: {\n            text: translate('leave'),\n            nextScene: 'end',\n          },\n        },\n      },\n    },\n  },\n\n  cache: {\n    /* Cache - contains some of supplies from previous game */\n    title: translate('A Destroyed Village'),\n    id: 'cache',\n    scenes: {\n      start: {\n        text: [\n          translate('a destroyed village lies in the dust.'),\n          translate('charred bodies litter the ground.'),\n        ],\n        /// TRANSLATORS : tang = strong metallic smell, wanderer afterburner = ship's engines\n        notification: translate('the metallic tang of wanderer afterburner hangs in the air.'),\n        buttons: {\n          enter: {\n            text: translate('enter'),\n            nextScene: { 1: 'underground' },\n          },\n          leave: {\n            text: translate('leave'),\n            nextScene: 'end',\n          },\n        },\n      },\n      underground: {\n        text: [\n          translate('a shack stands at the center of the village.'),\n          translate('there are still supplies inside.'),\n        ],\n        buttons: {\n          take: {\n            text: translate('take'),\n            nextScene: { 1: 'exit' },\n          },\n        },\n      },\n      exit: {\n        text: [\n          translate('all the work of a previous generation is here.'),\n          translate('ripe for the picking.'),\n        ],\n        onLoad: function(engine) {\n          const state = engine.getState();\n          const curPos = state.game.world.curPos;\n\n          engine.spaces.World.markVisited(curPos[0], curPos[1]);\n          engine.prestige.collectStores();\n        },\n        buttons: {\n          leave: {\n            text: translate('leave'),\n            nextScene: 'end',\n          },\n        },\n      },\n    },\n  },\n};\n\nexport default events;\n","import translate from '../translate';\nimport { Event } from '../type';\nimport config from '../config';\n\nconst events: Event[] = [\n  {\n    title: translate('A Snarling Beast'),\n    isAvailable: function(_, engine) {\n      return engine.spaces.World.getDistance() <= 10 && engine.spaces.World.getTerrain() === config.World.TILE.FOREST;\n    },\n    scenes: {\n      start: {\n        combat: true,\n        enemy: 'snarling beast',\n        enemyName: translate('snarling beast'),\n        deathMessage: translate('the snarling beast is dead'),\n        chara: 'R',\n        damage: 1,\n        hit: 0.8,\n        attackDelay: 1,\n        health: 5,\n        loot: {\n          fur: {\n            min: 1,\n            max: 3,\n            chance: 1,\n          },\n          meat: {\n            min: 1,\n            max: 3,\n            chance: 1,\n          },\n          teeth: {\n            min: 1,\n            max: 3,\n            chance: 0.8,\n          },\n        },\n        notification: translate('a snarling beast leaps out of the underbrush'),\n      },\n    },\n  },\n  {\n    title: translate('A Gaunt Man'),\n    isAvailable: function(_, engine) {\n      return engine.spaces.World.getDistance() <= 10 && engine.spaces.World.getTerrain() === config.World.TILE.BARRENS;\n    },\n    scenes: {\n      start: {\n        combat: true,\n        enemy: 'gaunt man',\n        enemyName: translate('gaunt man'),\n        deathMessage: translate('the gaunt man is dead'),\n        chara: 'E',\n        damage: 2,\n        hit: 0.8,\n        attackDelay: 2,\n        health: 6,\n        loot: {\n          cloth: {\n            min: 1,\n            max: 3,\n            chance: 0.8,\n          },\n          teeth: {\n            min: 1,\n            max: 2,\n            chance: 0.8,\n          },\n          leather: {\n            min: 1,\n            max: 2,\n            chance: 0.5,\n          },\n        },\n        notification: translate('a gaunt man approaches, a crazed look in his eye'),\n      },\n    },\n  },\n  {\n    title: translate('A Strange Bird'),\n    isAvailable: function(_, engine) {\n      return engine.spaces.World.getDistance() <= 10 && engine.spaces.World.getTerrain() === config.World.TILE.FIELD;\n    },\n    scenes: {\n      start: {\n        combat: true,\n        enemy: 'strange bird',\n        enemyName: translate('strange bird'),\n        deathMessage: translate('the strange bird is dead'),\n        chara: 'R',\n        damage: 3,\n        hit: 0.8,\n        attackDelay: 2,\n        health: 4,\n        loot: {\n          scales: {\n            min: 1,\n            max: 3,\n            chance: 0.8,\n          },\n          teeth: {\n            min: 1,\n            max: 2,\n            chance: 0.5,\n          },\n          meat: {\n            min: 1,\n            max: 3,\n            chance: 0.8,\n          },\n        },\n        notification: translate('a strange looking bird speeds across the plains'),\n      },\n    },\n  },\n  {\n    title: translate('A Shivering Man'),\n    isAvailable: function(_, engine) {\n      const distance = engine.spaces.World.getDistance();\n      return distance > 10 && distance <= 20 && engine.spaces.World.getTerrain() === config.World.TILE.BARRENS;\n    },\n    scenes: {\n      start: {\n        combat: true,\n        enemy: 'shivering man',\n        enemyName: translate('shivering man'),\n        deathMessage: translate('the shivering man is dead'),\n        chara: 'E',\n        damage: 5,\n        hit: 0.5,\n        attackDelay: 1,\n        health: 20,\n        loot: {\n          cloth: {\n            min: 1,\n            max: 1,\n            chance: 0.2,\n          },\n          teeth: {\n            min: 1,\n            max: 2,\n            chance: 0.8,\n          },\n          leather: {\n            min: 1,\n            max: 1,\n            chance: 0.2,\n          },\n          medicine: {\n            min: 1,\n            max: 3,\n            chance: 0.7,\n          },\n        },\n        notification: translate('a shivering man approaches and attacks with surprising strength'),\n      },\n    },\n  },\n  { /* Man-eater */\n\t\ttitle: translate('A Man-Eater'),\n\t\tisAvailable: function(_, engine) {\n\t\t\tconst distance = engine.spaces.World.getDistance();\n      return distance > 10 && distance <= 20 && engine.spaces.World.getTerrain() === config.World.TILE.FOREST;\n\t\t},\n\t\tscenes: {\n\t\t\t'start': {\n\t\t\t\tcombat: true,\n\t\t\t\tenemy: 'man-eater',\n\t\t\t\tenemyName: translate('man-eater'),\n\t\t\t\tdeathMessage: translate('the man-eater is dead'),\n\t\t\t\tchara: 'T',\n\t\t\t\tdamage: 3,\n\t\t\t\thit: 0.8,\n\t\t\t\tattackDelay: 1,\n\t\t\t\thealth: 25,\n\t\t\t\tloot: {\n\t\t\t\t\t'fur': {\n\t\t\t\t\t\tmin: 5,\n\t\t\t\t\t\tmax: 10,\n\t\t\t\t\t\tchance: 1\n\t\t\t\t\t},\n\t\t\t\t\t'meat': {\n\t\t\t\t\t\tmin: 5,\n\t\t\t\t\t\tmax: 10,\n\t\t\t\t\t\tchance: 1\n\t\t\t\t\t},\n\t\t\t\t\t'teeth': {\n\t\t\t\t\t\tmin: 5,\n\t\t\t\t\t\tmax: 10,\n\t\t\t\t\t\tchance: 0.8\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tnotification: translate('a large creature attacks, claws freshly bloodied')\n\t\t\t}\n\t\t}\n\t},\n  {\n    title: translate('A Scavenger'),\n    isAvailable: function(_, engine) {\n      const distance = engine.spaces.World.getDistance();\n      return distance > 10 && distance <= 20 && engine.spaces.World.getTerrain() === config.World.TILE.BARRENS;\n    },\n    scenes: {\n      start: {\n        combat: true,\n        enemy: 'scavenger',\n        enemyName: translate('scavenger'),\n        deathMessage: translate('the scavenger is dead'),\n        chara: 'E',\n        damage: 4,\n        hit: 0.8,\n        attackDelay: 2,\n        health: 30,\n        loot: {\n          cloth: {\n            min: 5,\n            max: 10,\n            chance: 0.8,\n          },\n          leather: {\n            min: 5,\n            max: 10,\n            chance: 0.8,\n          },\n          iron: {\n            min: 1,\n            max: 5,\n            chance: 0.5,\n          },\n          medicine: {\n            min: 1,\n            max: 2,\n            chance: 0.1,\n          },\n        },\n        notification: translate('a scavenger draws close, hoping for an easy score'),\n      },\n    },\n  },\n  {\n    title: translate('A Huge Lizard'),\n    isAvailable: function(_, engine) {\n      const distance = engine.spaces.World.getDistance();\n      return distance > 10 && distance <= 20 && engine.spaces.World.getTerrain() === config.World.TILE.FIELD;\n    },\n    scenes: {\n      start: {\n        combat: true,\n        enemy: 'lizard',\n        enemyName: translate('lizard'),\n        deathMessage: translate('the lizard is dead'),\n        chara: 'T',\n        damage: 5,\n        hit: 0.8,\n        attackDelay: 2,\n        health: 20,\n        loot: {\n          scales: {\n            min: 5,\n            max: 10,\n            chance: 0.8,\n          },\n          teeth: {\n            min: 5,\n            max: 10,\n            chance: 0.5,\n          },\n          meat: {\n            min: 5,\n            max: 10,\n            chance: 0.8,\n          },\n        },\n        notification: translate('the grass thrashes wildly as a huge lizard pushes through'),\n      },\n    },\n  },\n  {\n    title: translate('A Feral Terror'),\n    isAvailable: function(_, engine) {\n      const distance = engine.spaces.World.getDistance();\n      return distance > 20 && engine.spaces.World.getTerrain() === config.World.TILE.FOREST;\n    },\n    scenes: {\n      start: {\n        combat: true,\n        enemy: 'feral terror',\n        enemyName: translate('feral terror'),\n        deathMessage: translate('the feral terror is dead'),\n        chara: 'T',\n        damage: 6,\n        hit: 0.8,\n        attackDelay: 1,\n        health: 45,\n        loot: {\n          fur: {\n            min: 5,\n            max: 10,\n            chance: 1,\n          },\n          meat: {\n            min: 5,\n            max: 10,\n            chance: 1,\n          },\n          teeth: {\n            min: 5,\n            max: 10,\n            chance: 0.8,\n          },\n        },\n        notification: translate('a beast, wilder than imagining, erupts out of the foliage'),\n      },\n    },\n  },\n  {\n    title: translate('A Soldier'),\n    isAvailable: function(_, engine) {\n      const distance = engine.spaces.World.getDistance();\n      return distance > 20 && engine.spaces.World.getTerrain() === config.World.TILE.BARRENS;\n    },\n    scenes: {\n      start: {\n        combat: true,\n        enemy: 'soldier',\n        enemyName: translate('soldier'),\n        deathMessage: translate('the soldier is dead'),\n        ranged: true,\n        chara: 'D',\n        damage: 8,\n        hit: 0.8,\n        attackDelay: 2,\n        health: 50,\n        loot: {\n          cloth: {\n            min: 5,\n            max: 10,\n            chance: 0.8,\n          },\n          bullets: {\n            min: 1,\n            max: 5,\n            chance: 0.5,\n          },\n          rifle: {\n            min: 1,\n            max: 1,\n            chance: 0.2,\n          },\n          medicine: {\n            min: 1,\n            max: 2,\n            chance: 0.1,\n          },\n        },\n        notification: translate('a soldier opens fire from across the desert'),\n      },\n    },\n  },\n  {\n    title: translate('A Sniper'),\n    isAvailable: function(_, engine) {\n      const distance = engine.spaces.World.getDistance();\n      return distance > 20 && engine.spaces.World.getTerrain() === config.World.TILE.FIELD;\n    },\n    scenes: {\n      start: {\n        combat: true,\n        enemy: 'sniper',\n        enemyName: translate('sniper'),\n        deathMessage: translate('the sniper is dead'),\n        chara: 'D',\n        damage: 15,\n        hit: 0.8,\n        attackDelay: 4,\n        health: 30,\n        ranged: true,\n        loot: {\n          cloth: {\n            min: 5,\n            max: 10,\n            chance: 0.8,\n          },\n          bullets: {\n            min: 1,\n            max: 5,\n            chance: 0.5,\n          },\n          rifle: {\n            min: 1,\n            max: 1,\n            chance: 0.2,\n          },\n          medicine: {\n            min: 1,\n            max: 2,\n            chance: 0.1,\n          },\n        },\n        notification: translate('a shot rings out, from somewhere in the long grass'),\n      },\n    },\n  },\n];\n\nexport default events;\n","import Engine from \"./engine\";\n\nexport default class GameModule {\n    engine: Engine;\n\n    constructor(engine: Engine) {\n        this.engine = engine;\n    }\n\n    onArrival() {\n\n    }\n\n    clean() {\n       \n    }\n}","import Engine from \"../engine\";\nimport logger from '../logger';\n\ntype OperationHelp =  {desc: string, parms?: string[][], [key: string]: any}\n\nexport type OptHistory = {\n    lastExecTime: number,\n    id: string,\n    cooldown: number,\n    cooldownAt: number\n}\n\nexport type Operation = {\n    id: string,\n    name: string,\n    exec: (engine: Engine, operation: Operation, ...args: any[]) => Promise<any>\n    desc?: string,\n    isAvailable?: (engine: Engine, operation: Operation) => boolean\n    meta?: any,\n    deps?: string[],\n    cooldown?: (engine: Engine, operation: Operation) => number,\n    help?: (engine: Engine, operation: Operation) => OperationHelp\n}\n\ntype OperationCallback = (operationResp: any) => void\n\nexport class OperationExecutor {\n    manager: OperationManager;\n    engine: Engine;\n    listeners: {[id: string]: OperationCallback[]};\n\n    constructor(engine: Engine, manager: OperationManager) {\n        this.engine = engine;\n        this.manager = manager;\n        this.listeners = {};\n    }\n\n    async clearCooldown(id: string) {\n        const opt = this.manager.findById(id);\n        if (opt) {\n            await this.engine.dispatch(this.engine.actions.operation.clearCooldown(opt.id));\n        }\n    }\n\n    async cooldown(id: string) {\n        const opt = this.manager.findById(id);\n        if (opt) {\n            await this.engine.dispatch(this.engine.actions.operation.record(opt));\n        }\n    }\n\n    availableOperations() {\n        const rtn = [] as {\n            name: string,\n            desc?: string,\n            id: string,\n            help?: OperationHelp,\n            history?: OptHistory,\n            cooldown: number,\n            meta?: any\n        }[];\n        const state = this.engine.getState();\n        this.manager.operations.forEach((opt) => {\n            if (!opt.isAvailable || opt.isAvailable(this.engine, opt)) {\n                const item = {\n                    name: opt.name,\n                    id: opt.id,\n                } as any\n                if (opt.desc) {\n                    item.desc = opt.desc;\n                }\n                if (opt.help) {\n                    item.help = opt.help(this.engine, opt)\n                }\n                item.history = state.operation[opt.id];\n                item.cooldown = opt.cooldown ? opt.cooldown(this.engine, opt) : 0\n                item.meta = opt.meta;\n                rtn.push(item)\n            }\n        })\n        return rtn;\n    }\n\n    on(operationId: string, callback: OperationCallback) {\n        if (!this.listeners[operationId]) {\n            this.listeners[operationId] = [];\n        }\n        this.listeners[operationId].push(callback);\n    }\n\n    off(operationId: string, callback: OperationCallback) {\n        if (this.listeners[operationId]) {\n            const index = this.listeners[operationId].indexOf(callback);\n            if (index > -1) {\n                this.listeners[operationId].splice(index, 1);\n            }\n        }\n    }\n\n    emit(operationId: string, resp: any) {\n        const listeners = this.listeners[operationId] || [];\n        listeners.forEach((callback) => {\n            callback(resp);\n        })\n    }\n\n    async exec(id: string, ...args: any[]) {\n        const opt = this.manager.findById(id);\n        const state = this.engine.getState();\n        if (opt) {\n            let optHistory = state.operation[id];\n            if (optHistory && opt.cooldown) {\n                if (Date.now() <= optHistory.cooldownAt) {\n                    return;\n                }\n            }\n\n            if (opt.isAvailable && !opt.isAvailable(this.engine, opt)) {\n                return;\n            }\n\n            await this.engine.dispatch(this.engine.actions.operation.record(opt));\n            \n            logger(`operation ${id} start`, args);\n\n            const resp = await opt.exec(this.engine, opt, ...args);\n\n            this.emit(id, resp);\n\n            logger(`operation ${id} finish`, resp);\n            return resp;\n        }\n    }\n}\n\nclass OperationManager {\n    operations: Operation[];\n\n    constructor() {\n        this.operations = [];\n    }\n\n    findById(id: string) {\n        return this.operations.find((opt) => {\n            return opt.id === id;\n        })\n    }\n\n    add(operation: Operation) {\n        const exist = this.findById(operation.id);\n        if (exist) {\n            return exist;\n        }\n        this.operations.push(operation);\n        return operation;\n    }\n}\n\nexport const operationManager = new OperationManager();","import { operationManager } from './index';\nimport translate from '../translate';\nimport config, { WeaponCategory } from '../config';\nimport { GameSpace, StoreCategory, PerkCategory } from '../type';\nimport _ from 'lodash';\n\noperationManager.add({\n    id: 'Combat.takeLoot',\n    name: translate('take'),\n    isAvailable: (engine) => {\n        const state = engine.getState();\n        return !_.isEmpty(state.events.loot) && state.events.won && state.engine.activeSpace === GameSpace.World;\n    },\n    meta: {\n        space: GameSpace.World,\n    },\n    help: (engine) => {\n        const state = engine.getState();\n        const loots: string[] = [];\n        Object.keys(state.events.loot).forEach((name) => {\n            if (state.events.loot[name] > 0) {\n                loots.push(name);\n            }\n        })\n        return {\n            desc: `take ${loots.join(', ')}`,\n            parms: [loots]\n        }\n    },\n    exec: async (engine, _, name: StoreCategory) => {\n        const state = engine.getState();\n        const lootNumLeft = state.events.loot[name];\n        const Path = engine.spaces.Path;\n        if (lootNumLeft > 0) {\n            const lootweight = Path.getWeight(name);\n            const freeSpace = engine.spaces.World.getFreeSpace();\n            if (lootweight <= freeSpace) {\n                await engine.dispatch(engine.actions.events.addM({\n                    [`loot.${name}`]: -1\n                }))\n                await engine.dispatch(engine.actions.game.world.addM({\n                    [`outfit.${name}`]: 1\n                }))\n            }\n            return true;\n        }\n        return false;\n    }\n})\n\noperationManager.add({\n    id: 'Combat.takeAllLoot',\n    name: translate('take all'),\n    isAvailable: (engine) => {\n        const state = engine.getState();\n        return !_.isEmpty(state.events.loot) && state.events.won && state.engine.activeSpace === GameSpace.World;\n    },\n    meta: {\n        space: GameSpace.World\n    },\n    help: (engine) => {\n        const state = engine.getState();\n        const loots: string[] = [];\n        Object.keys(state.events.loot).forEach((name) => {\n            if (state.events.loot[name] > 0) {\n                loots.push(name);\n            }\n        })\n        return {\n            desc: `take all ${loots.join(', ')}`,\n            parms: [loots]\n        }\n    },\n    exec: async (engine, _, name: StoreCategory) => {\n        const state = engine.getState();\n        const lootNumLeft = state.events.loot[name];\n        let i;\n        for (i = 0; i < lootNumLeft; i++) {\n            const taken = await engine.operationExecutor.exec('Combat.takeLoot', name);\n            if (!taken) {\n                break;\n            }\n        }\n        return [i === lootNumLeft, i];\n    }\n})\n\noperationManager.add({\n    id: 'Combat.takeEverything',\n    name: translate('take everything'),\n    isAvailable: (engine) => {\n        const state = engine.getState();\n        return !_.isEmpty(state.events.loot) && state.events.won && state.engine.activeSpace === GameSpace.World;\n    },\n    meta: {\n        space: GameSpace.World\n    },\n    exec: async (engine) => {\n        const state = engine.getState();\n        const loots = state.events.loot;\n        let taken = {} as any;\n        let success = true;\n        for (let name in loots) {\n            const res = await engine.operationExecutor.exec('Combat.takeAllLoot', name)\n            taken[name] = res[1];\n            if (!res[0]) {\n                success = false;\n                break;\n            }\n        }\n        return [success, taken]\n    }\n})\n\noperationManager.add({\n    id: 'Combat.dropStuff',\n    name: translate('drop stuff'),\n    isAvailable: (engine) => {\n        const state = engine.getState();\n        return !_.isEmpty(state.game.world.outfit) && state.events.won && state.engine.activeSpace === GameSpace.World;\n    },\n    meta: {\n        space: GameSpace.World\n    },\n    help: (engine) => {\n        const state = engine.getState();\n        const loots: string[] = [];\n        Object.keys(state.game.world.outfit).forEach((name) => {\n            if (state.events.loot[name] > 0) {\n                loots.push(name);\n            }\n        })\n        return {\n            desc: `drop ${loots.join(', ')}`,\n            parms: [loots]\n        }\n    },\n    exec: async (engine, _, name: string) => {\n        const num = 1;\n        const state = engine.getState();\n        const stuffNum = state.game.world.outfit[name];\n        const dropNum = Math.min(stuffNum, num);\n        if (dropNum > 0) {\n            await engine.dispatch(engine.actions.events.addM({\n                [`loot.${name}`]: dropNum\n            }))\n            await engine.dispatch(engine.actions.game.world.addM({\n                [`outfit.${name}`]: -dropNum\n            }))\n        }\n        return dropNum;\n    }\n})\n\n\noperationManager.add({\n    id: 'Combat.eatMeatInFight',\n    name: translate('eat meat'),\n    cooldown: () => {\n        return config.Event.EAT_COOLDOWN\n    },\n    isAvailable: (engine) => {\n        const state = engine.getState();\n        return state.events.enemys.length > 0 && !state.events.won && state.engine.activeSpace === GameSpace.World;\n    },\n    meta: {\n        space: GameSpace.World,\n        cost: { [StoreCategory.cured_meat]: 1 }\n    },\n    exec: async (engine) => {\n        const res = await engine.events.doHeal(StoreCategory.cured_meat, engine.spaces.World.meatHeal())\n        if (!res) {\n            engine.operationExecutor.clearCooldown('Combat.eatMeatInFight')\n        }\n    }\n})\n\n\noperationManager.add({\n    id: 'Combat.eatMeat',\n    name: translate('eat meat'),\n    isAvailable: (engine) => {\n        const state = engine.getState();\n        return state.events.won && state.engine.activeSpace === GameSpace.World;\n    },\n    meta: {\n        space: GameSpace.World,\n        cost: { [StoreCategory.cured_meat]: 1 }\n    },\n    exec: async (engine) => {\n        const res = await engine.events.doHeal(StoreCategory.cured_meat, engine.spaces.World.meatHeal())\n        if (!res) {\n            engine.operationExecutor.clearCooldown('Combat.eatMeat')\n        }\n    }\n})\n\noperationManager.add({\n    id: 'Combat.useMedsInFight',\n    name: translate('use meds'),\n    cooldown: () => {\n        return config.Event.MEDS_COOLDOWN\n    },\n    isAvailable: (engine) => {\n        const state = engine.getState();\n        return state.events.enemys.length > 0 && !state.events.won && state.engine.activeSpace === GameSpace.World;\n    },\n    meta: {\n        space: GameSpace.World,\n        cost: { [StoreCategory.medicine]: 1 }\n    },\n    exec: async (engine) => {\n        const res = await engine.events.doHeal(StoreCategory.medicine, engine.spaces.World.medsHeal())\n        if (!res) {\n            engine.operationExecutor.clearCooldown('Combat.useMedsInFight')\n        }\n    }\n})\n\noperationManager.add({\n    id: 'Combat.useMeds',\n    name: translate('use meds'),\n    isAvailable: (engine) => {\n        const state = engine.getState();\n        return state.events.won && state.engine.activeSpace === GameSpace.World;\n    },\n    meta: {\n        space: GameSpace.World,\n        cost: { [StoreCategory.cured_meat]: 1 }\n    },\n    exec: async (engine) => {\n        const res = await engine.events.doHeal(StoreCategory.medicine, engine.spaces.World.medsHeal())\n        if (!res) {\n            engine.operationExecutor.clearCooldown('Combat.useMeds')\n        }\n    }\n})\n\noperationManager.add({\n    id: 'Combat.leave',\n    name: translate('leave'),\n    isAvailable: (engine) => {\n        const state = engine.getState();\n        return state.events.won && state.engine.activeSpace === GameSpace.World;\n    },\n    meta: {\n        space: GameSpace.World,\n    },\n    exec: async (engine) => {\n        engine.events.endEvent()\n    }\n})\n\nObject.keys(WeaponCategory).forEach((name) => {\n    const item = config.items[name];\n    operationManager.add({\n        id: `Combat.useWeapon.${name}`,\n        name: translate(name),\n        cooldown: (engine, operation) => {\n            let cd = operation.meta.weapon.cooldown;\n            const state = engine.getState();\n            if (state.character.perks.unarmed_master) {\n                cd /= 2;\n            }\n            return cd;\n        },\n        isAvailable: (engine, operation) => {\n            const state = engine.getState();\n            let numWeapons = 0;\n            for (let k in WeaponCategory) {\n                const weapon = config.items[k].weapon;\n                if (!!state.game.world.outfit[k]) {\n                    if (typeof weapon?.damage !== 'number' || weapon.damage === 0) {\n                        // Weapons that deal no damage don't count\n                        numWeapons--;\n                    } else if (weapon.cost) {\n                        for (let c in weapon.cost) {\n                            let num = weapon.cost[c];\n                            if (state.game.world.outfit[c] < num) {\n                                // Can't use this weapon, so don't count it\n                                numWeapons--;\n                            }\n                        }\n                    }\n                    numWeapons++;\n                }\n            }\n            const name = operation.meta.name;\n            if (numWeapons === 0 && name === 'fists') {\n                return state.events.enemys.length > 0 && !state.events.won && state.engine.activeSpace === GameSpace.World;\n            } else {\n                const outfitNum = state.path.outfit[name as StoreCategory];\n                return !!outfitNum && state.events.enemys.length > 0 && !state.events.won && state.engine.activeSpace === GameSpace.World;\n            }\n        },\n        meta: {\n            space: GameSpace.World,\n            cost: item.trade?.cost,\n            weapon: item.weapon,\n            name: name\n        },\n        exec: async (engine, operation) => {\n            const name = operation.meta.name;\n            const event = engine.events.getActiveEvent();\n            const state = engine.getState();\n            if (!event || state.game.world.stunned && state.game.world.stunned >= Date.now()) {\n                engine.operationExecutor.clearCooldown(`Combat.useWeapon.${name}`)\n                return;\n            }\n\n            const item = config.items[name];\n            const weapon = item.weapon;\n\n\n            if (weapon!.type === 'unarmed') {\n                let punches = (state.character.statistics.punches || 0) + 1;\n                engine.dispatch(engine.actions.character.statistics.setM({\n                    punches\n                }))\n                if (punches === 50 && !state.character.perks.boxer) {\n                    engine.dispatch(engine.actions.character.perks.addPerk(PerkCategory.boxer))\n                } else if (punches === 150 && !state.character.perks.martial_artist) {\n                    engine.dispatch(engine.actions.character.perks.addPerk(PerkCategory.martial_artist))\n                } else if (punches === 300 && !state.character.perks.unarmed_master) {\n                    engine.dispatch(engine.actions.character.perks.addPerk(PerkCategory.unarmed_master))\n                }\n            }\n\n            if (weapon?.cost) {\n                const outfit = { ...state.game.world.outfit };\n                for (let k in weapon.cost) {\n                    if (outfit[k] < weapon.cost[k]) {\n                        engine.operationExecutor.clearCooldown(`Combat.useWeapon.${name}`)\n                        return;\n                    }\n                    outfit[k] = outfit[k] - weapon.cost[k];\n                }\n                engine.dispatch(engine.actions.game.world.setM({\n                    outfit\n                }))\n            }\n\n            let dmg: any = -1;\n            if (Math.random() <= engine.events.getHitChance()) {\n                dmg = weapon?.damage;\n                if (typeof dmg === 'number') {\n                    if (weapon?.type === 'unarmed' && state.character.perks.boxer) {\n                        dmg *= 2;\n                    }\n                    if (weapon?.type === 'unarmed' && state.character.perks.martial_artist) {\n                        dmg *= 3;\n                    }\n                    if (weapon?.type === 'unarmed' && state.character.perks.unarmed_master) {\n                        dmg *= 2;\n                    }\n                    if (weapon?.type === 'melee' && state.character.perks.barbarian) {\n                        dmg = Math.floor(dmg * 1.5);\n                    }\n                }\n            }\n\n            await engine.events.damageEnemy(dmg, weapon);\n\n            const newState = engine.getState();\n            if (newState.events.enemys[0].health <= 0 && !state.events.won) {\n                engine.events.winFight();\n            }\n        }\n    })\n})","import { operationManager } from './index';\nimport translate from '../translate';\nimport { GameSpace, StoreCategory, SceneButton } from '../type';\nimport _ from 'lodash';\n\noperationManager.add({\n    id: 'Events.choice',\n    name: translate('choice'),\n    isAvailable: (engine) => {\n        const scene = engine.events.getActiveScene();\n        return scene && scene.buttons;\n    },\n    help: (engine) => {\n        const scene = engine.events.getActiveScene();\n        const choice = [] as string[];\n        Object.keys(scene?.buttons || {}).forEach((btn) => {\n            choice.push(btn)\n        })\n        return {\n            desc: `choice ${choice.join(', ')}`,\n            parms: [choice]\n        }\n    },\n    exec: async (engine, _, name: string) => {\n        const event = engine.events.getActiveEvent();\n        if (!event) {\n            return;\n        }\n        const state = engine.getState();\n        const button = event.scenes[state.events.activeScene].buttons[name] as SceneButton;\n        let costMod = {} as any;\n        if (button.cost) {\n            for (let store in button.cost) {\n                const storeKey = store as StoreCategory;\n                let num = state.engine.activeSpace === GameSpace.World ? state.path.outfit[storeKey] || 0 : state.stores[storeKey] || 0;\n                if (num < (button.cost[storeKey] || 0)) {\n                    engine.notify(`not enough ${storeKey}`);\n                    return false;\n                }\n                costMod[storeKey] = -(button.cost[storeKey] || 0);\n            }\n            if (state.engine.activeSpace === GameSpace.World) {\n                await engine.dispatch(engine.actions.path.outfit.addM(costMod))\n            } else {\n                await engine.dispatch(engine.actions.stores.addM(costMod));\n            }\n        }\n\n        if (typeof button.onChoose === 'function') {\n            button.onChoose(engine);\n        }\n\n        if (button.reward) {\n            await engine.dispatch(engine.actions.stores.addM(button.reward));\n        }\n\n        if (button.notification) {\n            engine.notify(button.notification)\n        }\n\n        if (button.nextScene) {\n            const nextScene = button.nextScene as any;\n            if (nextScene === 'end') {\n                engine.events.endEvent();\n            } else if (typeof nextScene === 'string') {\n                engine.events.loadScene(nextScene);\n            } else {\n                let r = Math.random();\n                let lowestMatch = null;\n                for (let i in nextScene) {\n                    let sceneRate = parseFloat(i);\n                    if (r < sceneRate && (lowestMatch == null || i < lowestMatch)) {\n                        lowestMatch = i;\n                    }\n                }\n                if (lowestMatch !== null) {\n                    engine.events.loadScene(nextScene[lowestMatch]);\n                    return;\n                }\n                engine.events.endEvent();\n            }\n        }\n\n        return true\n    }\n})","import { Event, Scene, StoreCategory, CombatLootItem, GameSpace } from '../type';\nimport GlobalEvents from './global';\nimport RoomEvents from './room';\nimport OutsideEvents from './outside';\nimport MarketEvents from './marketing';\nimport logger from '../logger';\nimport Engine from '../engine';\nimport _ from 'lodash';\nimport config from '../config';\nimport setpieces from './setpieces';\nimport encounters from './encounters';\nimport GameModule from '../module';\nimport '../operations/combat';\nimport '../operations/events';\n\nexport default class Events extends GameModule {\n  eventPool: {[key: string]: Event[]};\n  eventMap: {\n    Global: typeof GlobalEvents,\n    Room: typeof RoomEvents,\n    Outside: typeof OutsideEvents,\n    Market: typeof MarketEvents\n  };\n  private _enemyAttackTimer: any = null;\n  constructor(engine: Engine) {\n    super(engine)\n    this.eventPool = {\n      Global: GlobalEvents,\n      Room: RoomEvents,\n      Outside: OutsideEvents,\n      World: Object.values(setpieces),\n      Fight: encounters,\n      Ship: []\n    };\n    this.eventMap = {\n      Global: GlobalEvents,\n      Room: RoomEvents,\n      Outside: OutsideEvents,\n      Market: MarketEvents,\n    };\n\n    this.scheduleNextEvent();\n    this.initDelay();\n  }\n\n\n  winFight() {\n    clearInterval(this._enemyAttackTimer);\n    this.engine.dispatch(this.engine.actions.events.winFight());\n  }\n\n  getHitChance() {\n    const state = this.engine.getState();\n    if(state.character.perks.precise) {\n\t\t\treturn config.World.BASE_HIT_CHANCE + 0.1;\n\t\t}\n\t\treturn config.World.BASE_HIT_CHANCE;\n  }\n\n  async doHeal(cost: StoreCategory, heal: number) {\n    const state = this.engine.getState();\n    if (!!state.game.world.outfit[cost]) {\n      const changed = {\n        [`outfit.${cost}`]: (state.path.outfit[cost] || 0) - 1\n      } as any;\n      let hp = state.game.world.health + heal;\n\t\t\thp = Math.min(this.engine.spaces.World.getMaxHealth(), hp);\n      changed.health = hp;\n      await this.engine.dispatch(this.engine.actions.game.world.setM(changed))\n      return true;\n    } else {\n      this.engine.notify(`not enough ${cost}`)\n    }\n    return false;\n  }\n\n  getCurrentSpaceEventsPool() {\n    const space = this.engine.getState().engine.activeSpace;\n    if (space === GameSpace.World) {\n      return ([] as Event[]).concat(this.eventPool.World, this.eventPool.Fight);\n    } else if (space === GameSpace.Ship) {\n      return ([] as Event[]).concat(this.eventPool.Ship, this.eventPool.Global);\n    } else {\n      return ([] as Event[]).concat(this.eventPool.Global, this.eventPool[space as string] || []);\n    }\n  }\n\n  triggerEvent() {\n    const space = this.engine.getState().engine.activeSpace;\n    if (space !== GameSpace.World && this.getActiveEvent() === null) {\n      const pool = this.getCurrentSpaceEventsPool();\n      var possibleEvents = [];\n      for (let i in pool) {\n        const event = pool[i];\n        if (\n          event.isAvailable &&\n          event.isAvailable(this.engine.store!.getState(), this.engine)\n        ) {\n          possibleEvents.push(event);\n        }\n      }\n\n      if (possibleEvents.length === 0) {\n        this.scheduleNextEvent(0.5);\n        return;\n      } else {\n        const r = Math.floor(Math.random() * possibleEvents.length);\n        this.startEvent(possibleEvents[r]);\n      }\n    }\n\n    this.scheduleNextEvent();\n  }\n\n  async startEvent(event: Event) {\n    if (!event) {\n      return;\n    }\n    const pool = this.getCurrentSpaceEventsPool();\n    let eventIndex = pool.indexOf(event);\n    if (eventIndex === -1) {\n      eventIndex = pool.findIndex((e) => {\n        return e.id === event.id && typeof e.id !== 'undefined';\n      })\n    }\n    const eventTitle = eventIndex > -1 ? pool[eventIndex].title : '';\n    if (eventTitle) {\n      await this.engine.dispatch(this.engine.actions.events.push(eventTitle))\n      await this.loadScene('start');\n    }\n  }\n\n  async loadScene(sceneName: string) {\n    const state = this.engine.getState();\n    const eventTitle = state.events.eventStack[0];\n    const pool = this.getCurrentSpaceEventsPool();\n    const event = pool.find((evt) => {\n      return evt.title === eventTitle\n    });\n    if (!event) {\n      sceneName = 'end'\n    }\n\n    await this.engine.dispatch(this.engine.actions.events.cleanEnemys())\n\n    this.engine.dispatch(this.engine.actions.events.setM({\n      activeScene: sceneName\n    }));\n\n    const scene = event?.scenes[sceneName];\n\n    if (!scene) {\n      return;\n    }\n\n    if (scene.onLoad) {\n      scene.onLoad(this.engine);\n    }\n\n    if (scene.notification) {\n      this.engine.notify(scene.notification);\n    }\n\n    if (scene.reward) {\n      this.engine.dispatch(this.engine.actions.stores.addM(scene.reward));\n    }\n\n    if (scene.combat) {\n      this.startCombat(scene);\n    } else {\n      this.startStory(scene);\n    }\n  }\n  \n  addEvent(space: string, event: Event) {\n    const events = this.eventPool[space];\n    const exist = events.find((e) => {\n      return e.id === event.id;\n    })\n    if (!exist) {\n      this.eventPool[space].push(event);\n    }\n  }\n\n  startCombat(scene: Scene) {\n    this.setRandomLoots(scene.loot);\n    this.engine.dispatch(this.engine.actions.events.setSceneEnemy(scene));\n    clearInterval(this._enemyAttackTimer);\n    this._enemyAttackTimer = this.engine.setInterval(this.enemyAttack.bind(this), scene.attackDelay * 1000);\n  }\n\n  startStory(scene: Scene) {\n    this.setRandomLoots(scene.loot);\n  }\n\n  async enemyAttack() {\n    const event = this.getActiveEvent();\n    if (!event) {\n      return;\n    }\n    const state = this.engine.getState();\n    const scene = event.scenes[state.events.activeScene];\n    if (!scene) {\n      return;\n    }\n    for (let i = 0, len = state.events.enemys.length; i < len; i++) {\n      const enemy = state.events.enemys[i];\n      if (!enemy.stunned) {\n        let toHit = scene.hit;\n        toHit *= state.character.perks.evasive ? 0.8 : 1;\n        let dmg = -1;\n        if(Math.random() <= toHit) {\n          dmg = scene.damage;\n        }\n        await this.damageAdventurer(enemy, dmg);\n      }\n    }\n    const newState = this.engine.getState();\n    if (newState.game.world.health <= 0) {\n      clearInterval(this._enemyAttackTimer);\n      this.endEvent();\n      this.engine.spaces.World.die();\n    }\n  }\n\n  async damageEnemy(dmg: any, weapon: any) {\n    const state = this.engine.getState();\n    let hp = state.events.enemys[0].health;\n    if(typeof dmg === 'number') {\n\t\t\tif(dmg < 0) {\n\t\t\t\tdmg = 0;\n        this.engine.dispatch(this.engine.actions.events.logFight({\n          time: Date.now(),\n          type: 'miss',\n          target: 'enemy',\n          meta: {\n            weapon\n          }\n        }))\n\t\t\t} else {\n\t\t\t\thp = ((hp - dmg) < 0) ? 0 : (hp - dmg);\n        this.engine.dispatch(this.engine.actions.events.setM({\n          'enemys[0].health': hp\n        }))\n        this.engine.dispatch(this.engine.actions.events.logFight({\n          time: Date.now(),\n          type: 'damage',\n          target: 'enemy',\n          meta: {\n            dmg,\n            weapon\n          }\n        }))\n\t\t\t}\n\t\t} else {\n\t\t\tif(dmg == 'stun') {\n        this.engine.dispatch(this.engine.actions.events.setM({\n          'enemys[0].stunned': Date.now() + config.Event.STUN_DURATION\n        }))\n        this.engine.dispatch(this.engine.actions.events.logFight({\n          time: Date.now(),\n          type: 'stunned',\n          target: 'enemy',\n          meta: {\n            weapon\n          }\n        }))\n\t\t\t}\n\t\t}\n  }\n\n  damageAdventurer(_: any, dmg: any) {\n    const state = this.engine.getState();\n    let hp = state.game.world.health;\n    if(typeof dmg === 'number') {\n\t\t\tif(dmg < 0) {\n        this.engine.dispatch(this.engine.actions.events.logFight({\n          time: Date.now(),\n          type: 'miss',\n          target: 'player'\n        }))\n\t\t\t\tdmg = 0;\n\t\t\t} else {\n\t\t\t\thp = ((hp - dmg) < 0) ? 0 : (hp - dmg);\n        this.engine.spaces.World.setHp(hp);\n        this.engine.dispatch(this.engine.actions.events.logFight({\n          time: Date.now(),\n          type: 'damage',\n          target: 'player',\n          meta: {\n            dmg\n          }\n        }))\n\t\t\t}\n\t\t} else {\n\t\t\tif(dmg == 'stun') {\n        this.engine.dispatch(this.engine.actions.game.world.setM({\n          stunned: Date.now() + config.Event.STUN_DURATION\n        }))\n        this.engine.dispatch(this.engine.actions.events.logFight({\n          time: Date.now(),\n          type: 'stunned',\n          target: 'player'\n        }))\n\t\t\t}\n\t\t}\n  }\n\n  setRandomLoots(lootList?: { [key in StoreCategory]?: CombatLootItem}) {\n    const randomLoot = {} as any;\n    lootList = lootList || {};\n    for(let k in lootList) {\n\t\t\tconst loot = lootList[k as StoreCategory]!;\n\t\t\tif(Math.random() < loot.chance) {\n\t\t\t\tconst num = Math.floor(Math.random() * (loot.max - loot.min)) + loot.min;\n        randomLoot[k] = num;\n\t\t\t}\n\t\t}\n    this.engine.dispatch(this.engine.actions.events.setM({\n      loot: randomLoot\n    }))\n  }\n\n  triggerFight() {\n    const possibleFights = [];\n    const state = this.engine.getState();\n    for (var i in this.eventPool.Fight) {\n      const fight = this.eventPool.Fight[i];\n      if (fight.isAvailable && fight.isAvailable(state, this.engine)) {\n        possibleFights.push(fight);\n      }\n    }\n\n    const r = Math.floor(Math.random() * possibleFights.length);\n    this.startEvent(possibleFights[r]);\n  }\n\n  scheduleNextEvent(scale?: number) {\n    let nextEvent =\n      Math.floor(\n        Math.random() *\n        (config.Event.EVENT_TIME_RANGE[1] - config.Event.EVENT_TIME_RANGE[0])\n      ) + config.Event.EVENT_TIME_RANGE[0];\n    if (scale && scale > 0) {\n      nextEvent *= scale;\n    }\n    logger('next event scheduled in ' + nextEvent + ' minutes');\n    this.engine.setTimeout(this.triggerEvent.bind(this), nextEvent * 60 * 1000);\n  }\n\n  saveDelay(\n    action: (engine: Engine) => any,\n    stateName: string,\n    delay?: number\n  ) {\n    if (delay) {\n      this.engine.store?.dispatch(\n        this.engine.actions.delay.setM({\n          [stateName]: delay,\n        })\n      );\n    } else {\n      delay = this.engine.store?.getState().delay[stateName] || 0;\n    }\n    const interval = this.engine.setInterval(() => {\n      this.engine.store?.dispatch(\n        this.engine.actions.delay.setM({\n          [stateName]:\n            (this.engine.store?.getState().delay[stateName] || 0) - 0.5,\n        })\n      );\n    }, 500);\n    this.engine.setTimeout(async () => {\n      clearInterval(interval);\n      await this.engine.store?.dispatch(\n        this.engine.actions.delay.setM({\n          [stateName]: undefined,\n        })\n      );\n      await this.engine.store?.dispatch(\n        this.engine.actions.delay.removeM([stateName])\n      );\n      this.engine.store?.dispatch(this.engine.actions.delay.clean());\n      action(this.engine);\n    }, (delay || 0) * 1000);\n  }\n\n  clean() {\n    clearInterval(this._enemyAttackTimer)\n    super.clean();\n  }\n\n  recallDelay(stateName: string, target: any) {\n    const state = _.get(this.engine.store?.getState().events, stateName);\n    for (let i in state) {\n      if (_.isObject(state[i])) {\n        this.recallDelay(stateName + '[\"' + i + '\"]', target[i]);\n      } else {\n        if (typeof target[i] == 'function') {\n          target[i](this.engine);\n        }\n      }\n    }\n  }\n\n  initDelay() {\n    const state = this.engine.store?.getState().delay;\n    for (let i in state) {\n      if (_.isObject(state[i])) {\n        this.recallDelay(i, (this.eventMap as any)[i]);\n      }\n    }\n  }\n\n  getActiveScene() {\n    const state = this.engine.getState();\n    const event = this.getActiveEvent();\n    if (!event) {\n      return null;\n    }\n    return event.scenes[state.events.activeScene] || null;\n  }\n\n  getActiveEvent() {\n    const state = this.engine.getState();\n    if (state.events.eventStack.length > 0) {\n      let pool = this.getCurrentSpaceEventsPool();\n      return pool.find((evt) => {\n        return evt.title === state.events.eventStack[0]\n      }) || null\n    }\n    return null;\n  }\n\n  endEvent() {\n    this.engine.dispatch(this.engine.actions.events.end({}))\n  }\n}\n","import { operationManager } from './index';\nimport translate from '../translate';\nimport config from '../config';\nimport { GameSpace } from '../type';\nimport _ from 'lodash';\n\noperationManager.add({\n    id: 'World.moveSouth',\n    name: translate('south'),\n    isAvailable: (engine) => {\n        const state = engine.getState();\n        const event = engine.events.getActiveEvent();\n        return state.engine.activeSpace === GameSpace.World && !event;\n    },\n    meta: {\n        space: GameSpace.World\n    },\n    exec: async (engine) => {\n        const curPos = engine.getState().game.world.curPos;\n        if (curPos[1] < config.World.RADIUS * 2) {\n            engine.spaces.World.move(config.World.SOUTH);\n        }\n    }\n})\n\noperationManager.add({\n    id: 'World.moveNorth',\n    name: translate('north'),\n    isAvailable: (engine) => {\n        const state = engine.getState();\n        const event = engine.events.getActiveEvent();\n        return state.engine.activeSpace === GameSpace.World && !event;\n    },\n    meta: {\n        space: GameSpace.World\n    },\n    exec: async (engine) => {\n        const curPos = engine.getState().game.world.curPos;\n        if (curPos[1] > 0) {\n            engine.spaces.World.move(config.World.NORTH);\n        }\n    }\n})\n\noperationManager.add({\n    id: 'World.moveWest',\n    name: translate('west'),\n    isAvailable: (engine) => {\n        const state = engine.getState();\n        const event = engine.events.getActiveEvent();\n        return state.engine.activeSpace === GameSpace.World && !event;\n    },\n    meta: {\n        space: GameSpace.World\n    },\n    exec: async (engine) => {\n        const curPos = engine.getState().game.world.curPos;\n        if (curPos[0] > 0) {\n            engine.spaces.World.move(config.World.WEST);\n        }\n    }\n})\n\noperationManager.add({\n    id: 'World.moveEast',\n    name: translate('east'),\n    isAvailable: (engine) => {\n        const state = engine.getState();\n        const event = engine.events.getActiveEvent();\n        return state.engine.activeSpace === GameSpace.World && !event;\n    },\n    meta: {\n        space: GameSpace.World\n    },\n    exec: async (engine) => {\n        const curPos = engine.getState().game.world.curPos;\n        if (curPos[0] < config.World.RADIUS * 2) {\n            engine.spaces.World.move(config.World.EAST);\n        }\n    }\n})","import Engine from './engine';\nimport translate from './translate';\nimport config from './config';\nimport { GameSpace, PerkCategory, StoreCategory } from './type';\nimport _ from 'lodash';\nimport GameModule from './module';\nimport './operations/world'\nexport default class World extends GameModule {\n  constructor(engine: Engine) {\n    super(engine);\n\n    const state = engine.store!.getState();\n\n    if (state.previous.stores) {\n      config.World.LANDMARKS[config.World.TILE.CACHE] = {\n        num: 1,\n        minRadius: 10,\n        maxRadius: config.World.RADIUS * 1.5,\n        scene: 'cache',\n        label: translate('A&nbsp;Destroyed&nbsp;Village'),\n      };\n    }\n\n    if (!state.features.location.Path) {\n      const map = this.generateMap();\n      const mask = this.newMask();\n      const ship = this.mapSearch(config.World.TILE.SHIP, map, 1);\n      let dir;\n      if (ship) {\n        dir = this.compassDir(ship[0]);\n      }\n      engine.dispatch(\n        engine.actions.game.world.setM({\n          map,\n          mask,\n          ship,\n          dir,\n        })\n      );\n      this.testMap();\n    }\n  }\n\n  newMask() {\n    const RADIUS = config.World.RADIUS;\n    var mask = new Array(RADIUS * 2 + 1);\n    for (var i = 0; i <= RADIUS * 2; i++) {\n      mask[i] = new Array(RADIUS * 2 + 1);\n    }\n    this.lightMap(RADIUS, RADIUS, mask);\n    return mask;\n  }\n\n  lightMap(x: number, y: number, mask: boolean[][]) {\n    const state = this.engine.store?.getState();\n    var r = config.World.LIGHT_RADIUS;\n    r *= state?.character.perks.scout ? 2 : 1;\n    this.uncoverMap(x, y, r, mask);\n    return mask;\n  }\n\n  uncoverMap(x: number, y: number, r: number, mask: boolean[][]) {\n    mask[x][y] = true;\n    for (var i = -r; i <= r; i++) {\n      for (var j = -r + Math.abs(i); j <= r - Math.abs(i); j++) {\n        if (\n          y + j >= 0 &&\n          y + j <= config.World.RADIUS * 2 &&\n          x + i <= config.World.RADIUS * 2 &&\n          x + i >= 0\n        ) {\n          mask[x + i][y + j] = true;\n        }\n      }\n    }\n  }\n\n  getTerrain() {\n    const state = this.engine.getState();\n    const curPos = state.game.world.curPos;\n\t\treturn state.game.world.map[curPos[0]][curPos[1]];\n\t}\n\n  markVisited(x: number, y: number) {\n    this.engine.dispatch(this.engine.actions.game.world.visit({ x, y }));\n  }\n\n  clearDungeon() {\n    const state = this.engine.getState();\n    const curPos = state.game.world.curPos;\n    this.engine.dispatch(\n      this.engine.actions.game.world.setMap({\n        pos: curPos,\n        value: config.World.TILE.OUTPOST,\n      })\n    );\n    this.drawRoad();\n  }\n\n  findClosestRoad(startPos: number[]) {\n    const state = this.engine.getState();\n    var searchX,\n      searchY,\n      dtmp,\n      x = 0,\n      y = 0,\n      dx = 1,\n      dy = -1;\n    for (\n      var i = 0;\n      i < Math.pow(this.getDistance(startPos, config.World.VILLAGE_POS) + 2, 2);\n      i++\n    ) {\n      searchX = startPos[0] + x;\n      searchY = startPos[1] + y;\n      if (\n        0 < searchX &&\n        searchX < config.World.RADIUS * 2 &&\n        0 < searchY &&\n        searchY < config.World.RADIUS * 2\n      ) {\n        // check for road\n        var tile = state.game.world.map[searchX][searchY];\n        if (\n          tile === config.World.TILE.ROAD ||\n          (tile === config.World.TILE.OUTPOST && !(x === 0 && y === 0)) || // outposts are connected to roads\n          tile === config.World.TILE.VILLAGE // all roads lead home\n        ) {\n          return [searchX, searchY];\n        }\n      }\n      if (x === 0 || y === 0) {\n        // Turn the corner\n        dtmp = dx;\n        dx = -dy;\n        dy = dtmp;\n      }\n      if (x === 0 && y <= 0) {\n        x++;\n      } else {\n        x += dx;\n        y += dy;\n      }\n    }\n    return config.World.VILLAGE_POS;\n  }\n\n  drawRoad() {\n    let { curPos, map } = this.engine.getState().game.world;\n    map = _.cloneDeep(map);\n    var closestRoad = this.findClosestRoad(curPos);\n    var xDist = curPos[0] - closestRoad[0];\n    var yDist = curPos[1] - closestRoad[1];\n    var xDir = Math.abs(xDist) / xDist;\n    var yDir = Math.abs(yDist) / yDist;\n    var xIntersect, yIntersect;\n    if (Math.abs(xDist) > Math.abs(yDist)) {\n      xIntersect = closestRoad[0];\n      yIntersect = closestRoad[1] + yDist;\n    } else {\n      xIntersect = closestRoad[0] + xDist;\n      yIntersect = closestRoad[1];\n    }\n\n    for (var x = 0; x < Math.abs(xDist); x++) {\n      if (this.isTerrain(map[closestRoad[0] + xDir * x][yIntersect])) {\n        map[closestRoad[0] + xDir * x][yIntersect] = config.World.TILE.ROAD;\n      }\n    }\n    for (var y = 0; y < Math.abs(yDist); y++) {\n      if (this.isTerrain(map[xIntersect][closestRoad[1] + yDir * y])) {\n        map[xIntersect][closestRoad[1] + yDir * y] = config.World.TILE.ROAD;\n      }\n    }\n    this.engine.dispatch(\n      this.engine.actions.game.world.setM({\n        map,\n      })\n    );\n  }\n\n  getMaxHealth() {\n    const state = this.engine.store!.getState();\n    if (!!state.stores.s_armour) {\n      return config.World.BASE_HEALTH + 35;\n    } else if (!!state.stores.i_armour) {\n      return config.World.BASE_HEALTH + 15;\n    } else if (!!state.stores.l_armou) {\n      return config.World.BASE_HEALTH + 5;\n    }\n    return config.World.BASE_HEALTH;\n  }\n\n  async applyMap() {\n    const state = this.engine.store?.getState();\n    if (!state?.game.world.seenAll) {\n      var x,\n        y,\n        mask = state!.game.world.mask;\n      do {\n        x = Math.floor(Math.random() * (config.World.RADIUS * 2 + 1));\n        y = Math.floor(Math.random() * (config.World.RADIUS * 2 + 1));\n      } while (mask[x][y]);\n      this.uncoverMap(x, y, 5, mask);\n      await this.engine.dispatch(\n        this.engine.actions.game.world.setM({\n          mask,\n        })\n      );\n    }\n    this.testMap();\n  }\n\n  async testMap() {\n    const state = this.engine.store?.getState();\n    if (!state?.game.world.seenAll) {\n      var dark;\n      var mask = state!.game.world.mask;\n      loop: for (var i = 0; i < mask.length; i++) {\n        for (var j = 0; j < mask[i].length; j++) {\n          if (!mask[i][j]) {\n            dark = true;\n            break loop;\n          }\n        }\n      }\n      await this.engine.store?.dispatch(\n        this.engine.actions.game.world.seeAll(!dark)\n      );\n    }\n  }\n\n  onArrival() {\n    this.engine.dispatch(\n      this.engine.actions.game.world.setM({\n        water: this.getMaxWater(),\n        health: this.getMaxHealth(),\n        foodMove: 0,\n        waterMove: 0,\n        starvation: false,\n        thirst: false,\n        usedOutposts: {},\n        curPos: _.cloneDeep(config.World.VILLAGE_POS),\n        dead: false,\n      })\n    );\n  }\n\n  setHp(hp: number) {\n    this.engine.dispatch(\n      this.engine.actions.game.world.setM({\n        health: Math.min(hp, this.getMaxHealth()),\n      })\n    );\n  }\n\n  setWater(w: number) {\n    let water = w;\n    const maxWater = this.getMaxWater();\n    if (water > maxWater) {\n      water = maxWater;\n    }\n    this.engine.dispatch(\n      this.engine.actions.game.world.setM({\n        water,\n      })\n    );\n  }\n\n  moveSouth() {\n    const curPos = this.engine.getState().game.world.curPos;\n    if (curPos[1] < config.World.RADIUS * 2) {\n      this.move(config.World.SOUTH);\n    }\n  }\n\n  moveWest() {\n    const curPos = this.engine.getState().game.world.curPos;\n    if (curPos[0] > 0) {\n      this.move(config.World.WEST);\n    }\n  }\n  moveEast() {\n    const curPos = this.engine.getState().game.world.curPos;\n    if (curPos[0] < config.World.RADIUS * 2) {\n      this.move(config.World.EAST);\n    }\n  }\n\n  moveNorth() {\n    const curPos = this.engine.getState().game.world.curPos;\n    if (curPos[1] > 0) {\n      this.move(config.World.NORTH);\n    }\n  }\n\n  async move(direction: number[]) {\n    let { map, mask, curPos, danger } = this.engine.getState().game.world;\n    mask = _.cloneDeep(mask);\n    curPos = _.cloneDeep(curPos);\n    const oldTile = map[curPos[0]][curPos[1]];\n    curPos[0] += direction[0];\n    curPos[1] += direction[1];\n    this.narrateMove(oldTile, map[curPos[0]][curPos[1]]);\n    this.lightMap(curPos[0], curPos[1], mask);\n    await this.engine.dispatch(\n      this.engine.actions.game.world.setM({\n        mask,\n        curPos,\n      })\n    );\n    await this.doSpace();\n\n    // play random footstep\n    if (this.checkDanger()) {\n      if (danger) {\n        this.engine.notify(\n          translate('dangerous to be this far from the village without proper protection'),\n          GameSpace.World\n        );\n      } else {\n        this.engine.notify(translate('safer here'), GameSpace.World);\n      }\n    }\n  }\n\n  useOutpost() {\n    this.engine.dispatch(this.engine.actions.game.world.useOutpost());\n    this.setWater(this.getMaxWater());\n    this.engine.notify(translate('water replenished'));\n  }\n\n  getMaxWater() {\n    const state = this.engine.store!.getState();\n    if (!!state.stores.water_tank) {\n      return config.World.BASE_WATER + 50;\n    } else if (!!state.stores.cask) {\n      return config.World.BASE_WATER + 20;\n    } else if (!!state.stores.waterskin) {\n      return config.World.BASE_WATER + 10;\n    }\n    return config.World.BASE_WATER;\n  }\n\n  generateMap() {\n    const RADIUS = config.World.RADIUS;\n    var map = new Array(RADIUS * 2 + 1);\n    for (var i = 0; i <= RADIUS * 2; i++) {\n      map[i] = new Array(RADIUS * 2 + 1);\n    }\n    // The Village is always at the exact center\n    // Spiral out from there\n    map[RADIUS][RADIUS] = config.World.TILE.VILLAGE;\n    for (var r = 1; r <= RADIUS; r++) {\n      for (var t = 0; t < r * 8; t++) {\n        var x, y;\n        if (t < 2 * r) {\n          x = RADIUS - r + t;\n          y = RADIUS - r;\n        } else if (t < 4 * r) {\n          x = RADIUS + r;\n          y = RADIUS - 3 * r + t;\n        } else if (t < 6 * r) {\n          x = RADIUS + 5 * r - t;\n          y = RADIUS + r;\n        } else {\n          x = RADIUS - r;\n          y = RADIUS + 7 * r - t;\n        }\n\n        map[x][y] = this.chooseTile(x, y, map);\n      }\n    }\n\n    // Place landmarks\n    for (var k in config.World.LANDMARKS) {\n      var landmark = config.World.LANDMARKS[k];\n      for (var l = 0; l < landmark.num; l++) {\n        this.placeLandmark(landmark.minRadius, landmark.maxRadius, k, map);\n      }\n    }\n\n    return map;\n  }\n\n  chooseTile(x: number, y: number, map: string[][]) {\n    var adjacent = [\n      y > 0 ? map[x][y - 1] : null,\n      y < config.World.RADIUS * 2 ? map[x][y + 1] : null,\n      x < config.World.RADIUS * 2 ? map[x + 1][y] : null,\n      x > 0 ? map[x - 1][y] : null,\n    ] as any[];\n\n    var chances = {} as any;\n    var nonSticky = 1;\n    var cur;\n    for (var i in adjacent) {\n      if (adjacent[i] == config.World.TILE.VILLAGE) {\n        // Village must be in a forest to maintain thematic consistency, yo.\n        return config.World.TILE.FOREST;\n      } else if (typeof adjacent[i] === 'string') {\n        cur = chances[adjacent[i]];\n        cur = typeof cur == 'number' ? cur : 0;\n        chances[adjacent[i]] = cur + config.World.STICKINESS;\n        nonSticky -= config.World.STICKINESS;\n      }\n    }\n    for (var t in config.World.TILE) {\n      var tile = (config.World.TILE as any)[t];\n      if (this.isTerrain(tile)) {\n        cur = chances[tile];\n        cur = typeof cur == 'number' ? cur : 0;\n        cur += config.World.TILE_PROBS[tile] * nonSticky;\n        chances[tile] = cur;\n      }\n    }\n\n    var list = [];\n    for (var j in chances) {\n      list.push(chances[j] + '' + j);\n    }\n    list.sort(function (a, b) {\n      var n1 = parseFloat(a.substring(0, a.length - 1));\n      var n2 = parseFloat(b.substring(0, b.length - 1));\n      return n2 - n1;\n    });\n\n    var c = 0;\n    var r = Math.random();\n    for (var l in list) {\n      var prob = list[l];\n      c += parseFloat(prob.substring(0, prob.length - 1));\n      if (r < c) {\n        return prob.charAt(prob.length - 1);\n      }\n    }\n\n    return config.World.TILE.BARRENS;\n  }\n\n  placeLandmark(\n    minRadius: number,\n    maxRadius: number,\n    landmark: string,\n    map: string[][]\n  ) {\n    var x = config.World.RADIUS,\n      y = config.World.RADIUS;\n    while (!this.isTerrain(map[x][y])) {\n      var r = Math.floor(Math.random() * (maxRadius - minRadius)) + minRadius;\n      var xDist = Math.floor(Math.random() * r);\n      var yDist = r - xDist;\n      if (Math.random() < 0.5) xDist = -xDist;\n      if (Math.random() < 0.5) yDist = -yDist;\n      x = config.World.RADIUS + xDist;\n      if (x < 0) x = 0;\n      if (x > config.World.RADIUS * 2) x = config.World.RADIUS * 2;\n      y = config.World.RADIUS + yDist;\n      if (y < 0) y = 0;\n      if (y > config.World.RADIUS * 2) y = config.World.RADIUS * 2;\n    }\n    map[x][y] = landmark;\n    return [x, y];\n  }\n\n  isTerrain(tile: string) {\n    return (\n      tile == config.World.TILE.FOREST ||\n      tile == config.World.TILE.FIELD ||\n      tile == config.World.TILE.BARRENS\n    );\n  }\n\n  mapSearch(target: string, map: any[][], required: number) {\n    var max = config.World.LANDMARKS[target].num;\n    if (!max) {\n      // this restrict the research to numerable landmarks\n      return null;\n    }\n    // restrict research if only a fixed number (usually 1) is required\n    max = required ? Math.min(required, max) : max;\n    var index = 0;\n    var targets = [];\n    const RADIUS = config.World.RADIUS;\n    // label for coordinate research\n    search: for (var i = 0; i <= RADIUS * 2; i++) {\n      for (var j = 0; j <= RADIUS * 2; j++) {\n        if (map[i][j].charAt(0) === target) {\n          // search result is stored as an object;\n          // items are listed as they appear in the map, tl-br\n          // each item has relative coordinates and a compass-type direction\n          targets[index] = {\n            x: i - RADIUS,\n            y: j - RADIUS,\n          };\n          index++;\n          if (index === max) {\n            // optimisation: stop the research if maximum number of items has been reached\n            break search;\n          }\n        }\n      }\n    }\n    return targets;\n  }\n\n  compassDir(pos: { x: number; y: number }) {\n    let dir = '';\n    const horz = pos.x < 0 ? 'west' : 'east';\n    const vert = pos.y < 0 ? 'north' : 'south';\n    if (Math.abs(pos.x) / 2 > Math.abs(pos.y)) {\n      dir = horz;\n    } else if (Math.abs(pos.y) / 2 > Math.abs(pos.x)) {\n      dir = vert;\n    } else {\n      dir = vert + horz;\n    }\n    return dir;\n  }\n\n  async goHome() {\n    const state = this.engine.getState();\n    if (state.game.world.sulphurmine && !state.game.buildings.sulphur_mine) {\n      this.engine.dispatch(\n        this.engine.actions.game.buildings.addM({\n          sulphur_mine: 1,\n        })\n      );\n    }\n    if (state.game.world.ironmine && !state.game.buildings.iron_mine) {\n      this.engine.dispatch(\n        this.engine.actions.game.buildings.addM({\n          iron_mine: 1,\n        })\n      );\n    }\n    if (state.game.world.coalmine && !state.game.buildings.coal_mine) {\n      this.engine.dispatch(\n        this.engine.actions.game.buildings.addM({\n          coal_mine: 1,\n        })\n      );\n    }\n    // if (state.game.world.ship && !state.features.location.Ship) {\n    //   this.engine.dispatch(\n    //     this.engine.actions.features.location.enableSpaceShip()\n    //   );\n    // }\n\n    this.engine.dispatch(\n      this.engine.actions.stores.addM(state.game.world.outfit)\n    );\n\n    this.engine.travelTo(GameSpace.Path);\n  }\n\n  getFreeSpace() {\n    const state = this.engine.getState();\n    let num = 0;\n    for (let k in state.game.world.outfit) {\n      const n = state.game.world.outfit[k] || 0;\n      num += n * this.engine.spaces.Path.getWeight(k as StoreCategory);\n    }\n    return this.engine.spaces.Path.getCapacity() - num;\n  }\n\n  die() {\n    const state = this.engine.getState();\n    if (!state.game.world.dead) {\n      this.engine.dispatch(\n        this.engine.actions.game.world.setM({\n          dead: true,\n        })\n      );\n      // Dead! Discard any world changes and go home\n      this.engine.notify(translate('the world fades'), GameSpace.World);\n      this.engine.dispatch(this.engine.actions.path.outfit.empty());\n      this.engine.travelTo(GameSpace.Room);\n    }\n  }\n\n  checkFight() {\n    const state = this.engine.getState();\n    let fightMove = state.game.world.fightMove + 1;\n    if (fightMove > config.World.FIGHT_DELAY) {\n      var chance = config.World.FIGHT_CHANCE;\n      chance *= state.character.perks.stealthy ? 0.5 : 1;\n      if (Math.random() < chance) {\n        fightMove = 0;\n        this.engine.events.triggerFight();\n      }\n    }\n    this.engine.dispatch(\n      this.engine.actions.game.world.setM({\n        fightMove,\n      })\n    );\n  }\n\n  narrateMove(oldTile: string, newTile: string) {\n    var msg = null;\n    switch (oldTile) {\n      case config.World.TILE.FOREST:\n        switch (newTile) {\n          case config.World.TILE.FIELD:\n            msg = translate('the trees yield to dry grass. the yellowed brush rustles in the wind.');\n            break;\n          case config.World.TILE.BARRENS:\n            msg = translate('the trees are gone. parched earth and blowing dust are poor replacements.');\n            break;\n        }\n        break;\n      case config.World.TILE.FIELD:\n        switch (newTile) {\n          case config.World.TILE.FOREST:\n            msg = translate('trees loom on the horizon. grasses gradually yield to a forest floor of dry branches and fallen leaves.');\n            break;\n          case config.World.TILE.BARRENS:\n            msg = translate('the grasses thin. soon, only dust remains.');\n            break;\n        }\n        break;\n      case config.World.TILE.BARRENS:\n        switch (newTile) {\n          case config.World.TILE.FIELD:\n            msg = translate('the barrens break at a sea of dying grass, swaying in the arid breeze.');\n            break;\n          case config.World.TILE.FOREST:\n            msg = translate('a wall of gnarled trees rises from the dust. their branches twist into a skeletal canopy overhead.');\n            break;\n        }\n        break;\n    }\n    if (msg != null) {\n      this.engine.notify(msg, GameSpace.World);\n    }\n  }\n\n  getDistance(from?: number[], to?: number[]) {\n    if (!from) {\n      from = this.engine.getState().game.world.curPos;\n    }\n    to = to || config.World.VILLAGE_POS;\n    return Math.abs(from[0] - to[0]) + Math.abs(from[1] - to[1]);\n  }\n\n  outpostUsed(x?: number, y?: number) {\n    const { curPos, usedOutposts } = this.engine.getState().game.world;\n    x = typeof x == 'number' ? x : curPos[0];\n    y = typeof y == 'number' ? y : curPos[1];\n    const used = usedOutposts[x + ',' + y];\n    return used === true;\n  }\n\n  async useSupplies() {\n    const state = this.engine.getState();\n    let foodMove = state.game.world.foodMove + 1;\n    let waterMove = state.game.world.waterMove + 1;\n    const changed = {\n      foodMove,\n      waterMove,\n    } as any;\n    // Food\n    let movesPerFood = config.World.MOVES_PER_FOOD;\n    movesPerFood *= state.character.perks.slow_metabolism ? 2 : 1;\n    if (foodMove >= movesPerFood) {\n      foodMove = 0;\n      changed.foodMove = 0;\n      let num = state.game.world.outfit.cured_meat || 0;\n      num--;\n      if (num === 0) {\n        this.engine.notify(translate('the meat has run out'), GameSpace.World);\n      } else if (num < 0) {\n        // Starvation! Hooray!\n        num = 0;\n        if (!state.game.world.starvation) {\n          this.engine.notify(translate('starvation sets in'), GameSpace.World);\n          changed.starvation = true;\n        } else {\n          const starvedCount = state.character.statistics.starved + 1;\n          this.engine.dispatch(\n            this.engine.actions.character.statistics.setM({\n              starved: starvedCount,\n            })\n          );\n          if (starvedCount >= 10 && !state.character.perks.slow_metabolism) {\n            this.engine.dispatch(\n              this.engine.actions.character.perks.addPerk(\n                PerkCategory.slow_metabolism\n              )\n            );\n          }\n          this.engine.dispatch(this.engine.actions.game.world.setM(changed));\n          this.die();\n          return false;\n        }\n      } else {\n        changed.starvation = false;\n        changed.health = Math.min(state.game.world.health + this.meatHeal(), this.getMaxHealth());\n      }\n      changed['outfit.cured_meat'] = num;\n    }\n    // Water\n    let movesPerWater = config.World.MOVES_PER_WATER;\n    movesPerWater *= state.character.perks.desert_rat ? 2 : 1;\n    if (waterMove >= movesPerWater) {\n      waterMove = 0;\n      changed.waterMove = 0;\n      let water = state.game.world.water;\n      water--;\n      if (water === 0) {\n        this.engine.notify(translate('there is no more water'), GameSpace.World);\n      } else if (water < 0) {\n        water = 0;\n        if (!state.game.world.thirst) {\n          this.engine.notify(translate('the thirst becomes unbearable'), GameSpace.World);\n          changed.thirst = true;\n        } else {\n          const dehydratedCount = state.character.statistics.dehydrated + 1;\n          this.engine.dispatch(\n            this.engine.actions.character.statistics.setM({\n              dehydrated: dehydratedCount,\n            })\n          );\n          if (dehydratedCount >= 10 && !state.character.perks.desert_rat) {\n            this.engine.dispatch(\n              this.engine.actions.character.perks.addPerk(\n                PerkCategory.desert_rat\n              )\n            );\n          }\n          this.engine.dispatch(this.engine.actions.game.world.setM(changed));\n          this.die();\n          return false;\n        }\n      } else {\n        changed.thirst = false;\n      }\n      changed.water = water;\n    }\n    await this.engine.dispatch(this.engine.actions.game.world.setM(changed));\n    return true;\n  }\n\n  meatHeal() {\n    const state = this.engine.getState();\n    return config.World.MEAT_HEAL * (state.character.perks.gastronome ? 2 : 1);\n  }\n\n  medsHeal() {\n    return config.World.MEDS_HEAL;\n  }\n\n  checkDanger() {\n    const state = this.engine.getState();\n    if (!state.game.world.danger) {\n      if (!state.stores.i_armour && this.getDistance() >= 8) {\n        this.engine.dispatch(\n          this.engine.actions.game.world.setM({\n            danger: true,\n          })\n        );\n        return true;\n      }\n      if (!state.stores.s_armour && this.getDistance() >= 18) {\n        this.engine.dispatch(\n          this.engine.actions.game.world.setM({\n            danger: true,\n          })\n        );\n        return true;\n      }\n    } else {\n      if (this.getDistance() < 8) {\n        this.engine.dispatch(\n          this.engine.actions.game.world.setM({\n            danger: false,\n          })\n        );\n        return true;\n      }\n      if (this.getDistance() < 18 && (state.stores.i_armour || 0) > 0) {\n        this.engine.dispatch(\n          this.engine.actions.game.world.setM({\n            danger: false,\n          })\n        );\n        return true;\n      }\n    }\n    return false;\n  }\n\n  async doSpace() {\n    const { map, curPos } = this.engine.getState().game.world;\n    const curTile = map[curPos[0]][curPos[1]];\n    if (curTile === config.World.TILE.VILLAGE) {\n      this.goHome();\n    } else if (typeof config.World.LANDMARKS[curTile] !== 'undefined') {\n      if (curTile !== config.World.TILE.OUTPOST || !this.outpostUsed()) {\n        const event = this.engine.events.eventPool.World.find((event) => {\n          return event.id === config.World.LANDMARKS[curTile].scene;\n        })\n        if (event) {\n          this.engine.events.startEvent(\n            event\n          );\n        }\n      }\n    } else {\n      const res = await this.useSupplies();\n      if (res) {\n        this.checkFight();\n      }\n    }\n  }\n}\n","export function needsWorkshop(type?: string) {\n  return type == 'weapon' || type == 'upgrade' || type == 'tool';\n}\n","import { operationManager } from './index';\nimport translate from '../translate';\nimport config, { TradeCategory, CraftableCategory } from '../config';\nimport { GameSpace, StoreCategory, Building } from '../type';\nimport _ from 'lodash';\nimport {needsWorkshop} from '../tools/room';\n\noperationManager.add({\n    id: 'Room.lightFire',\n    name: translate(\"light fire\"),\n    isAvailable: (engine) => {\n        const state = engine.getState();\n        return !state.engine.activeSubSpace && state.engine.activeSpace === GameSpace.Room && state.game.fire.status.value === config.Room.FireStatus.Dead.value;\n    },\n    exec: async (engine) => {\n        const Room = engine.spaces.Room;\n        const appState = engine.getState();\n        let wood = appState.stores.wood;\n        let currentFireStatus = appState.game.fire.status;\n\n        if (typeof wood !== 'undefined') {\n            wood = wood || 0;\n            if (wood < 5) {\n                engine.notify(\n                    translate('not enough wood to get the fire going'),\n                    GameSpace.Room\n                );\n                engine.operationExecutor.clearCooldown('Room.lightFire')\n                return currentFireStatus;\n            } else if (wood > 4) {\n                await engine.dispatch(engine.actions.stores.addM({\n                    wood: -5\n                }))\n            }\n        } else {\n            await engine.dispatch(engine.actions.stores.addM({\n                wood: 5\n            }))\n            await engine.operationExecutor.cooldown('Room.stokeFire')\n        }\n\n        currentFireStatus = config.Room.FireStatus.Burning;\n        await engine.dispatch(\n            engine.actions.game.fire.changeFire(currentFireStatus)\n        );\n        Room.onFireChange(currentFireStatus);\n        return currentFireStatus;\n    },\n    cooldown: () => {\n        return config.Room.STOKE_COOLDOWN;\n    },\n    meta: {\n        space: GameSpace.Room,\n        cost: {\n            [StoreCategory.wood]: 5\n        }\n    }\n})\n\noperationManager.add({\n    id: 'Room.stokeFire',\n    name: translate(\"stoke fire\"),\n    isAvailable: (engine) => {\n        const state = engine.getState();\n        return !state.engine.activeSubSpace &&  state.engine.activeSpace === GameSpace.Room && state.game.fire.status.value !== config.Room.FireStatus.Dead.value;\n    },\n    exec: async (engine) => {\n        const appState = engine.getState();\n        const wood = appState.stores.wood;\n        const Room = engine.spaces.Room;\n        let currentFireStatus = appState.game.fire.status;\n        if (!wood) {\n            engine.notify(translate('the wood has run out'), GameSpace.Room);\n            engine.operationExecutor.clearCooldown('Room.stokeFire');\n            return currentFireStatus;\n        }\n        await engine.dispatch(\n            engine.actions.stores.addM({\n                wood: -1,\n            })\n        );\n        if (currentFireStatus.value < config.Room.FireStatus.Roaring.value) {\n            const newState = _.findKey(config.Room.FireStatus, fire => {\n                return fire.value === currentFireStatus.value + 1;\n            });\n            if (newState) {\n                currentFireStatus =\n                    config.Room.FireStatus[\n                    newState as keyof typeof config.Room.FireStatus\n                    ];\n                await engine.dispatch(\n                    engine.actions.game.fire.changeFire(currentFireStatus)\n                );\n            }\n        }\n        Room.onFireChange(currentFireStatus);\n        return currentFireStatus;\n    },\n    cooldown: () => {\n        return config.Room.STOKE_COOLDOWN\n    },\n    meta: {\n        space: GameSpace.Room,\n        cost: {\n            [StoreCategory.wood]: 1\n        }\n    }\n})\n\noperationManager.add({\n    id: 'Room.stores',\n    name: translate(\"warehouse\"),\n    isAvailable: (engine) => {\n        const state = engine.getState();\n        return !state.engine.activeSubSpace && state.engine.activeSpace === GameSpace.Room && typeof state.stores.wood !== 'undefined'\n    },\n    exec: async (engine) => {\n        const state = engine.getState();\n        let storeNames = Object.keys(state.stores);\n        const stores = [];\n        for (let i = 0, len = storeNames.length; i < len; i++) {\n            const name = storeNames[i];\n            const count = state.stores[name as StoreCategory];\n            if (!!count && config.items[name] && config.items[name].type !== 'building') {\n                stores.push({\n                    name,\n                    count,\n                    info: config.items[name]\n                })\n            }\n        }\n        return stores;\n    },\n    meta: {\n        space: GameSpace.Room,\n    }\n})\n\noperationManager.add({\n    id: 'Room.trading_post',\n    name: translate('trading post'),\n    isAvailable: (engine) => {\n        const state = engine.getState();\n        return !state.engine.activeSubSpace && state.engine.activeSpace === GameSpace.Room && !!state.game.buildings.trading_post;\n    },\n    meta: {\n        space: GameSpace.Room,\n    },\n    exec: async (engine, operation) => {\n        await engine.travelToSubSpace(operation.name);\n        return operation.name;\n    }\n})\n\noperationManager.add({\n    id: 'Room.workshop',\n    name: translate('workshop'),\n    isAvailable: (engine) => {\n        const state = engine.getState();\n        return !state.engine.activeSubSpace && state.engine.activeSpace === GameSpace.Room && !!state.game.buildings.workshop;\n    },\n    meta: {\n        space: GameSpace.Room,\n    },\n    exec: async (engine, operation) => {\n        await engine.travelToSubSpace(operation.name);\n        return operation.name;\n    }\n})\n\n\nObject.keys(TradeCategory).forEach((thing) => {\n    operationManager.add({\n        id: `Room.buy.${thing}`,\n        name: translate(thing),\n        isAvailable: (engine, operation) => {\n            const state = engine.getState();\n            const thing = operation.meta.thing;\n            return state.engine.activeSubSpace === 'trading post' && engine.spaces.Room.buyUnlocked(thing);\n        },\n        meta: {\n            thing,\n            space: GameSpace.Room,\n            group: 'buy'\n        },\n        exec: async (engine, operation) => {\n            const thing = operation.meta.thing as StoreCategory;\n            const state = engine.getState();\n            const good = config.items[thing];\n            let count = state.stores[thing] || 0;\n            if (count < 0) {\n                count = 0;\n            }\n            if (!good.trade) {\n                return false;\n            }\n            if (good.trade.maximum && good.trade.maximum < count) {\n                /* i18n-extract can't buy any more of {item} */\n                engine.notify(`can't buy any more of ${good.name}`, GameSpace.Room);\n                return false;\n            }\n            const storeMod = {} as { [key: string]: number };\n            const cost = good.trade.cost();\n            for (let k in cost) {\n                const have = state.stores[k as StoreCategory] || 0;\n                if (have < cost[k]) {\n                    /* i18n-extract not enough {item}, need {count1}, stock {count2} */\n                    engine.notify(`not enough ${k}, need ${cost[k]}, stock ${have}`, GameSpace.Room);\n                    return false;\n                } else {\n                    storeMod[k] = have - cost[k];\n                }\n            }\n            await await engine.dispatch(engine.actions.stores.addM(storeMod));\n            if (good.trade.tradeMsg) {\n                engine.notify(good.trade.tradeMsg);\n            }\n            await engine.dispatch(\n                engine.actions.stores.addM({\n                    [thing]: 1,\n                })\n            );\n            return true;\n        }\n    })\n})\n\nObject.keys(CraftableCategory).forEach((thing) => {\n    const item = config.items[thing];\n    const group = needsWorkshop(item.craft!.type) ? 'craft' : 'build';\n    operationManager.add({\n        id: `Room.${group}.${thing}`,\n        name: translate(thing),\n        isAvailable: (engine, operation) => {\n            const state = engine.getState();\n            const thing = operation.meta.thing;\n            const group = operation.meta.group;\n            if (group === 'craft') {\n                return state.engine.activeSubSpace === 'workshop' && state.engine.activeSpace === GameSpace.Room && engine.spaces.Room.craftUnlocked(thing);\n            }\n            return !state.engine.activeSubSpace && state.engine.activeSpace === GameSpace.Room && engine.spaces.Room.craftUnlocked(thing);\n        },\n        meta: {\n            thing,\n            space: GameSpace.Room,\n            group\n        },\n        exec: async (engine, operation) => {\n            const thing = operation.meta.thing as StoreCategory;\n            const state = engine.getState();\n            if (\n                state.game.temperature.status.value <=\n                config.Room.TemperatureStatus.Cold.value\n            ) {\n                engine.notify('builder just shivers', GameSpace.Room);\n                return false;\n            }\n            const craftable = config.items[thing];\n\n            if (!craftable.craft) {\n                return false;\n            }\n\n            let numThings = 0;\n            switch (craftable.type) {\n                case 'good':\n                case 'weapon':\n                case 'tool':\n                case 'upgrade':\n                    numThings = state.stores[(thing as any) as StoreCategory] || 0;\n                    break;\n                case 'building':\n                    numThings = state.game.buildings[(thing as any) as Building] || 0;\n                    break;\n            }\n\n            if (numThings < 0) numThings = 0;\n            if (craftable.craft.maximum && craftable.craft.maximum <= numThings) {\n                /* i18n-extract can't build any more of {item} */\n                engine.notify(`can't build any more of ${craftable.name}`, GameSpace.Room);\n                return false;\n            }\n\n            const storeMod = {} as { [key in StoreCategory]: number };\n            const cost = craftable.craft.cost(state);\n            for (var k in cost) {\n                var have = state.stores[k as StoreCategory] || 0;\n                if (have < cost[k]) {\n                    engine.notify(`not enough ${k}, need ${cost[k]}, stock ${have}`, GameSpace.Room);\n                    return false;\n                } else {\n                    storeMod[k as StoreCategory] = have - cost[k];\n                }\n            }\n            await engine.setToStore(storeMod);\n\n            if (craftable.craft.buildMsg) {\n                engine.notify(craftable.craft?.buildMsg, GameSpace.Room);\n            }\n\n            switch (craftable.craft?.type) {\n                case 'good':\n                case 'weapon':\n                case 'upgrade':\n                case 'tool':\n                    await engine.addToStore({\n                        [thing]: 1,\n                    });\n                    break;\n                case 'building':\n                    await engine.dispatch(\n                        engine.actions.game.buildings.addM({\n                            [thing]: 1,\n                        })\n                    );\n                    break;\n            }\n            return true;\n        }\n    })\n})","import Engine from './engine';\nimport { StoreCategory, Building, GameSpace, FireStatus } from './type';\nimport config, { CraftableCategory } from './config';\nimport _ from 'lodash';\nimport GameModule from './module';\nimport './operations/room';\nimport translate from './translate';\nimport {needsWorkshop} from './tools/room';\n\nexport default class Room extends GameModule {\n  _fireTimer: any = null;\n  _tempTimer: any = null;\n  _builderTimer: any = null;\n  constructor(engine: Engine) {\n    super(engine);\n    const state = engine.getState();\n    if (!state.features.location.Room) {\n      engine.dispatch(engine.actions.features.location.enableRoom());\n      engine.dispatch(\n        engine.actions.game.builder.setM({\n          level: -1,\n        })\n      );\n    }\n\n    this._fireTimer = engine.setTimeout(\n      this.coolFire.bind(this),\n      config.Room.FIRE_COOL_DELAY\n    );\n    this._tempTimer = engine.setTimeout(\n      this.adjustTemp.bind(this),\n      config.Room.ROOM_WARM_DELAY\n    );\n    const builderLevel = state.game.builder.level;\n    if (builderLevel >= 0 && builderLevel < 3) {\n      this._builderTimer = engine.setTimeout(\n        this.updateBuilderState.bind(this),\n        config.Room.BUILDER_STATE_DELAY\n      );\n    }\n    if (builderLevel == 1 && typeof state.stores.wood === 'undefined') {\n      this.engine.setTimeout(this.unlockForest.bind(this), config.Room.NEED_WOOD_DELAY);\n    }\n\n    this.engine.observer(\n      state => {\n        return {\n          wood: state.stores.wood,\n          meat: state.stores.meat,\n          fur: state.stores.fur,\n          thieves: state.game.thieves,\n          enableWorld: state.features.location.World,\n        };\n      },\n      state => {\n        if (!state.thieves && state.enableWorld) {\n          if (\n            (state.wood || 0) > 5000 ||\n            (state.meat || 0) > 5000 ||\n            (state.fur || 0) > 5000\n          ) {\n            this.startThieves();\n          }\n        }\n      }\n    );\n  }\n\n  coolFire() {\n    const appState = this.engine.getState();\n    const wood = appState.stores.wood;\n    let currentFireStatus = appState.game.fire.status;\n    const builderLevel = appState.game.builder.level;\n    if (\n      currentFireStatus.value <= config.Room.FireStatus.Flickering.value &&\n      builderLevel > 3 &&\n      !!wood\n    ) {\n      this.engine.notify(translate('builder stokes the fire'), GameSpace.Room, true);\n      this.engine.dispatch(\n        this.engine.actions.stores.addM({\n          wood: -1,\n        })\n      );\n      currentFireStatus =\n        config.Room.FireStatus[\n          _.findKey(config.Room.FireStatus, fire => {\n            return fire.value === currentFireStatus.value + 1;\n          }) as keyof typeof config.Room.FireStatus\n        ];\n    }\n    if (currentFireStatus.value > 0) {\n      currentFireStatus =\n        config.Room.FireStatus[\n          _.findKey(config.Room.FireStatus, fire => {\n            return fire.value === currentFireStatus.value - 1;\n          }) as keyof typeof config.Room.FireStatus\n        ];\n      this.engine.dispatch(\n        this.engine.actions.game.fire.changeFire(currentFireStatus)\n      );\n      this.onFireChange(currentFireStatus);\n    }\n  }\n\n\n  onArrival() {\n    const state = this.engine.getState();\n    if (state.room.changed) {\n      /* i18n-extract the fire is {fireStatus} */\n      /* i18n-extract the room is {roomStatus} */\n      this.engine.notify(`the fire is ${state.game.fire.status.text}`);\n      this.engine.notify(`the room is ${state.game.temperature.status.text}`);\n      this.engine.dispatch(this.engine.actions.room.setChanged(false));\n    }\n    if (state.game.builder.level === 3) {\n      this.engine.dispatch(\n        this.engine.actions.game.builder.addM({\n          level: 1,\n        })\n      );\n      this.engine.setIncome('builder', {\n        delay: 10,\n        stores: { wood: 2 },\n      });\n      this.engine.notify(\n        translate('the stranger is standing by the fire. she says she can help. says she builds things.'),\n        GameSpace.Room\n      );\n    }\n  }\n\n  canTrade(thing: Building | StoreCategory) {\n    const state = this.engine.getState();\n    if (state.room.crafts[thing]) {\n      return true;\n    } else if (state.game.buildings.trading_post > 0) {\n      if (\n        thing === StoreCategory.compass ||\n        typeof state.stores[thing as StoreCategory] !== 'undefined'\n      ) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  buyUnlocked(thing: Building | StoreCategory) {\n    const state = this.engine.getState();\n    if (state.room.buys[thing]) {\n      return true;\n    } else if (!!state.game.buildings.trading_post) {\n      if (\n        thing === StoreCategory.compass ||\n        typeof state.stores[thing as StoreCategory] !== 'undefined'\n      ) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  clean() {\n    clearTimeout(this._fireTimer)\n    clearTimeout(this._tempTimer)\n    clearTimeout(this._builderTimer)\n    super.clean();\n  }\n\n  craftUnlocked(thing: CraftableCategory) {\n    const state = this.engine.getState();\n    if (state.room.crafts[thing]) {\n      return true;\n    }\n    if (state.game.builder.level < 4) {\n      return false;\n    }\n    const craftable = config.items[thing];\n\n    if (!craftable.craft) {\n      return false;\n    }\n\n    if (\n      needsWorkshop(craftable.type) &&\n      state.game.buildings.workshop === 0\n    ) {\n      return false;\n    }\n\n    const cost = craftable.craft.cost(state);\n\n    if (state.game.buildings[(thing as any) as Building] > 0) {\n      this.engine.dispatch(\n        this.engine.actions.room.addCraft({\n          name: thing\n        })\n      );\n      return true;\n    }\n\n    if (cost.wood && (state.stores.wood || 0) < cost.wood * 0.5) {\n      return false;\n    }\n\n    for (var c in cost) {\n      if (!state.stores[c as StoreCategory]) {\n        return false;\n      }\n    }\n\n    this.engine.dispatch(\n      this.engine.actions.room.addCraft({\n        name: thing,\n      })\n    );\n\n    if (\n      craftable.craft.availableMsg &&\n      !state.game.buildings[(thing as any) as Building]\n    ) {\n      this.engine.notify(craftable.craft.availableMsg, GameSpace.Room);\n    }\n\n    return true;\n  }\n\n  adjustTemp() {\n    const state = this.engine.getState();\n    const old = state.game.temperature.status;\n    let temperature = old;\n    const fireStatus = state.game.fire.status;\n    if (old.value > 0 && old.value > fireStatus.value) {\n      temperature =\n        config.Room.TemperatureStatus[\n          _.findKey(config.Room.TemperatureStatus, temp => {\n            return temp.value === temperature.value - 1;\n          }) as keyof typeof config.Room.TemperatureStatus\n        ];\n      this.engine.notify(\n        `the room is ${temperature.text}`,\n        GameSpace.Room,\n        true\n      );\n    }\n    if (temperature.value < 4 && temperature.value < fireStatus.value) {\n      temperature =\n        config.Room.TemperatureStatus[\n          _.findKey(config.Room.TemperatureStatus, temp => {\n            return temp.value === temperature.value + 1;\n          }) as keyof typeof config.Room.TemperatureStatus\n        ];\n      this.engine.notify(\n        `the room is ${temperature.text}`,\n        GameSpace.Room,\n        true\n      );\n    }\n    if (temperature.value != old.value) {\n      this.engine.dispatch(this.engine.actions.room.setChanged(true));\n      this.engine.dispatch(\n        this.engine.actions.game.temperature.change(temperature)\n      );\n    }\n    this._tempTimer = this.engine.setTimeout(\n      this.adjustTemp.bind(this),\n      config.Room.ROOM_WARM_DELAY\n    );\n  }\n\n  onFireChange(fireStatus: FireStatus) {\n    const appState = this.engine.getState();\n    if (appState.engine.activeSpace !== GameSpace.Room) {\n      this.engine.dispatch(this.engine.actions.room.setChanged(true));\n    }\n    this.engine.notify(`the fire is ${fireStatus.text}`, GameSpace.Room, true);\n    const builderLevel = appState.game.builder.level;\n    if (\n      fireStatus.value > config.Room.FireStatus.Smoldering.value &&\n      builderLevel < 0\n    ) {\n      this.engine.dispatch(\n        this.engine.actions.game.builder.setM({\n          level: 0,\n        })\n      );\n      this.engine.notify(\n        translate('the light from the fire spills from the windows, out into the dark'),\n        GameSpace.Room\n      );\n      this.engine.setTimeout(\n        this.updateBuilderState.bind(this),\n        config.Room.BUILDER_STATE_DELAY\n      );\n    }\n    clearTimeout(this._fireTimer);\n    this._fireTimer = this.engine.setTimeout(\n      this.coolFire.bind(this),\n      config.Room.FIRE_COOL_DELAY\n    );\n  }\n\n  updateBuilderState() {\n    if (!this.engine) {\n      return;\n    }\n    const state = this.engine.getState();\n    let lBuilder = state.game.builder.level;\n    if (lBuilder === 0) {\n      this.engine.notify(\n        translate('a ragged stranger stumbles through the door and collapses in the corner'),\n        GameSpace.Room\n      );\n      lBuilder = 1;\n      this.engine.dispatch(\n        this.engine.actions.game.builder.setM({\n          level: 1,\n        })\n      );\n      this.engine.setTimeout(this.unlockForest.bind(this), config.Room.NEED_WOOD_DELAY);\n    } else if (\n      lBuilder < 3 &&\n      state.game.temperature.status.value >=\n        config.Room.TemperatureStatus.Warm.value\n    ) {\n      let msg = '';\n      switch (lBuilder) {\n        case 1:\n          msg =\n            translate('the stranger shivers, and mumbles quietly. her words are unintelligible.');\n          break;\n        case 2:\n          msg =\n            translate('the stranger in the corner stops shivering. her breathing calms.');\n          break;\n      }\n      this.engine.notify(msg, GameSpace.Room);\n      if (lBuilder < 3) {\n        lBuilder += 1;\n        this.engine.dispatch(\n          this.engine.actions.game.builder.setM({\n            level: lBuilder,\n          })\n        );\n      }\n    }\n    if (lBuilder < 3) {\n      this.engine.setTimeout(\n        this.updateBuilderState.bind(this),\n        config.Room.BUILDER_STATE_DELAY\n      );\n    }\n  }\n\n  unlockForest() {\n    this.engine.dispatch(\n      this.engine.actions.stores.setM({\n        wood: 4,\n      })\n    );\n    this.engine.dispatch(this.engine.actions.features.location.enableOutside());\n    this.engine.notify(translate('the wind howls outside'), GameSpace.Room);\n    this.engine.notify(translate('the wood is running out'), GameSpace.Room);\n  }\n\n  startThieves() {\n    this.engine.dispatch(this.engine.actions.game.thieves.change(1));\n    this.engine.setIncome('thieves', {\n      delay: 10,\n      stores: {\n        wood: -10,\n        fur: -5,\n        meat: -5,\n      },\n    });\n  }\n}\n","import { operationManager } from './index';\nimport translate from '../translate';\nimport config from '../config';\nimport { GameSpace, StoreCategory, PerkCategory, Perks } from '../type';\nimport _ from 'lodash';\n\noperationManager.add({\n    id: 'Path.perks',\n    name: translate('perks'),\n    isAvailable: (engine) => {\n        const state = engine.getState();\n        if (!(!state.engine.activeSubSpace && state.engine.activeSpace === GameSpace.Path)) {\n            return false;\n        }\n        let isExist = false;\n        for (let perk in state.character.perks) {\n            if (state.character.perks[perk as PerkCategory]) {\n                isExist = true;\n                break;\n            }\n        }\n        return isExist;\n    },\n    exec: async (engine) => {\n        const state = engine.getState();\n        const perks = [] as {name: string, desc: string}[];\n        for (let perk in state.character.perks) {\n            if (state.character.perks[perk as PerkCategory]) {\n                perks.push({\n                    name: perk,\n                    desc: Perks[perk as PerkCategory].desc\n                })\n            }\n        }\n        \n        return perks;\n    },\n    meta: {\n        space: GameSpace.Path,\n    }\n})\n\noperationManager.add({\n    id: 'Path.embark',\n    name: translate('embark'),\n    cooldown: () => {\n        return config.World.DEATH_COOLDOWN\n    },\n    isAvailable: (engine) => {\n        const state = engine.getState();\n        return state.engine.activeSpace === GameSpace.Path;\n    },\n    meta: {\n        space: GameSpace.Path\n    },\n    exec: async (engine) => {\n        const state = engine.getState();\n        const outfit = state.path.outfit;\n        const addStores = {} as any;\n        for (var k in state) {\n            addStores[k] = -1 * (outfit[k as StoreCategory] || 0);\n        }\n        await engine.dispatch(engine.actions.stores.addM(addStores));\n        const cloneOutfit = {} as any;\n        for (let key in outfit) {\n            if (!!outfit[key as StoreCategory]) {\n                cloneOutfit[key] = outfit[key as StoreCategory];\n            }\n        }\n        await engine.dispatch(engine.actions.game.world.setM({\n            outfit: _.cloneDeep(cloneOutfit)\n        }))\n        await engine.travelTo(GameSpace.World);\n    }\n})","import Engine from './engine';\nimport config, { CraftableCategory, NonCraftableCategory } from './config';\nimport { StoreCategory } from './type';\nimport _ from 'lodash';\nimport GameModule from './module';\nimport './operations/path';\nexport default class Path extends GameModule {\n  constructor(engine: Engine) {\n    super(engine);\n\n    this.engine.observer(\n      state => {\n        return {\n          compass: state.stores.compass,\n          pathEnable: state.features.location.Path\n        };\n      },\n      state => {\n        if (state.compass && !state.pathEnable) {\n          this.openPath();\n        }\n      }\n    );\n  }\n\n  onArrival() {\n    this.updateOutfitting();\n  }\n\n  async openPath() {\n    const state = this.engine.getState();\n    await this.engine.dispatch(\n      this.engine.actions.features.location.enablePath()\n    );\n    /* i18n-extract the compass points {dir} */\n    this.engine.notify('the compass points ' + state.game.world.dir);\n  }\n\n  getWeight(thing: StoreCategory) {\n    let w = config.Path.Weight[thing];\n    if (typeof w !== 'number') w = 1;\n    return w;\n  }\n\n  getCapacity() {\n    const state = this.engine.getState();\n    if (!!state.stores.convoy) {\n      return config.Path.DEFAULT_BAG_SPACE + 60;\n    } else if (!!state.stores.wagon) {\n      return config.Path.DEFAULT_BAG_SPACE + 30;\n    } else if (!!state.stores.rucksack) {\n      return config.Path.DEFAULT_BAG_SPACE + 10;\n    } else {\n      return config.Path.DEFAULT_BAG_SPACE;\n    }\n  }\n\n  getFreeSpace() {\n    const state = this.engine.getState();\n    let num = 0;\n    for (let k in state.path.outfit) {\n      const n = state.path.outfit[k as StoreCategory] || 0;\n      num += n * this.getWeight(k as StoreCategory);\n    }\n    return this.getCapacity() - num;\n  }\n\n  updateOutfitting() {\n    const state = this.engine.getState();\n    const outfits = Object.keys(NonCraftableCategory).concat(\n      Object.keys(CraftableCategory)\n    );\n    let outfitChanged = false;\n    let setOutfit = {} as any;\n    for (let k in outfits) {\n      const itemName = k as StoreCategory;\n      const have = state.stores[itemName] || 0;\n      let num = state.path.outfit[itemName] || 0;\n      num = typeof num === 'number' ? num : 0;\n      if (have < num) {\n        num = have;\n        outfitChanged = true;\n        setOutfit[k] = num;\n      }\n    }\n    if (outfitChanged) {\n      this.engine.dispatch(this.engine.actions.path.outfit.setM(setOutfit));\n    }\n  }\n\n  async increaseSupply(supply: StoreCategory, count: number) {\n    const state = this.engine.getState();\n    const cur = state.path.outfit[supply] || 0;\n    const freeSpace = this.getFreeSpace();\n    const weight = this.getWeight(supply);\n    const storeCount = state.stores[supply] || 0;\n    let addCount = 0;\n    if (freeSpace >= weight && cur < storeCount) {\n      const maxExtraByWeight = Math.floor(freeSpace / weight);\n      const maxExtraByStore = storeCount - cur;\n      addCount = Math.min(count, maxExtraByWeight, maxExtraByStore);\n      if (addCount) {\n        await this.engine.dispatch(\n          this.engine.actions.path.outfit.addM({\n            [supply]: addCount,\n          })\n        );\n        this.updateOutfitting();\n      }\n    }\n    return cur + addCount;\n  }\n\n  async decreaseSupply(supply: StoreCategory, count: number) {\n    const state = this.engine.getState();\n    const cur = state.path.outfit[supply] || 0;\n    if (cur) {\n      const to = Math.max(0, cur - count);\n      if (cur !== to) {\n        await this.engine.dispatch(\n          this.engine.actions.path.outfit.setM({\n            [supply]: to,\n          })\n        );\n        this.updateOutfitting();\n      }\n    }\n  }\n}\n","import { operationManager } from './index';\nimport translate from '../translate';\nimport config from '../config';\nimport { GameSpace, StoreCategory, Event } from '../type';\nimport _ from 'lodash';\n\noperationManager.add({\n    id: 'Ship.reinforceHull',\n    name: translate('reinforce hull'),\n    cooldown: () => {\n        return config.Ship.ALLOY_PER_HULL\n    },\n    isAvailable: (engine) => {\n        const state = engine.getState();\n        return state.engine.activeSpace === GameSpace.Ship;\n    },\n    meta: {\n        space: GameSpace.Ship,\n        cost: {\n            [StoreCategory.alien_alloy]: config.Ship.ALLOY_PER_HULL\n        }\n    },\n    exec: async (engine) => {\n        const state = engine.getState();\n        if ((state.stores.alien_alloy || 0) < config.Ship.ALLOY_PER_HULL) {\n            engine.notify(translate('not enough alien alloy'), GameSpace.Ship);\n            return false;\n        }\n        await engine.dispatch(\n            engine.actions.stores.addM({\n                alien_alloy: -1 * config.Ship.ALLOY_PER_HULL,\n            })\n        );\n        await engine.dispatch(\n            engine.actions.game.spaceShip.addM({\n                hull: 1,\n            })\n        );\n        return true;\n    }\n})\n\noperationManager.add({\n    id: 'Ship.upgradeEngine',\n    name: translate('upgrade engine'),\n    cooldown: () => {\n        return config.Ship.ALLOY_PER_THRUSTER\n    },\n    isAvailable: (engine) => {\n        const state = engine.getState();\n        return state.engine.activeSpace === GameSpace.Ship;\n    },\n    meta: {\n        space: GameSpace.Ship,\n        cost: {\n            [StoreCategory.alien_alloy]: config.Ship.ALLOY_PER_THRUSTER\n        }\n    },\n    exec: async (engine) => {\n        const state = engine.getState();\n        if ((state.stores.alien_alloy || 0) < config.Ship.ALLOY_PER_THRUSTER) {\n            engine.notify(translate('not enough alien alloy'), GameSpace.Ship);\n            return false;\n        }\n        await engine.dispatch(\n            engine.actions.stores.addM({\n                alien_alloy: -1 * config.Ship.ALLOY_PER_THRUSTER,\n            })\n        );\n        await engine.dispatch(\n            engine.actions.game.spaceShip.addM({\n                thrusters: 1,\n            })\n        );\n        return true;\n    }\n})\n\noperationManager.add({\n    id: 'Ship.checkLiftOff',\n    name: translate('lift off'),\n    cooldown: () => {\n        return 0;\n    },\n    isAvailable: (engine) => {\n        const state = engine.getState();\n        return state.engine.activeSpace === GameSpace.Ship;\n    },\n    meta: {\n        space: GameSpace.Ship,\n    },\n    exec: async (engine) => {\n        // const state = engine.getState();\n        if (true) {\n            const event = {\n                title: translate('Ready to Leave?'),\n                id: 'ship_check_lift_off',\n                scenes: {\n                    start: {\n                        text: [\n                            translate(\"time to get out of this place. won't be coming back.\"),\n                        ],\n                        buttons: {\n                            fly: {\n                                text: translate('lift off'),\n                                onChoose: function (engine) {\n                                    engine.dispatch(\n                                        engine.actions.game.spaceShip.setM({\n                                            seenWarning: true,\n                                        })\n                                    );\n                                    const score = engine.prestige.calculateScore()\n                                    engine.notify(translate(`game end`))\n                                    /* i18n-extract score for this game: {score} */\n                                    engine.notify(`score for this game: ${score}`)\n                                    engine.notify(`https://adarkroom.doublespeakgames.com`)\n                                    engine.spaces.Ship.liftOff();\n                                },\n                                nextScene: 'end',\n                            },\n                            wait: {\n                                text: translate('linger'),\n                                onChoose: function () { },\n                                nextScene: 'end',\n                            },\n                        },\n                    },\n                },\n            } as Event;\n            engine.events.addEvent('Ship', event);\n            engine.events.startEvent(event);\n        } else {\n            // engine.spaces.Ship.liftOff();\n        }\n    }\n})","import Engine from './engine';\nimport { GameSpace } from './type';\nimport GameModule from './module';\nimport './operations/ship';\nimport translate from './translate';\nexport default class Ship extends GameModule {\n  constructor(engine: Engine) {\n    super(engine);\n  }\n\n  onArrival() {\n    const state = this.engine.getState();\n    if (!state.game.spaceShip.seenShip) {\n      this.engine.notify(\n        translate('somewhere above the debris cloud, the wanderer fleet hovers. been on this rock too long.'),\n        GameSpace.Ship\n      );\n      this.engine.dispatch(\n        this.engine.actions.game.spaceShip.setM({\n          seenShip: true,\n        })\n      );\n    }\n  }\n\n\n  getMaxHull() {\n    return this.engine.getState().game.spaceShip.hull || 0;\n  }\n\n  liftOff() {\n    this.engine.travelTo(GameSpace.Space);\n  }\n}\n","import Engine from './engine';\nimport GameModule from './module';\n\nexport default class Space extends GameModule {\n  constructor(engine: Engine) {\n    super(engine);\n  }\n\n  onArrival() {\n    this.engine.endGame();\n  }\n}\n","import { operationManager } from './index';\nimport translate from '../translate';\nimport config from '../config';\nimport { GameSpace, Building, StoreCategory } from '../type';\nimport _ from 'lodash';\n\n\noperationManager.add({\n    id: 'Outside.checkTraps',\n    name: translate('check traps'),\n    isAvailable: (engine) => {\n        const state = engine.getState();\n        return state.engine.activeSpace === GameSpace.Outside;\n    },\n    cooldown: () => {\n        return config.Outside.TRAPS_DELAY\n    },\n    exec: async (engine) => {\n        const state = engine.getState();\n        const drops = {} as any;\n        const msg = [];\n        const numTraps = state.game.buildings.trap || 0;\n        if (!numTraps) {\n            engine.notify('not enough trap')\n            await engine.operationExecutor.clearCooldown('Outside.checkTraps');\n            return;\n        }\n        const numBait = state.stores.bait || 0;\n        const numDrops = numTraps + (numBait < numTraps ? numBait : numTraps);\n        for (let i = 0; i < numDrops; i++) {\n            const roll = Math.random();\n            for (const j in config.Outside.TrapDrops) {\n                const drop = config.Outside.TrapDrops[j];\n                if (roll < drop.rollUnder) {\n                    let num = drops[drop.name];\n                    if (typeof num == 'undefined') {\n                        num = 0;\n                        msg.push(drop.message);\n                    }\n                    drops[drop.name] = num + 1;\n                    break;\n                }\n            }\n        }\n        /// TRANSLATORS : Mind the whitespace at the end.\n        /* i18n-extract the traps contain {item1} */\n        /* i18n-extract the traps contain {item1} and {item2} */\n        /* i18n-extract the traps contain {item1}, {item2} and {item3} */\n        /* i18n-extract the traps contain {item1}, {item2}, {item3} and {item4} */\n        /* i18n-extract the traps contain {item1}, {item2}, {item3}, {item4} and {item5} */\n        /* i18n-extract the traps contain {item1}, {item2}, {item3}, {item4}, {item5} and {item6} */\n        let s = 'the traps contain ';\n        for (let l = 0, len = msg.length; l < len; l++) {\n            if (len > 1 && l > 0 && l < len - 1) {\n                s += \", \";\n            } else if (len > 1 && l == len - 1) {\n                /// TRANSLATORS : Mind the whitespaces at the beginning and end.\n                s += \" and \";\n            }\n            s += msg[l];\n        }\n\n        let baitUsed = numBait < numTraps ? numBait : numTraps;\n        drops['bait'] = -baitUsed;\n\n        engine.notify(s, GameSpace.Outside);\n        await engine.dispatch(engine.actions.stores.addM(drops))\n    },\n    meta: {\n        buildings: {\n            [Building.trap]: 1\n        },\n        space: GameSpace.Outside\n    }\n})\n\noperationManager.add({\n    id: 'Outside.gatherWood',\n    name: translate('gather wood'),\n    isAvailable: (engine) => {\n        const state = engine.getState();\n        return state.engine.activeSpace === GameSpace.Outside;\n    },\n    cooldown: () => {\n        return config.Outside.GATHER_DELAY\n    },\n    exec: async (engine) => {\n        engine.notify(translate(\"dry brush and dead branches litter the forest floor\"), GameSpace.Outside);\n        const state = engine.getState();\n        const gatherAmt = !!state.game.buildings.cart ? 50 : 10;\n        await engine.dispatch(engine.actions.stores.addM({\n            wood: gatherAmt\n        }))\n    },\n    meta: {\n        space: GameSpace.Outside\n    }\n})\n\noperationManager.add({\n    id: 'Outside.building',\n    name: translate(\"Buildings\"),\n    isAvailable: (engine) => {\n        const state = engine.getState();\n        if (state.engine.activeSpace !== GameSpace.Outside) {\n            return false;\n        }\n        let existBuilding = false;\n        let storeNames = Object.keys(state.stores);\n        for (let i = 0, len = storeNames.length; i < len; i++) {\n            const name = storeNames[i];\n            if (state.stores[name as StoreCategory] && config.items[name] && config.items[name].type === 'building') {\n                existBuilding = true;\n                break;\n            }\n        }\n        return existBuilding;\n    },\n    exec: async (engine) => {\n        const state = engine.getState();\n        let storeNames = Object.keys(state.stores);\n        const buildings = [];\n        for (let i = 0, len = storeNames.length; i < len; i++) {\n            const name = storeNames[i];\n            const count = state.stores[name as StoreCategory];\n            if (count && config.items[name] && config.items[name].type === 'building') {\n                buildings.push({\n                    name,\n                    count,\n                    info: config.items[name]\n                })\n            }\n        }\n        return buildings;\n    },\n    meta: {\n        space: GameSpace.Outside,\n    }\n})","import Engine from './engine';\nimport config from './config';\nimport _ from 'lodash';\nimport logger from './logger';\nimport { GameSpace, StoreCategory, WorkerType, Building } from './type';\nimport GameModule from './module';\nimport './operations/outside';\nimport translate from './translate';\nimport { Unsubscribe } from '@reduxjs/toolkit';\nexport default class Outside extends GameModule {\n  _popTimeout: any = null;\n  unsubBuilding: Unsubscribe = () => { };\n\n  constructor(engine: Engine) {\n    super(engine);\n    this.updateVillageIncome();\n    this.schedulePopIncrease();\n    this.unsubBuilding = engine.observer((state) => {\n      return state.game.buildings;\n    }, () => {\n      this.enableBuildingWorker();\n    })\n  }\n\n  onArrival() {\n    const state = this.engine.getState();\n    if (!state.game.outside.seenForest) {\n      this.engine.notify(\n        translate('the sky is grey and the wind blows relentlessly'),\n        GameSpace.Outside\n      );\n      this.engine.dispatch(\n        this.engine.actions.game.outside.setM({\n          seenForest: true,\n        })\n      );\n    }\n  }\n\n  increaseWorker(worker: WorkerType, count: number) {\n    const gatherCount = this.getNumGatherers();\n    if (gatherCount > 0) {\n      const increaseAmt = Math.min(gatherCount, count);\n      logger('increasing ' + worker + ' by ' + increaseAmt);\n      this.engine.dispatch(\n        this.engine.actions.game.workers.addM({\n          [worker]: increaseAmt,\n        })\n      );\n    }\n  }\n\n  getTitle() {\n\t\tconst numHuts = this.engine.getState().game.buildings.hut || 0;\n\t\tlet title;\n\t\tif(numHuts === 0) {\n\t\t\ttitle = translate(\"A Silent Forest\");\n\t\t} else if(numHuts == 1) {\n\t\t\ttitle = translate(\"A Lonely Hut\");\n\t\t} else if(numHuts <= 4) {\n\t\t\ttitle = translate(\"A Tiny Village\");\n\t\t} else if(numHuts <= 8) {\n\t\t\ttitle = translate(\"A Modest Village\");\n\t\t} else if(numHuts <= 14) {\n\t\t\ttitle = translate(\"A Large Village\");\n\t\t} else {\n\t\t\ttitle = translate(\"A Raucous Village\");\n\t\t}\n    return title;\n\t}\n\n  decreaseWorker(worker: WorkerType, count: number) {\n    const state = this.engine.getState();\n    const existCount = state.game.workers[worker] || 0;\n    if (existCount > 0) {\n      const decreaseAmt = Math.min(existCount, count);\n      logger('decreasing ' + worker + ' by ' + decreaseAmt);\n      this.engine.dispatch(\n        this.engine.actions.game.workers.addM({\n          [worker]: decreaseAmt * -1,\n        })\n      );\n    }\n  }\n\n  clean() {\n    clearTimeout(this._popTimeout)\n    this.unsubBuilding();\n    super.clean();\n  }\n\n  async destroyHuts(count: number, allowEmpty?: boolean) {\n    const state = this.engine.getState();\n    let dead = 0;\n    let lastHut = state.game.buildings.hut;\n    let hut = lastHut;\n    for (let i = 0; i < count; i++) {\n      const population = state.game.population.value;\n      const rate = population / config.Outside.HUT_ROOM;\n      const full = Math.floor(rate);\n      const huts = allowEmpty ? hut : Math.ceil(rate);\n      if (!huts) {\n        break;\n      }\n      const target = Math.floor(Math.random() * huts) + 1;\n      let inhabitants = 0;\n      if (target <= full) {\n        inhabitants = config.Outside.HUT_ROOM;\n      } else if (target === full + 1) {\n        inhabitants = population % config.Outside.HUT_ROOM;\n      }\n      hut--;\n      if (inhabitants) {\n        dead += inhabitants;\n      }\n    }\n    if (dead) {\n      await this.killVillagers(dead);\n    }\n    if (hut !== lastHut) {\n      await this.engine.dispatch(\n        this.engine.actions.game.buildings.setM({\n          hut,\n        })\n      );\n    }\n    return {\n      dead,\n      destroyHut: hut - lastHut,\n    };\n  }\n\n  async killVillagers(count: number) {\n    const state = this.engine.getState();\n    let last_population = state.game.population.value;\n    let population = last_population - count * -1;\n    if (population < 0) {\n      population = 0;\n    }\n    if (population !== last_population) {\n      await this.engine.dispatch(\n        this.engine.actions.game.population.setM({\n          value: population,\n        })\n      );\n    }\n    const remaining = this.getNumGatherers();\n    const changed: any = {};\n    if (remaining < 0) {\n      let gap = -remaining;\n      for (let k in state.game.workers) {\n        const numWorkers = _.get(state.game.workers, k, 0);\n        if (numWorkers < gap) {\n          gap -= numWorkers;\n          changed[k] = 0;\n        } else {\n          changed[k] = numWorkers + gap * -1;\n          break;\n        }\n      }\n      if (!_.isPlainObject(changed)) {\n        this.engine.dispatch(this.engine.actions.game.workers.setM(changed));\n      }\n    }\n  }\n\n  getNumGatherers() {\n    const state = this.engine.getState();\n    let num = state.game.population.value;\n    for (let k in state.game.workers) {\n      num -= _.get(state.game.workers, k, 0);\n    }\n    return num;\n  }\n\n  getMaxPopulation() {\n    const state = this.engine.getState();\n    return (state.game.buildings.hut || 0) * config.Outside.HUT_ROOM;\n  }\n\n  schedulePopIncrease() {\n    const nextIncrease =\n      Math.floor(\n        Math.random() *\n        (config.Outside.POP_DELAY[1] - config.Outside.POP_DELAY[0])\n      ) + config.Outside.POP_DELAY[0];\n    logger(\n      'next population increase scheduled in ' + nextIncrease + ' minutes'\n    );\n    this._popTimeout = this.engine.setTimeout(\n      this.increasePopulation.bind(this),\n      nextIncrease * 60 * 1000\n    );\n  }\n\n  increasePopulation() {\n    const state = this.engine.getState();\n    if (state.features.location.Outside) {\n      const space = this.getMaxPopulation() - state.game.population.value;\n      if (space > 0) {\n        let num = Math.floor(Math.random() * (space / 2) + space / 2);\n        if (num === 0) num = 1;\n        let msg;\n        if (num == 1) {\n          msg = translate('a stranger arrives in the night');\n        } else if (num < 5) {\n          msg = translate('a weathered family takes up in one of the huts.');\n        } else if (num < 10) {\n          msg = translate('a small group arrives, all dust and bones.');\n        } else if (num < 30) {\n          msg = translate('a convoy lurches in, equal parts worry and hope.');\n        } else {\n          msg = translate(\"the town's booming. word does get around.\");\n        }\n        this.engine.notify(msg);\n        logger('population increased by ' + num);\n        this.engine.dispatch(\n          this.engine.actions.game.population.addM({\n            value: num,\n          })\n        );\n      }\n    }\n    this.schedulePopIncrease();\n  }\n\n  enableBuildingWorker() {\n    const state = this.engine.getState();\n    const jobMap = {\n      'lodge': ['hunter', 'trapper'],\n      'tannery': ['tanner'],\n      'smokehouse': ['charcutier'],\n      'iron mine': ['iron miner'],\n      'coal mine': ['coal miner'],\n      'sulphur mine': ['sulphur miner'],\n      'steelworks': ['steelworker'],\n      'armoury': ['armourer']\n    } as { [key in Building]?: string[] };\n    let added = false;\n    for (let name in state.game.buildings) {\n      if (name !== 'trap') {\n        const jobs = jobMap[name as Building];\n\n        if (jobs) {\n          for (let i = 0, len = jobs.length; i < len; i++) {\n            let job = jobs[i];\n            if (typeof state.game.buildings[name as Building] !== 'undefined' &&\n              typeof state.game.workers[job as WorkerType] === 'undefined') {\n              this.engine.dispatch(this.engine.actions.game.workers.setM({\n                [job]: 0\n              }))\n              added = true;\n            }\n          }\n        }\n      }\n    }\n    return added;\n  }\n\n  updateVillageIncome() {\n    const state = this.engine.getState();\n    for (const worker in config.Outside.INCOME) {\n      const income = config.Outside.INCOME[worker as WorkerType];\n      let num =\n        worker == 'gatherer'\n          ? this.getNumGatherers()\n          : state.game.workers[worker as WorkerType] || 0;\n      if (typeof num === 'number') {\n        const stores = {} as any;\n        if (num < 0) {\n          num = 0;\n        }\n        let needsUpdate = false;\n        let curIncome = this.engine.getIncome(worker);\n        for (let store in income.stores) {\n          stores[store as StoreCategory] =\n            (income.stores[store as keyof typeof income.stores] || 0) * num;\n          if (curIncome[store] !== stores[store]) {\n            needsUpdate = true;\n          }\n        }\n        if (needsUpdate) {\n          this.engine.setIncome(worker, {\n            delay: income.delay,\n            stores: stores,\n          });\n        }\n      }\n    }\n  }\n}\n","import Engine from './engine';\nimport config from './config';\nimport GameModule from './module';\n\nexport default class Prestige extends GameModule {\n  constructor(engine: Engine) {\n    super(engine);\n  }\n\n  collectStores() {\n    const state = this.engine.store?.getState();\n    const prevStores = state!.previous.stores;\n    if (prevStores && prevStores.length > 0) {\n      const toAdd = {} as any;\n      for (const i in config.Prestige.storesMap) {\n        const s = config.Prestige.storesMap[i];\n        toAdd[s.store.toString()] = prevStores[i];\n      }\n      this.engine?.store?.dispatch(this.engine.actions.stores.addM(toAdd));\n    }\n    this.engine?.store?.dispatch(\n      this.engine.actions.previous.setM({\n        stores: [],\n      })\n    );\n  }\n\n  save() {\n    const stores = this.getStores(true);\n    const score = this.totalScore();\n    this.engine.store?.dispatch(\n      this.engine.actions.previous.setM({\n        stores,\n        score,\n      })\n    );\n  }\n\n  totalScore() {\n    const state = this.engine.store?.getState();\n    return (state?.previous.score || 0) + this.calculateScore();\n  }\n\n  calculateScore() {\n    const state = this.engine.store?.getState();\n    let scoreUnadded = this.getStores(false);\n    let fullScore = 0;\n\n    let factor = [\n      1,\n      1.5,\n      1,\n      2,\n      2,\n      3,\n      3,\n      2,\n      2,\n      2,\n      2,\n      1.5,\n      1,\n      1,\n      10,\n      30,\n      50,\n      100,\n      150,\n      150,\n      3,\n      3,\n      5,\n      4,\n    ];\n    for (let i = 0; i < factor.length; i++) {\n      fullScore += scoreUnadded[i] * factor[i];\n    }\n\n    fullScore = fullScore + (state?.stores.alien_alloy || 0) * 10;\n    fullScore = fullScore + state!.game.spaceShip.hull * 50;\n    return Math.floor(fullScore);\n  }\n\n  getStores(reduce: boolean) {\n    const state = this.engine.store!.getState();\n    const stores = [];\n\n    for (var i in config.Prestige.storesMap) {\n      var s = config.Prestige.storesMap[i];\n      stores.push(\n        Math.floor(\n          (state.stores[s.store] || 0) / (reduce ? this.randGen(s.type) : 1)\n        )\n      );\n    }\n\n    return stores;\n  }\n\n  randGen(storeType: string) {\n    var amount;\n    switch (storeType) {\n      case 'g':\n        amount = Math.floor(Math.random() * 10);\n        break;\n      case 'w':\n        amount = Math.floor(Math.floor(Math.random() * 10) / 2);\n        break;\n      case 'a':\n        amount = Math.ceil(Math.random() * 10 * Math.ceil(Math.random() * 10));\n        break;\n      default:\n        return 1;\n    }\n    if (amount !== 0) {\n      return amount;\n    }\n    return 1;\n  }\n}\n","import { operationManager } from './index';\nimport translate from '../translate';\nimport { GameSpace } from '../type';\nimport _ from 'lodash';\n\noperationManager.add({\n    id: 'Engine.travelTo',\n    name: translate('travel to'),\n    isAvailable: (engine) => {\n        const state = engine.getState();\n        let activeCount = 0;\n        Object.keys(state.features.location).forEach((location) => {\n            if (state.features.location[location as never]) {\n                activeCount++;\n            }\n        })\n        return !state.engine.activeSubSpace && activeCount > 1 && state.engine.activeSpace !== GameSpace.World && state.engine.activeSpace !== GameSpace.Space;\n    },\n    exec: async (engine, _, space: string) => {\n        return await engine.travelTo(space as GameSpace);\n    },\n    help: (engine) => {\n        const state = engine.getState();\n        const locations: string[] = [];\n        Object.keys(state.features.location).forEach((location) => {\n            if (state.features.location[location as never]) {\n                locations.push(location);\n            }\n        })\n        return {\n            desc: `travel to ${locations.join(', ')}`,\n            parms: [locations]\n        }\n    }\n})\n\noperationManager.add({\n    id: 'Engine.SubSpace.back',\n    name: translate('Back'),\n    isAvailable: (engine) => {\n        const state = engine.getState();\n        return !!state.engine.activeSubSpace;\n    },\n    meta: {\n       \n    },\n    exec: async (engine) => {\n        await engine.travelToSubSpace('');\n    }\n})","import translate from './translate';\nimport { GameSpace, StoreCategory } from './type';\nimport createState, { GameState, Store, actions } from './state';\nimport logger, {config as configLogger} from './logger';\nimport Events from './events';\nimport World from './world';\nimport Room from './room';\nimport Path from './path';\nimport Ship from './ship';\nimport Space from './space';\nimport Outside from './outside';\nimport _ from 'lodash';\nimport Prestige from './prestige';\nimport {OperationExecutor, operationManager} from './operations';\nimport './operations/engine';\n\nexport type EngineOptions = {\n  state?: GameState,\n  debug?: boolean;\n  doubleTime?: boolean;\n};\n\nclass Engine {\n  GAME_OVER = false;\n  options: EngineOptions = {\n    debug: false,\n    doubleTime: false,\n  };\n  actions = actions;\n  store?: Store;\n  spaces!: {\n    [GameSpace.World]: World;\n    [GameSpace.Room]: Room;\n    [GameSpace.Outside]: Outside;\n    [GameSpace.Path]: Path;\n    [GameSpace.Ship]: Ship;\n    [GameSpace.Space]: Space;\n  };\n  events!: Events;\n  prestige!: Prestige;\n  operationExecutor: OperationExecutor;\n  paused = false;\n  constructor(options?: EngineOptions) {\n    Object.assign(this.options, options || {});\n    configLogger({\n      enable: this.options.debug\n    });\n    this.operationExecutor = new OperationExecutor(this, operationManager);\n    this.startGame(options?.state);\n  }\n\n  notify(text: string, space?: GameSpace, noQueue?: boolean) {\n    this.store?.dispatch(\n      this.actions.notifications.notify({\n        message: {\n          text: translate(text),\n          module: space,\n        },\n        noQueue,\n      })\n    );\n  }\n\n  async dispatch(action: any) {\n    const res = await this.store!.dispatch(action);\n    return res;\n  }\n\n  async operation(operationId: string, data: any) {\n    return await this.operationExecutor.exec(operationId, data);\n  }\n\n  operations() {\n    return this.operationExecutor.availableOperations()\n  }\n\n  startGame(state?: GameState) {\n    // this.clean();\n    this.GAME_OVER = false;\n    this.paused = false;\n    this.loadGame(state);\n    this.events = new Events(this);\n    this.spaces = {\n      [GameSpace.World]: new World(this),\n      [GameSpace.Room]: new Room(this),\n      [GameSpace.Outside]: new Outside(this),\n      [GameSpace.Path]: new Path(this),\n      [GameSpace.Ship]: new Ship(this),\n      [GameSpace.Space]: new Space(this),\n    };\n    this.prestige = new Prestige(this);\n    this._incomeTimeout = this.setTimeout(this.collectIncome.bind(this), 1000);\n    const gameState = this.getState();\n    if (!gameState?.engine.activeSpace) {\n      this.travelTo(GameSpace.Room, true)\n    } else {\n      this.travelTo(gameState?.engine.activeSpace, true)\n    }\n  }\n\n  clean() {\n    if (!this.events) {\n      return;\n    }\n    clearTimeout(this._incomeTimeout);\n    this.events.clean();\n    Object.keys(this.spaces).forEach((space) => {\n      this.spaces[space as GameSpace].clean()\n    })\n    this.prestige.clean();\n  }\n\n  endGame() {\n    if (this.GAME_OVER) {\n      return;\n    }\n    this.GAME_OVER = true;\n    this.clean()\n  }\n\n  addToStore(toAdd: { [key in StoreCategory]?: number }) {\n    this.dispatch(this.actions.stores.addM(toAdd));\n  }\n\n  setToStore(toSet: { [key in StoreCategory]?: number }) {\n    this.dispatch(this.actions.stores.setM(toSet));\n  }\n\n  observer<T>(select: (state: GameState) => T, onChange: (arg0: T) => any) {\n    let currentState: T;\n\n    const store = this.store;\n\n    function handleChange() {\n      let nextState = select(store!.getState());\n      if (!_.isEqual(nextState, currentState)) {\n        currentState = nextState;\n        onChange(currentState);\n      }\n    }\n\n    let unsubscribe = store!.subscribe(handleChange);\n    handleChange();\n    return unsubscribe;\n  }\n\n  getIncome(source: string) {\n    const state = this.getState();\n    return _.get(state.income, source, {});\n  }\n\n  setIncome(source: string, options: any) {\n    const state = this.getState();\n    const exist = _.get(state.income, source);\n    if (exist) {\n      options.timeLeft = exist.timeLeft;\n    }\n    this.dispatch(\n      this.actions.income.setM({\n        [source]: options,\n      })\n    );\n  }\n\n  pauseGame() {\n    this.paused = true;\n    this.clean();\n  }\n\n  continueGame() {\n    this.paused = false;\n    this.startGame(this.store?.getState())\n  }\n\n  saveGame() {}\n\n  getActionSpace() {\n    return this.store?.getState().engine.activeSpace;\n  }\n\n  getState() {\n    return this.store!.getState();\n  }\n\n  switchLanguage() {}\n\n  async travelTo(space: GameSpace, force?: boolean) {\n    const activeSpace = this.getActionSpace();\n    if (activeSpace !== space || force) {\n      await this.travelToSubSpace('');\n      await this.store?.dispatch(this.actions.engine.changeSpace(space));\n      this.spaces[space].onArrival();\n    }\n  }\n\n  async travelToSubSpace(space: string) {\n    await this.store?.dispatch(this.actions.engine.changeSubSpace(space));\n  }\n\n  getGuid() {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n      const r = (Math.random() * 16) | 0,\n        v = c === 'x' ? r : (r & 0x3) | 0x8;\n      return v.toString(16);\n    });\n  }\n\n  setTimeout(callback: () => any, timeout: number, skipDouble?: boolean) {\n    if (this.options.doubleTime && !skipDouble) {\n      logger('Double time, cutting timeout in half');\n      timeout /= 2;\n    }\n\n    return setTimeout(callback, timeout);\n  }\n\n  setInterval(callback: () => any, interval: number, skipDouble?: boolean) {\n    if (this.options.doubleTime && !skipDouble) {\n      logger('Double time, cutting timeout in half');\n      interval /= 2;\n    }\n    return setInterval(callback, interval);\n  }\n\n  loadGame(state?: GameState) {\n    this.store = createState(this, state);\n  }\n\n  _incomeTimeout: any = null;\n\n  collectIncome() {\n    let changed = false;\n    const incomeStores = [];\n    const state = _.cloneDeep(this.getState());\n    if (state.engine.activeSpace !== GameSpace.Space) {\n      for (let source in state.income) {\n        const income = state.income[source as keyof typeof state.income];\n        if (!income) {\n          continue;\n        }\n        if (typeof income.timeLeft !== 'number') {\n          income.timeLeft = 0;\n        }\n        income.timeLeft--;\n\n        if (income.timeLeft <= 0) {\n          logger('collection income from ' + source);\n          if (source === 'thieves') {\n            this.addStolen(income.stores);\n          }\n\n          const cost = income.stores;\n          let ok = true;\n          if (source !== 'thieves') {\n            for (var k in cost) {\n              let have = state.stores[k as StoreCategory] || 0;\n              if (have + cost[k as StoreCategory] < 0) {\n                ok = false;\n                break;\n              }\n            }\n          }\n\n          if (ok) {\n            incomeStores.push(income.stores);\n          }\n          changed = true;\n          if (typeof income.delay == 'number') {\n            income.timeLeft = income.delay;\n          }\n        }\n      }\n    }\n    if (changed) {\n      const addStores: any = {};\n      incomeStores.forEach(store => {\n        Object.keys(store).forEach(key => {\n          const addCount = addStores[key] || 0 + store[key as StoreCategory] || 0;\n          if (addCount) {\n            addStores[key] = addStores[key] || 0 + store[key as StoreCategory] || 0;\n          }\n        });\n      });\n      this.dispatch(this.actions.stores.addM(addStores));\n    }\n    this.dispatch(this.actions.income.setM(state.income));\n    this._incomeTimeout = this.setTimeout(this.collectIncome.bind(this), 1000);\n  }\n\n  addStolen(stores: any) {\n    const state = this.getState();\n    let addStores: any = {};\n    for (let k in stores) {\n      let old = state.stores[k as StoreCategory] || 0;\n      let short = old + stores[k];\n      //if they would steal more than actually owned\n      if (short < 0) {\n        addStores[k] = stores[k] * -1 + short;\n      } else {\n        addStores[k] = stores[k] * -1;\n      }\n    }\n    this.dispatch(this.actions.game.stolen.addM(addStores));\n  }\n}\n\nexport default Engine;\n","import config from './config';\nimport Polyglot from 'node-polyglot';\nimport _ from 'lodash';\n\n_.templateSettings.interpolate = /{([\\s\\S]+?)}/\n\ntype Tester = {\n    match: RegExp,\n    template: string,\n    interpolcation: (text: string, templateKeys: string[], keys: string[]) => string,\n    keys: string[]\n}\n\nlet translation = new Polyglot();\nlet superInterpolation = [] as Tester[];\nlet cache = {} as { [key: string]: string };\n\nconst R_Match_Super_Interpolcation_raw = /\\\\{\\w+\\\\}/g;\n\nfunction escapeStringRegexp(string: string) {\n    if (typeof string !== 'string') {\n        throw new TypeError('Expected a string');\n    }\n    return string\n        .replace(/[|\\\\{}()[\\]^$+*?.]/g, '\\\\$&')\n        .replace(/-/g, '\\\\x2d');\n}\n\nexport function setTranslation(strings: { [key: string]: string }) {\n    translation = new Polyglot();\n    translation.extend(strings);\n    superInterpolation = [];\n    cache = {};\n    Object.keys(strings).forEach((key) => {\n        const r = /{(.+?)}/g;\n        let match = r.exec(key);\n        const keys = [];\n        while (match) {\n            keys.push(match[1])\n            match = r.exec(key)\n        }\n        if (keys.length > 0) {\n            const reg = escapeStringRegexp(key).replace(R_Match_Super_Interpolcation_raw, '(.+?)');\n            superInterpolation.push({\n                match: new RegExp(`^${reg}$`),\n                interpolcation: (template: string, templateKeys: string[], keys: string[]) => {\n                    const ctx = {} as any;\n                    templateKeys.forEach(function (key, index) {\n                        ctx[key] = translate(keys[index]);\n                    });\n                    return template.replace(/{(.+?)}/g, (_, key) => {\n                        return typeof ctx[key] === 'undefined' ? key : ctx[key];\n                    })\n                },\n                template: strings[key],\n                keys: keys\n            })\n        }\n    })\n    superInterpolation.sort((a, b) => {\n        return b.template.length - a.template.length;\n    })\n}\n\nexport function translate(text: string, options?: number | Polyglot.InterpolationOptions) {\n    if (cache[text]) {\n        return cache[text];\n    }\n    if (!isNaN(Number(text))) {\n        return text;\n    }\n    if (config.items[text]) {\n        text = config.items[text].name;\n    } else if (config.Outside.INCOME[text as keyof typeof config.Outside.INCOME]) {\n        text = config.Outside.INCOME[text as keyof typeof config.Outside.INCOME].name;\n    } else {\n        for (let i = 0, len = superInterpolation.length; i < len; i++) {\n            const tester = superInterpolation[i];\n            const match = tester.match.exec(text);\n            tester.match.lastIndex = 0;\n            if (match) {\n                const res = tester.interpolcation(tester.template, tester.keys, match.slice(1));\n                cache[text] = res;\n                return res;\n            }\n        }\n    }\n    const res = translation.t(text, options);\n    cache[text] = res;\n    return res;\n}"],"names":["StoreCategory","GameSpace","PerkCategory","runtime","exports","Op","Object","prototype","hasOwn","hasOwnProperty","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","obj","key","value","defineProperty","enumerable","configurable","writable","err","wrap","innerFn","outerFn","self","tryLocsList","generator","create","Generator","context","Context","_invoke","state","method","arg","Error","undefined","done","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","type","makeInvokeMethod","fn","call","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","this","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","AsyncIterator","PromiseImpl","previousPromise","callInvokeWithMethodAndArg","resolve","reject","invoke","result","__await","then","unwrapped","error","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","length","i","doneResult","displayName","isGeneratorFunction","genFun","ctor","constructor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","iter","keys","object","reverse","pop","skipTempReset","prev","charAt","slice","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","catch","thrown","delegateYield","module","regeneratorRuntime","accidentalStrictMode","globalThis","Function","translate","text","Building","Craftable","NonCraftable","WorkerType","Perks","boxer","desc","notify","martial_artist","unarmed_master","barbarian","slow_metabolism","desert_rat","evasive","precise","scout","stealthy","gastronome","CraftableCategory","TradeCategory","NonCraftableCategory","WeaponCategory","incomes","gatherer","delay","stores","wood","hunter","fur","meat","trapper","bait","tanner","leather","charcutier","cured_meat","iron_miner","iron","coal_miner","coal","sulphur_miner","sulphur","steelworker","steel","armourer","bullets","createSlice","initialState","penrose","reducers","changePenrose","action","payload","actions","reducer","configSlice","hyperMode","soundOn","changeHyperMode","changeSound","locationSlice","Outside","Room","Ship","World","Path","enableOutside","enableRoom","enableSpaceShip","enableWorld","enablePath","combineReducers","location","locationActions","items","trap","craft","maximum","availableMsg","buildMsg","maxMsg","cost","game","buildings","cart","hut","lodge","trading_post","tannery","smokehouse","workshop","scales","steelworks","armoury","torch","cloth","waterskin","cask","water_tank","bone_spear","teeth","weapon","verb","damage","cooldown","rucksack","wagon","convoy","l_armour","i_armour","s_armour","iron_sword","steel_sword","rifle","trade","grenade","bolas","laser_rifle","energy_cell","bayonet","charm","medicine","alien_alloy","compass","fists","Outfits","filter","item","WorldTile","VILLAGE","IRON_MINE","COAL_MINE","SULPHUR_MINE","FOREST","FIELD","BARRENS","ROAD","HOUSE","CAVE","TOWN","CITY","OUTPOST","SHIP","BOREHOLE","BATTLEFIELD","SWAMP","CACHE","Engine","VERSION","MAX_STORE","SAVE_DISPLAY","RADIUS","VILLAGE_POS","TILE","TILE_PROBS","LANDMARKS","num","minRadius","maxRadius","scene","label","World_RADIUS","STICKINESS","LIGHT_RADIUS","BASE_WATER","MOVES_PER_FOOD","MOVES_PER_WATER","DEATH_COOLDOWN","FIGHT_CHANCE","BASE_HEALTH","BASE_HIT_CHANCE","MEAT_HEAL","MEDS_HEAL","FIGHT_DELAY","NORTH","SOUTH","WEST","EAST","FIRE_COOL_DELAY","ROOM_WARM_DELAY","BUILDER_STATE_DELAY","STOKE_COOLDOWN","NEED_WOOD_DELAY","MiscItems","FireStatus","Dead","status","Smoldering","Flickering","Burning","Roaring","TemperatureStatus","Freezing","Cold","Mild","Warm","Hot","Event","EVENT_TIME_RANGE","PANEL_FADE","FIGHT_SPEED","EAT_COOLDOWN","MEDS_COOLDOWN","LEAVE_COOLDOWN","STUN_DURATION","STORES_OFFSET","GATHER_DELAY","TRAPS_DELAY","POP_DELAY","HUT_ROOM","INCOME","TrapDrops","rollUnder","message","DEFAULT_BAG_SPACE","Weight","Outfit","LIFTOFF_COOLDOWN","ALLOY_PER_HULL","ALLOY_PER_THRUSTER","BASE_HULL","BASE_THRUSTERS","Space","SHIP_SPEED","BASE_ASTEROID_DELAY","BASE_ASTEROID_SPEED","FTB_SPEED","STAR_WIDTH","STAR_HEIGHT","NUM_STARS","STAR_SPEED","FRAME_DELAY","Prestige","storesMap","store","getDefaultValue","v","defaultValue","clean","prop","_","get","isObject","isEmpty","removeM","unset","set","setM","addM","Math","min","max","config","getInitialState","reduce","p","c","storesSlice","numberValueModify","changeFire","level","change","getStoreInitialState","cleared","seenAll","mask","map","enableShip","ship","dir","sulphurmine","ironmine","coalmine","water","danger","foodMove","waterMove","starvation","thirst","usedOutposts","curPos","cloneDeep","health","dead","fightMove","outfit","stunned","seeAll","visit","x","y","replace","useOutpost","setMap","pos","hull","thrusters","seenShip","seenWarning","seenForest","fire","builder","temperature","thieves","stolen","population","workers","city","world","spaceShip","outside","fireActions","builderActions","tempActions","thievesActions","stolenActions","buildingsActions","populationActions","workersActioins","cityActioins","worldActions","spaceShipActions","outsideActions","createAsyncThunk","data","appState","getState","engine","activeSpace","noQueue","_module","notifyQueue","global","spaceNotify","queue","extraReducers","addCase","fulfilled","changeSpace","space","dispatch","notificationActions","activeSubSpace","changeSubSpace","accumulator","current","addPerk","category","notificationsActions","punches","starved","dehydrated","cityCleared","perks","statistics","perksActions","statisticsActions","eventStack","activeScene","loot","enemys","won","fightEvents","end","shift","cleanEnemys","logFight","id","r","random","toString","unshift","setSceneEnemy","chara","maxHealth","winFight","score","changed","crafts","buys","setChanged","addCraft","addBuy","empty","outfitActions","opt","extra","now","Date","lastExecTime","cooldownAt","clearCooldown","history","room","marketing","features","income","character","events","notifications","previous","path","operation","configActions","StoreActions","gameActions","engineActions","incomeActions","characterActions","marketingActions","eventActions","previousActions","featuresActions","roomActions","pathActions","delayActions","operationActions","moddles","enable","log","console","title","isAvailable","scenes","start","notification","blink","buttons","kill","nextScene","spare","hang","onLoad","_engine$store4","leave","buyScales","reward","buyTeeth","buyBait","buyCompass","available","goodbye","investigate","ignore","nothing","backinside","stuff","_engine$store","numWood","floor","numScales","_engine$store3","numTeeth","_engine$store5","numCloth","deny","build","steal","n","_engine$store7","wood100","wood500","inputDelay","saveDelay","fur100","fur500","buyMap","onChoose","spaces","applyMap","learn","agree","evasion","precision","force","help","alloy","bye","cells","numWrecked","track","destroyHuts","mourn","heal","healed","death","numKilled","killVillagers","buyMedicine","outpost","chance","swamp","enter","cabin","talk","markVisited","cave","a1","combat","enemy","hit","attackDelay","a2","a3","b1","b2","b3","b4","c1","c2","end1","clearDungeon","end2","end3","town","b5","c3","c4","c5","c6","d1","d2","end4","end5","end6","a4","descend","ranged","b6","b7","b8","c7","c8","c9","c10","c11","plural","c12","c13","d3","d4","d5","d6","d7","d8","d9","d10","d11","end7","end8","end9","end10","end11","end12","end13","end14","end15","house","supplies","setWater","getMaxWater","occupied","battlefield","borehole","drawRoad","leavel","attack","run","cache","underground","take","exit","prestige","collectStores","getDistance","getTerrain","enemyName","deathMessage","distance","GameModule","onArrival","OperationExecutor","manager","listeners","findById","availableOperations","rtn","operations","_this","meta","on","operationId","callback","off","index","indexOf","splice","emit","resp","exec","optHistory","args","logger","operationManager","find","add","loots","join","parms","lootweight","getWeight","freeSpace","getFreeSpace","lootNumLeft","operationExecutor","taken","success","res","dropNum","doHeal","meatHeal","medsHeal","endEvent","cd","numWeapons","k","_item$trade","event","getActiveEvent","dmg","getHitChance","damageEnemy","getActiveScene","choice","btn","costMod","button","storeKey","loadScene","lowestMatch","sceneRate","parseFloat","Events","eventPool","Global","GlobalEvents","RoomEvents","OutsideEvents","setpieces","Fight","encounters","eventMap","Market","MarketEvents","scheduleNextEvent","initDelay","clearInterval","_enemyAttackTimer","hp","getMaxHealth","getCurrentSpaceEventsPool","concat","triggerEvent","pool","possibleEvents","startEvent","eventIndex","findIndex","e","eventTitle","sceneName","evt","startCombat","startStory","addEvent","setRandomLoots","setInterval","enemyAttack","bind","len","toHit","damageAdventurer","die","time","target","setHp","lootList","randomLoot","triggerFight","possibleFights","fight","scale","nextEvent","setTimeout","stateName","interval","_this2","_this2$engine$store3","_this2$engine$store4","recallDelay","_this$engine$store3","_this$engine$store4","move","generateMap","newMask","mapSearch","compassDir","testMap","Array","lightMap","_this$engine$store","uncoverMap","j","abs","findClosestRoad","startPos","searchX","searchY","dtmp","dx","dy","pow","tile","xIntersect","yIntersect","closestRoad","xDist","yDist","xDir","yDir","isTerrain","l_armou","_this$engine$store2","dark","w","maxWater","moveSouth","moveWest","moveEast","moveNorth","direction","oldTile","narrateMove","doSpace","checkDanger","t","chooseTile","landmark","l","placeLandmark","cur","adjacent","chances","nonSticky","list","sort","a","b","n1","substring","prob","required","targets","search","horz","vert","goHome","sulphur_mine","iron_mine","coal_mine","travelTo","getCapacity","checkFight","newTile","msg","from","to","outpostUsed","useSupplies","movesPerFood","starvedCount","movesPerWater","dehydratedCount","curTile","needsWorkshop","currentFireStatus","onFireChange","newState","findKey","storeNames","count","travelToSubSpace","thing","buyUnlocked","group","good","storeMod","have","tradeMsg","craftUnlocked","craftable","numThings","setToStore","_craftable$craft","_craftable$craft2","addToStore","_fireTimer","coolFire","_tempTimer","adjustTemp","builderLevel","_builderTimer","updateBuilderState","unlockForest","observer","startThieves","setIncome","canTrade","clearTimeout","old","fireStatus","temp","lBuilder","isExist","perk","addStores","cloneOutfit","pathEnable","openPath","updateOutfitting","outfits","outfitChanged","setOutfit","increaseSupply","supply","weight","storeCount","addCount","maxExtraByWeight","decreaseSupply","fly","calculateScore","liftOff","wait","_GameModule","getMaxHull","endGame","drops","numTraps","numDrops","numBait","roll","drop","s","gatherAmt","existBuilding","updateVillageIncome","schedulePopIncrease","unsubBuilding","enableBuildingWorker","increaseWorker","worker","gatherCount","getNumGatherers","increaseAmt","getTitle","numHuts","decreaseWorker","existCount","decreaseAmt","_popTimeout","allowEmpty","lastHut","rate","full","huts","ceil","inhabitants","destroyHut","last_population","remaining","gap","numWorkers","isPlainObject","getMaxPopulation","nextIncrease","increasePopulation","jobMap","added","jobs","job","needsUpdate","curIncome","getIncome","prevStores","toAdd","save","getStores","totalScore","_this$engine$store5","scoreUnadded","fullScore","factor","randGen","storeType","amount","activeCount","locations","options","debug","doubleTime","assign","configLogger","startGame","GAME_OVER","paused","loadGame","_incomeTimeout","collectIncome","gameState","toSet","select","onChange","currentState","handleChange","nextState","isEqual","unsubscribe","subscribe","source","exist","timeLeft","pauseGame","continueGame","_this$store2","saveGame","getActionSpace","_this$store3","switchLanguage","_this$store4","_this$store5","getGuid","timeout","skipDouble","configureStore","preloadedState","middleware","getDefaultMiddleware","thunk","extraArgument","createState","incomeStores","addStolen","ok","short","templateSettings","interpolate","translation","Polyglot","superInterpolation","R_Match_Super_Interpolcation_raw","Number","tester","match","lastIndex","interpolcation","template","strings","extend","reg","string","escapeStringRegexp","RegExp","templateKeys","ctx"],"mappings":"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"}